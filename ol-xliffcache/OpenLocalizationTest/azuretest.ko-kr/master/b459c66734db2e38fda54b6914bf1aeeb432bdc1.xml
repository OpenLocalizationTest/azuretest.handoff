<markdown_skeleton_root>
  <block_element>
    <ArrayOfMarkdownBlockBase xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownBlockBase
        xsi:type="MarkdownAzureMetadataBlock"
        item_id="4349c995-11d1-4d08-952d-10dac792d6ab"
        item_type="AzureMetadata"
        item_footer="footer_not_set"
        trans_unit_id="4349c995-11d1-4d08-952d-10dac792d6ab">
        <LocalizeItemList>
          <MarkdownInternalXmlItem
            internal_item_id="d4545959-1cfa-4c86-8efd-11d535f1a204"
            trans_unit_id="101"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
          <MarkdownInternalXmlItem
            internal_item_id="d948890b-4d8b-4fc5-88b6-9624e1c3b2e7"
            trans_unit_id="102"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
        </LocalizeItemList>
        <ItemValue>&lt;properties 
   pageTitle="d4545959-1cfa-4c86-8efd-11d535f1a204"
   description="d948890b-4d8b-4fc5-88b6-9624e1c3b2e7"
   services="event-hubs"
   documentationCenter="na"
   authors="sethmanheim"
   manager="timlt"
   editor="" /&gt;
&lt;tags 
   ms.service="event-hubs"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="tbd"
   ms.date="07/10/2015"
   ms.author="sethm" /&gt;

</ItemValue>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="f45a0f0f-9fc0-47ec-b353-2003942ff7ae"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="f45a0f0f-9fc0-47ec-b353-2003942ff7ae">
        <segment
          trans_unit_id="103">
          <SegmentId>f89ca7c6-8557-4b4c-9e90-4c2b3a89059b</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="103"
            trans_unit_id="103-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>1</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="d30619fa-5cdf-4c8f-8994-ccf138b2502c"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="d30619fa-5cdf-4c8f-8994-ccf138b2502c">
        <Lines>
          <MarkdownLine>
            <LineId>16ee4b27-8a40-4f46-a13b-3b7abdb68754</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="104">
                <SegmentId>4ae5f9d5-c62b-4620-8307-f3f714651589</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="104"
                  trans_unit_id="104-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="105">
                <SegmentId>fbfabb41-a945-4088-9901-5c325a911dfa</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="105"
                  trans_unit_id="105-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="106">
                <SegmentId>ce345a12-3afe-4674-b4dc-c7380873a357</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="106"
                  trans_unit_id="106-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="107">
                <SegmentId>d518c0f8-b8f7-4915-b6ad-04b2a7adeca9</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="107"
                  trans_unit_id="107-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="104">
            <SegmentId>4ae5f9d5-c62b-4620-8307-f3f714651589</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="104"
              trans_unit_id="104-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="105">
            <SegmentId>fbfabb41-a945-4088-9901-5c325a911dfa</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="105"
              trans_unit_id="105-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="106">
            <SegmentId>ce345a12-3afe-4674-b4dc-c7380873a357</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="106"
              trans_unit_id="106-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="107">
            <SegmentId>d518c0f8-b8f7-4915-b6ad-04b2a7adeca9</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="107"
              trans_unit_id="107-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="faa53857-427e-421e-bea1-44e18e3dea70"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="faa53857-427e-421e-bea1-44e18e3dea70">
        <Lines>
          <MarkdownLine>
            <LineId>52d9bd81-8f8e-425d-b907-4d2a7fa66bc6</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="108">
                <SegmentId>2c767caf-5430-4ce8-ba1d-34868b0f2450</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="108"
                  trans_unit_id="108-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="109">
                <SegmentId>b0a07aa6-272a-4e41-beb1-7bdec36852e6</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="109"
                  trans_unit_id="109-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="109"
                  trans_unit_id="109-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>.NET Class Library</internal_link_text>
                  <internal_link_url>https://msdn.microsoft.com/library/jj933431.aspx</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="109"
                  trans_unit_id="109-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="4"
                  internal_item_parent_id="109"
                  trans_unit_id="109-4"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>EventProcessorHost API</internal_link_text>
                  <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.aspx</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="5"
                  internal_item_parent_id="109"
                  trans_unit_id="109-5"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="108">
            <SegmentId>2c767caf-5430-4ce8-ba1d-34868b0f2450</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="108"
              trans_unit_id="108-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="109">
            <SegmentId>b0a07aa6-272a-4e41-beb1-7bdec36852e6</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="109"
              trans_unit_id="109-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="109"
              trans_unit_id="109-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>.NET Class Library</internal_link_text>
              <internal_link_url>https://msdn.microsoft.com/library/jj933431.aspx</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="109"
              trans_unit_id="109-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="4"
              internal_item_parent_id="109"
              trans_unit_id="109-4"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>EventProcessorHost API</internal_link_text>
              <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.aspx</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="5"
              internal_item_parent_id="109"
              trans_unit_id="109-5"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="9be73c19-fa11-4415-9888-b79a83ec0250"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="9be73c19-fa11-4415-9888-b79a83ec0250">
        <segment
          trans_unit_id="110">
          <SegmentId>942e460e-3c64-468f-b017-717efdf3943a</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="110"
            trans_unit_id="110-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="fa62cde8-f049-4f01-9d28-aeff0c161ed5"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="fa62cde8-f049-4f01-9d28-aeff0c161ed5">
        <Lines>
          <MarkdownLine>
            <LineId>f2112b33-7416-4ca5-ab41-44d04f5dd7a5</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="111">
                <SegmentId>48a8acc2-ea95-4fad-81d9-aa9a3981cc8d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="111"
                  trans_unit_id="111-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <MarkdownInternalBoldItem
                  internal_item_id="2"
                  internal_item_parent_id="111"
                  trans_unit_id="111-2"
                  internal_item_type="Bold">
                  <internal_items />
                  <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                </MarkdownInternalBoldItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="111"
                  trans_unit_id="111-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="111">
            <SegmentId>48a8acc2-ea95-4fad-81d9-aa9a3981cc8d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="111"
              trans_unit_id="111-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <MarkdownInternalBoldItem
              internal_item_id="2"
              internal_item_parent_id="111"
              trans_unit_id="111-2"
              internal_item_type="Bold">
              <internal_items />
              <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
            </MarkdownInternalBoldItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="111"
              trans_unit_id="111-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="aec90945-e249-4279-935e-75cc5502887b"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="aec90945-e249-4279-935e-75cc5502887b">
        <segment
          trans_unit_id="112">
          <SegmentId>089c983e-9f8c-4ffd-9096-be387ea83468</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="112"
            trans_unit_id="112-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="cfaea91e-f1c1-4356-8cc2-e6c763d69afe"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="cfaea91e-f1c1-4356-8cc2-e6c763d69afe">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Create the Event Hub
EventHubDescription ehd = new EventHubDescription(eventHubName);
ehd.PartitionCount = SampleManager.numPartitions;
namespaceManager.CreateEventHubAsync(ehd).Wait();</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="cf6d2dfa-fc06-4bc9-a5cd-603b6f42c66e"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="cf6d2dfa-fc06-4bc9-a5cd-603b6f42c66e">
        <segment
          trans_unit_id="113">
          <SegmentId>2ce9263d-7534-49d5-9e49-273b41ca8bd2</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="113"
            trans_unit_id="113-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="8dc3d035-0553-456c-b44f-30936b9872a2"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="8dc3d035-0553-456c-b44f-30936b9872a2">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>EventHubDescription ehd = await namespaceManager.GetEventHubAsync(eventHubName);

// Create a customer SAS rule with Manage permissions
ehd.UserMetadata = "Some updated info";
string ruleName = "myeventhubmanagerule";
string ruleKey = SharedAccessAuthorizationRule.GenerateRandomKey();
ehd.Authorization.Add(new SharedAccessAuthorizationRule(ruleName, ruleKey, new AccessRights[] {AccessRights.Manage, AccessRights.Listen, AccessRights.Send} )); 
namespaceManager.UpdateEventHubAsync(ehd).Wait();</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="565fd05b-dcbc-492f-8adc-67ac872ef7bd"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="565fd05b-dcbc-492f-8adc-67ac872ef7bd">
        <segment
          trans_unit_id="114">
          <SegmentId>1532c16c-dbef-4c63-b4b5-cdf2b45b0639</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="114"
            trans_unit_id="114-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="515d58a4-df3e-44f7-b4ff-75d7aca6505d"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="515d58a4-df3e-44f7-b4ff-75d7aca6505d">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>namespaceManager.DeleteEventHubAsync("event hub name").Wait();</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="cb733065-ed13-48e6-8ed9-55793edcf5b0"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="cb733065-ed13-48e6-8ed9-55793edcf5b0">
        <segment
          trans_unit_id="115">
          <SegmentId>ac5f3e81-b553-4c31-94ea-6bc5aebcfb2b</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="115"
            trans_unit_id="115-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="7f79a996-8155-498f-ab26-40450ed60481"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="7f79a996-8155-498f-ab26-40450ed60481">
        <segment
          trans_unit_id="116">
          <SegmentId>6dd4f947-f0e8-483f-959f-7acd39d7124c</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="116"
            trans_unit_id="116-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="879e4831-12d1-4313-9e23-2952abff2a03"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="879e4831-12d1-4313-9e23-2952abff2a03">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// EventHubClient model (uses implicit factory instance, so all links on same connection)
EventHubClient eventHubClient = EventHubClient.Create("event hub name");</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="a1918c59-8869-4049-8f13-192e9d527fef"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="a1918c59-8869-4049-8f13-192e9d527fef">
        <segment
          trans_unit_id="117">
          <SegmentId>972b7fff-197b-44da-a585-3bc9a92f82e9</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="117"
            trans_unit_id="117-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="005ca37b-72ff-41c0-a21a-4fc508d9bac0"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="005ca37b-72ff-41c0-a21a-4fc508d9bac0">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Create the device/temperature metric
MetricEvent info = new MetricEvent() { DeviceId = random.Next(SampleManager.NumDevices), Temperature = random.Next(100) };
EventData data = new EventData(new byte[10]); // Byte array
EventData data = new EventData(Stream); // Stream 
EventData data = new EventData(info, serializer) //Object and serializer 
    {
       PartitionKey = info.DeviceId.ToString()
    };

// Set user properties if needed
data.Properties.Add("Type", "Telemetry_" + DateTime.Now.ToLongTimeString());

// Send single message async
await client.SendAsync(data);</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="3dc9cfd2-5fc9-49d5-8dc7-0028ebcdb30f"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="3dc9cfd2-5fc9-49d5-8dc7-0028ebcdb30f">
        <segment
          trans_unit_id="118">
          <SegmentId>d60d8685-738e-43f6-8798-5e801bcdf43a</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="118"
            trans_unit_id="118-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="eefc1502-8558-4716-ba6c-86a2405163c2"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="eefc1502-8558-4716-ba6c-86a2405163c2">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Create the Event Hub client
EventHubClient eventHubClient = EventHubClient.Create(EventHubName);

// Get the default subscriber group
EventHubSubscriberGroup defaultSubscriberGroup = eventHubClient.GetDefaultSubscriberGroup();

// All messages
EventHubReceiver consumer = await defaultConsumerGroup.CreateReceiverAsync(shardId: index);

// From one day ago
EventHubReceiver consumer = await defaultConsumerGroup.CreateReceiverAsync(shardId: index, startingDateTimeUtc:DateTime.Now.AddDays(-1));

// From specific offset, -1 means oldest
EventHubReceiver consumer = await defaultConsumerGroup.CreateReceiverAsync(shardId: index,startingOffset:-1); </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="4c3f4862-e506-47e0-84d2-89a48be41fb1"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="4c3f4862-e506-47e0-84d2-89a48be41fb1">
        <segment
          trans_unit_id="119">
          <SegmentId>7e538ae8-5dca-4856-826c-460eb8aea937</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="119"
            trans_unit_id="119-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="fe0be5ec-7f9f-4e34-84e3-6a55f30afdad"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="fe0be5ec-7f9f-4e34-84e3-6a55f30afdad">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>var message = await consumer.ReceiveAsync();

// Provide a serializer
var info = message.GetBody&lt;Type&gt;(Serializer)

// Get a byte[]
var info = message.GetBytes(); 
msg = UnicodeEncoding.UTF8.GetString(info);</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="694175c3-f1d0-4b67-a74e-fdbe2e3d86b8"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="694175c3-f1d0-4b67-a74e-fdbe2e3d86b8">
        <segment
          trans_unit_id="120">
          <SegmentId>b5c73bb5-b6d1-4c77-a0da-e3c6501999e5</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="120"
            trans_unit_id="120-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="85a3fb4a-e4fb-4aab-877c-45a4eed2ece4"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="85a3fb4a-e4fb-4aab-877c-45a4eed2ece4">
        <Lines>
          <MarkdownLine>
            <LineId>37bb3d7b-3d40-4905-ba5c-6b1876b06688</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="121">
                <SegmentId>e2ff282c-e69b-4b80-b679-c25790dab114</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="121"
                  trans_unit_id="121-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="121">
            <SegmentId>e2ff282c-e69b-4b80-b679-c25790dab114</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="121"
              trans_unit_id="121-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="56ec96d7-3ac5-426a-9231-96392296031c"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="56ec96d7-3ac5-426a-9231-96392296031c">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Checkpointing is done within the SimpleEventProcessor and on a per-consumerGroup per-partition basis, workers resume from where they last left off.
// Use the EventData.Offset value for checkpointing yourself, this value is unique per partition.
string eventHubConnectionString = System.Configuration.ConfigurationManager.AppSettings["Microsoft.ServiceBus.ConnectionString"];
string blobConnectionString = System.Configuration.ConfigurationManager.AppSettings["AzureStorageConnectionString"]; // Required for checkpoint/state

EventHubDescription eventHubDescription = new EventHubDescription(EventHubName);
EventProcessorHost host = new EventProcessorHost(WorkerName, EventHubName, defaultConsumerGroup.GroupName, eventHubConnectionString, blobConnectionString);
            host.RegisterEventProcessorAsync&lt;SimpleEventProcessor&gt;();

// To close
host.UnregisterEventProcessorAsync().Wait();   </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="4f8fd5a0-f063-41b9-afc7-11f3918c1a69"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="4f8fd5a0-f063-41b9-afc7-11f3918c1a69">
        <Lines>
          <MarkdownLine>
            <LineId>26cd7a77-5fc2-433c-ba93-5c44f769a9a8</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="122">
                <SegmentId>2820eaff-2313-4914-bba7-b9cad901a808</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="122"
                  trans_unit_id="122-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="122"
                  trans_unit_id="122-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>IEventProcessor</internal_link_text>
                  <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.ieventprocessor.aspx</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="122"
                  trans_unit_id="122-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="122">
            <SegmentId>2820eaff-2313-4914-bba7-b9cad901a808</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="122"
              trans_unit_id="122-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="122"
              trans_unit_id="122-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>IEventProcessor</internal_link_text>
              <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.ieventprocessor.aspx</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="122"
              trans_unit_id="122-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="f40d9b3d-aac2-469f-bbe0-e0b7b2fda3a5"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="f40d9b3d-aac2-469f-bbe0-e0b7b2fda3a5">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public class SimpleEventProcessor : IEventProcessor
{
    IDictionary&lt;string, string&gt; map;
    PartitionContext partitionContext;

    public SimpleEventProcessor()
    {
        this.map = new Dictionary&lt;string, string&gt;();
    }

    public Task OpenAsync(PartitionContext context)
    {
        this.partitionContext = context;

        return Task.FromResult&lt;object&gt;(null);
    }

    public async Task ProcessEventsAsync(PartitionContext context, IEnumerable&lt;EventData&gt; messages)
    {
        foreach (EventData message in messages)
        {
            Process messages here
        }

        // Checkpoint when appropriate
        await context.CheckpointAsync();

    }


    public async Task CloseAsync(PartitionContext context, CloseReason reason)
    {
        if (reason == CloseReason.Shutdown)
        {
            await context.CheckpointAsync();
        }
    }
}</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="5944e046-c55f-4936-b5ec-240f5d8c2bb8"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="5944e046-c55f-4936-b5ec-240f5d8c2bb8">
        <segment
          trans_unit_id="123">
          <SegmentId>d71e86cd-c16c-48d3-a3c4-ca06b1753670</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="123"
            trans_unit_id="123-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="ba7e6664-b5b5-4fc2-9ee6-06fddd06849c"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="ba7e6664-b5b5-4fc2-9ee6-06fddd06849c">
        <Lines>
          <MarkdownLine>
            <LineId>2dde144c-4646-4f49-b649-41681172b524</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="124">
                <SegmentId>40337fc2-f062-44b5-a24b-996c0afae032</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="124"
                  trans_unit_id="124-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="124">
            <SegmentId>40337fc2-f062-44b5-a24b-996c0afae032</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="124"
              trans_unit_id="124-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="2f6c17e2-24be-4405-99bd-2df4545650e2"
        item_type="List"
        item_footer=""
        trans_unit_id="2f6c17e2-24be-4405-99bd-2df4545650e2">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="d77e28b5-4fde-4795-aa17-f58e72ce9a6c"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="d77e28b5-4fde-4795-aa17-f58e72ce9a6c">
              <Lines>
                <MarkdownLine>
                  <LineId>532afa8b-f59e-42bb-aaf5-cc121c1dae7a</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="125">
                      <SegmentId>2ff1f49c-72b4-46e2-8b08-6d8a428e22ab</SegmentId>
                      <LinkItem
                        internal_item_id="1"
                        internal_item_parent_id="125"
                        trans_unit_id="125-1"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Event Hubs programming guide</internal_link_text>
                        <internal_link_url>event-hubs-programming-guide.md</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="125">
                  <SegmentId>2ff1f49c-72b4-46e2-8b08-6d8a428e22ab</SegmentId>
                  <LinkItem
                    internal_item_id="1"
                    internal_item_parent_id="125"
                    trans_unit_id="125-1"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Event Hubs programming guide</internal_link_text>
                    <internal_link_url>event-hubs-programming-guide.md</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>-</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="c66097b2-4e32-4c4f-95c0-f840e61c8aef"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="c66097b2-4e32-4c4f-95c0-f840e61c8aef">
              <Lines>
                <MarkdownLine>
                  <LineId>c7c0df6d-ddb2-436a-ba91-ac9b6746a4e4</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="126">
                      <SegmentId>a23baf89-8959-4331-a953-cef005206827</SegmentId>
                      <LinkItem
                        internal_item_id="1"
                        internal_item_parent_id="126"
                        trans_unit_id="126-1"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Event Hubs overview</internal_link_text>
                        <internal_link_url>event-hubs-overview.md</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="126">
                  <SegmentId>a23baf89-8959-4331-a953-cef005206827</SegmentId>
                  <LinkItem
                    internal_item_id="1"
                    internal_item_parent_id="126"
                    trans_unit_id="126-1"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Event Hubs overview</internal_link_text>
                    <internal_link_url>event-hubs-overview.md</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>-</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="5879b161-2a4a-4a06-8601-be8fc151fe9a"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="5879b161-2a4a-4a06-8601-be8fc151fe9a">
              <Lines>
                <MarkdownLine>
                  <LineId>8f3e18e1-8eef-4a1a-bfc8-8925d9df8d30</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="127">
                      <SegmentId>20e37917-b1ea-4f02-b47a-086573a5e768</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="127"
                        trans_unit_id="127-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="127">
                  <SegmentId>20e37917-b1ea-4f02-b47a-086573a5e768</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="127"
                    trans_unit_id="127-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>-</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="03714249-717b-49d8-ab15-ff17689b6fd5"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="03714249-717b-49d8-ab15-ff17689b6fd5">
        <Lines>
          <MarkdownLine>
            <LineId>f9ffbd3d-5d6e-4c05-ad8d-54b22fdd8716</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="128">
                <SegmentId>18ce5275-99af-4da0-89e2-7668a5056144</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="128"
                  trans_unit_id="128-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="128">
            <SegmentId>18ce5275-99af-4da0-89e2-7668a5056144</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="128"
              trans_unit_id="128-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="0d3f1f7a-10a7-4ea8-a0da-51aa40cecd50"
        item_type="List"
        item_footer="&#xA;&#xA;"
        trans_unit_id="0d3f1f7a-10a7-4ea8-a0da-51aa40cecd50">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="48f3c1a6-8b10-46e8-a434-27a62587962d"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="48f3c1a6-8b10-46e8-a434-27a62587962d">
              <Lines>
                <MarkdownLine>
                  <LineId>6e3e7b3d-2d01-408b-860f-3533d7a5328c</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="129">
                      <SegmentId>12078cfc-298f-40fe-8074-e1a588a71ea4</SegmentId>
                      <LinkItem
                        internal_item_id="1"
                        internal_item_parent_id="129"
                        trans_unit_id="129-1"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Service Bus and Event Hubs .NET API reference</internal_link_text>
                        <internal_link_url>https://msdn.microsoft.com/library/jj933424.aspx</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="129">
                  <SegmentId>12078cfc-298f-40fe-8074-e1a588a71ea4</SegmentId>
                  <LinkItem
                    internal_item_id="1"
                    internal_item_parent_id="129"
                    trans_unit_id="129-1"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Service Bus and Event Hubs .NET API reference</internal_link_text>
                    <internal_link_url>https://msdn.microsoft.com/library/jj933424.aspx</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>-</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="ed68681b-0ca9-4119-9f21-1ae94277e959"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="ed68681b-0ca9-4119-9f21-1ae94277e959">
              <Lines>
                <MarkdownLine>
                  <LineId>86dd3892-2af1-45ea-b687-7d9455e40e50</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="130">
                      <SegmentId>2fa4f549-879b-4750-b8b9-bcd0cca63878</SegmentId>
                      <LinkItem
                        internal_item_id="1"
                        internal_item_parent_id="130"
                        trans_unit_id="130-1"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Event processor host API reference</internal_link_text>
                        <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.eventprocessorhost.aspx</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="130">
                  <SegmentId>2fa4f549-879b-4750-b8b9-bcd0cca63878</SegmentId>
                  <LinkItem
                    internal_item_id="1"
                    internal_item_parent_id="130"
                    trans_unit_id="130-1"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Event processor host API reference</internal_link_text>
                    <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.eventprocessorhost.aspx</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>-</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
    </ArrayOfMarkdownBlockBase>
  </block_element>
  <references>
    <ArrayOfMarkdownLinkedReference xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
  </references>
</markdown_skeleton_root>