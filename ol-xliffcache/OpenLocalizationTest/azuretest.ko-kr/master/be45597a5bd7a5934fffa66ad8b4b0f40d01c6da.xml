<markdown_skeleton_root>
  <block_element>
    <ArrayOfMarkdownBlockBase xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownBlockBase
        xsi:type="MarkdownAzureMetadataBlock"
        item_id="404863aa-e917-4a47-80a7-64deb321636f"
        item_type="AzureMetadata"
        item_footer="footer_not_set"
        trans_unit_id="404863aa-e917-4a47-80a7-64deb321636f">
        <LocalizeItemList>
          <MarkdownInternalXmlItem
            internal_item_id="9018aae4-fc97-49b1-8ac3-b9dd67cf1493"
            trans_unit_id="101"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
          <MarkdownInternalXmlItem
            internal_item_id="149ccd3e-71e6-4364-8108-feec21372fc8"
            trans_unit_id="102"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
        </LocalizeItemList>
        <ItemValue>&lt;properties
   pageTitle="9018aae4-fc97-49b1-8ac3-b9dd67cf1493"
   description="149ccd3e-71e6-4364-8108-feec21372fc8"
   services="service-fabric"
   documentationCenter=".net"
   authors="jessebenson"
   manager="timlt"
   editor=""/&gt;

&lt;tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="08/11/2015"
   ms.author="claudioc"/&gt;

</ItemValue>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="b1f6606c-0633-4df0-9feb-57017576c884"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="b1f6606c-0633-4df0-9feb-57017576c884">
        <segment
          trans_unit_id="103">
          <SegmentId>0e8a1fd3-777b-40ca-a52a-5465271c68a4</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="103"
            trans_unit_id="103-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>1</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="27ce5c6f-43cf-43bd-bde0-c61cba53477a"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="27ce5c6f-43cf-43bd-bde0-c61cba53477a">
        <Lines>
          <MarkdownLine>
            <LineId>adfd53a8-dca7-46db-a601-2643bacfedfd</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="104">
                <SegmentId>8caa505f-b7ff-47a4-aa1d-b7057fe7bb01</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="104"
                  trans_unit_id="104-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="104">
            <SegmentId>8caa505f-b7ff-47a4-aa1d-b7057fe7bb01</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="104"
              trans_unit_id="104-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="3ea9a854-cdb8-42b7-8386-9aae74d7986a"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="3ea9a854-cdb8-42b7-8386-9aae74d7986a">
        <Lines>
          <MarkdownLine>
            <LineId>c35cb5b4-cd41-41e4-813d-c5539b4afb32</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="105">
                <SegmentId>d2008e38-e61a-4b16-94ce-c518959fe09a</SegmentId>
                <ImageItem
                  internal_item_id="1"
                  internal_item_parent_id="105"
                  trans_unit_id="105-1"
                  internal_item_type="Image">
                  <internal_items />
                  <internal_Image_type>Reference</internal_Image_type>
                  <internal_link_text />
                  <internal_link_id>1</internal_link_id>
                </ImageItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="105">
            <SegmentId>d2008e38-e61a-4b16-94ce-c518959fe09a</SegmentId>
            <ImageItem
              internal_item_id="1"
              internal_item_parent_id="105"
              trans_unit_id="105-1"
              internal_item_type="Image">
              <internal_items />
              <internal_Image_type>Reference</internal_Image_type>
              <internal_link_text />
              <internal_link_id>1</internal_link_id>
            </ImageItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="b11cc950-1d3a-450a-87a2-c08e5343300d"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="b11cc950-1d3a-450a-87a2-c08e5343300d">
        <Lines>
          <MarkdownLine>
            <LineId>fa5af1f0-1c3f-4004-a95d-fb5e30ecee90</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="106">
                <SegmentId>c404ad6a-e7e1-43ce-91fa-54d001701193</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="106"
                  trans_unit_id="106-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="107">
                <SegmentId>168ae6db-badc-45ac-98da-26b3478a26d1</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="107"
                  trans_unit_id="107-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>512fa6d3-977e-4988-8a75-88b9817db9e1</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="108">
                <SegmentId>441d7429-63bd-43b9-89bf-134981c13dcb</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="108"
                  trans_unit_id="108-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="109">
                <SegmentId>423ce831-5c10-45e5-a1e6-145aae74c0d8</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="109"
                  trans_unit_id="109-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="106">
            <SegmentId>c404ad6a-e7e1-43ce-91fa-54d001701193</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="106"
              trans_unit_id="106-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="107">
            <SegmentId>168ae6db-badc-45ac-98da-26b3478a26d1</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="107"
              trans_unit_id="107-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="108">
            <SegmentId>441d7429-63bd-43b9-89bf-134981c13dcb</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="108"
              trans_unit_id="108-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="109">
            <SegmentId>423ce831-5c10-45e5-a1e6-145aae74c0d8</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="109"
              trans_unit_id="109-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="f8f038b9-a963-444a-9ab0-3dfae5ceaa67"
        item_type="NormalParagraph"
        item_footer="&#xA;"
        trans_unit_id="f8f038b9-a963-444a-9ab0-3dfae5ceaa67">
        <Lines>
          <MarkdownLine>
            <LineId>32213ea0-4969-4296-86bf-2a7a87047536</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="110">
                <SegmentId>3a9cf062-8d5e-48e9-aa83-a3d3bb9625cd</SegmentId>
                <ImageItem
                  internal_item_id="1"
                  internal_item_parent_id="110"
                  trans_unit_id="110-1"
                  internal_item_type="Image">
                  <internal_items />
                  <internal_Image_type>Reference</internal_Image_type>
                  <internal_link_text />
                  <internal_link_id>2</internal_link_id>
                </ImageItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="110">
            <SegmentId>3a9cf062-8d5e-48e9-aa83-a3d3bb9625cd</SegmentId>
            <ImageItem
              internal_item_id="1"
              internal_item_parent_id="110"
              trans_unit_id="110-1"
              internal_item_type="Image">
              <internal_items />
              <internal_Image_type>Reference</internal_Image_type>
              <internal_link_text />
              <internal_link_id>2</internal_link_id>
            </ImageItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="9579c4b3-419d-4564-b3e3-7be6f38f3c92"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="9579c4b3-419d-4564-b3e3-7be6f38f3c92">
        <segment
          trans_unit_id="111">
          <SegmentId>e2ec926b-3173-4310-aa04-27ab14c8cc7c</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="111"
            trans_unit_id="111-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="126409f7-2295-49a6-8aa2-4bcdf2817311"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="126409f7-2295-49a6-8aa2-4bcdf2817311">
        <Lines>
          <MarkdownLine>
            <LineId>aaf5c367-db4d-45a1-90d8-2e322de95505</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="112">
                <SegmentId>c14886e8-8280-4c5a-b7d1-92f6dd174c29</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="112"
                  trans_unit_id="112-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="112">
            <SegmentId>c14886e8-8280-4c5a-b7d1-92f6dd174c29</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="112"
              trans_unit_id="112-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="e1f1ad52-5e07-4cc6-afb9-821de0ce367c"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="e1f1ad52-5e07-4cc6-afb9-821de0ce367c">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface ISocialPerson : IActor
{
    Task AddFriend(long person);
    Task RemoveFriend(long person);
    Task&lt;List&lt;SocialStatus&gt;&gt; GetFriendsFeed();
    Task&lt;SocialStatus&gt; GetStatus();
    Task&lt;List&lt;SocialStatus&gt;&gt; GetMyFeed();
    Task UpdateStatus(string status);
    Task UpdateFriendFeedAsync(SocialStatus status);
}

[DataContract]
Public class SocialPersonState
{
    [DataMember]
    public string _name; // my name
    [DataMember]
    public List&lt;long&gt; _friends; // list of my friends' IDs
    [DataMember]
    public List&lt;SocialStatus&gt; _friendsFeed; // my friends feeds
    [DataMember]
    public List&lt;SocialStatus&gt; _myFeed; // this is my feed, all my status updates
    [DataMember]
    public SocialStatus _lastStatus; // this is my last update
}

public class SocialPerson : Actor, ISocialPerson
{
    public override Task ActivateAsync()
    {
        CreateOrRestoreState();
        return base.ActivateAsync();
    }

    public Task AddFriend(long person)
    {
        State._friends.Add(person);
        return TaskDone.Done;
    }

    public Task RemoveFriend(long person)
    {
        State._friends.Remove(person);
        return TaskDone.Done;
    }

    public Task&lt;List&lt;SocialStatus&gt;&gt; GetFriendsFeed()
    {
        return Task.FromResult(State._friendsFeed);
    }

    public Task UpdateStatus(string status)
    {
        State._lastStatus = new SocialStatus()
        {
            Name = _name,
            Status = status,
            Timestamp = DateTime.UtcNow
        };
        State._myFeed.Add(_lastStatus);

        var taskList = new List&lt;Task&gt;();

        foreach(var friendId in _friends)
        {
            var friend = ActorProxy.Create&lt;ISocialPerson&gt;(friendId);
            taskList.Add(friend.UpdateFriendFeedAsync(_lastStatus));
        }

        return Task.WhenAll(taskList);
    }

    public Task UpdateFriendFeed(SocialStatus status)
    {
        State._friendsFeed.Add(status);

        return TaskDone.Done;
    }

    public Task&lt;SocialStatus&gt; GetStatus()
    {
        return Task.FromResult(State._lastStatus);
    }

    public Task&lt;List&lt;SocialStatus&gt;&gt; GetMyFeed()
    {
        return Task.FromResult(State._myFeed);
    }
}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="7f64f001-8c5c-4a7a-9c6a-1b58f94a70e3"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="7f64f001-8c5c-4a7a-9c6a-1b58f94a70e3">
        <Lines>
          <MarkdownLine>
            <LineId>f777d2f0-4fac-4c64-bf79-09c6ba64e98e</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="113">
                <SegmentId>ebbf3088-7670-4631-be94-356dc092828f</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="113"
                  trans_unit_id="113-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="114">
                <SegmentId>19bc2e7a-8ce5-44f4-8fa1-47a19aff7502</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="114"
                  trans_unit_id="114-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="115">
                <SegmentId>e3d1698e-ff53-4ccb-9b97-1f44ff7ab30b</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="115"
                  trans_unit_id="115-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>302d10cc-884d-421f-99c1-3b9454ceec3e</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="116">
                <SegmentId>4def86d4-231e-4c06-af3e-dd2ce9a541eb</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="116"
                  trans_unit_id="116-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="117">
                <SegmentId>bd2132de-7e23-4b3a-8ded-9aca718759d3</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="117"
                  trans_unit_id="117-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>6bd17e2e-c86f-4881-a58b-c6cbb1ca0d21</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="118">
                <SegmentId>411072a5-8fe7-4ce1-81dc-537458189f98</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="118"
                  trans_unit_id="118-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="119">
                <SegmentId>c30889e1-705b-453a-9290-91cc7e083d73</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="119"
                  trans_unit_id="119-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>a9f89b4e-d1c1-49c0-8471-9c893270769f</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="120">
                <SegmentId>f6fd00db-88b9-4927-9359-0786436d5f0f</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="120"
                  trans_unit_id="120-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="113">
            <SegmentId>ebbf3088-7670-4631-be94-356dc092828f</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="113"
              trans_unit_id="113-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="114">
            <SegmentId>19bc2e7a-8ce5-44f4-8fa1-47a19aff7502</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="114"
              trans_unit_id="114-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="115">
            <SegmentId>e3d1698e-ff53-4ccb-9b97-1f44ff7ab30b</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="115"
              trans_unit_id="115-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="116">
            <SegmentId>4def86d4-231e-4c06-af3e-dd2ce9a541eb</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="116"
              trans_unit_id="116-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="117">
            <SegmentId>bd2132de-7e23-4b3a-8ded-9aca718759d3</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="117"
              trans_unit_id="117-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="118">
            <SegmentId>411072a5-8fe7-4ce1-81dc-537458189f98</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="118"
              trans_unit_id="118-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="119">
            <SegmentId>c30889e1-705b-453a-9290-91cc7e083d73</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="119"
              trans_unit_id="119-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="120">
            <SegmentId>f6fd00db-88b9-4927-9359-0786436d5f0f</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="120"
              trans_unit_id="120-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="36bc22b8-fc86-43e3-bc78-a49d225399cd"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="36bc22b8-fc86-43e3-bc78-a49d225399cd">
        <segment
          trans_unit_id="121">
          <SegmentId>9365fee2-882e-4ee0-9773-184adb052c31</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="121"
            trans_unit_id="121-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="527aebc7-ac7f-417a-85fe-7bfefd3d1cb1"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="527aebc7-ac7f-417a-85fe-7bfefd3d1cb1">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface IGroupChat : IActor
{
    Task PublishMessageAsync(long participantId, string message);
    Task&lt;List&lt;GroupChatMessage&gt;&gt; GetMessagesAsync();
    Task AddParticipantAsync(long participantId);
    Task RemoveParticipantAsync(long partitipantId);
}

[DataContract]
public class GroupChatParticipantState
{
    [DataMember]
    Public long _groupChatId;
    [DataMember]
    public List&lt;GroupChatMessage&gt; _messages;
}

public class GroupChatParticipant : Actor&lt;GroupChatParticipantState&gt;, IGroupParticipant
{
    public Task SendMessageAsync(string message)
    {
        if (State._groupChatId != -1)
        {
            var groupChat = ActorProxy.Create&lt;IGroupChat&gt;(State._groupChatId);
            return groupChat.PublishMessageAsync(this.Id, message);
        }

        return TaskDone.Done;
    }

    ...
}

[DataContract]
public class GroupChatState
{
    [DataMember]
    Public List&lt;long&gt; _participants;
    [DataMember]
    Public List&lt;GroupChatMessage&gt; _messages;
}


public class GroupChat : Actor&lt;GroupChatState&gt;, IGroupChat
{

public Task PublishMessageAsync(long participantId, string message)
{
    var chatMessage = new GroupChatMessage()
    {
        ParticipantId = participantId,
        Message = message,
        Timestamp = DateTime.Now
    };

    State._messages.Add(chatMessage);

    var taskList = new List&lt;Task&gt;();

    foreach(var id in State._participants)
    {
        if (id != participantId)
        {
            var participant = ActorProxy.Create&lt;IGroupParticipant&gt;.Create(id);
            taskList.Add(participant.ReceiveMessageAsync(chatMessage));
        }
    }
    return Task.WhenAll(taskList);
}

...

}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="3f850da0-924e-4591-86c2-8580046ca699"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="3f850da0-924e-4591-86c2-8580046ca699">
        <Lines>
          <MarkdownLine>
            <LineId>a23c4cf5-dadd-42f9-ada1-4ff037188f1a</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="122">
                <SegmentId>9808e3a4-6be4-4f91-a253-30235b4f9089</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="122"
                  trans_unit_id="122-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="122">
            <SegmentId>9808e3a4-6be4-4f91-a253-30235b4f9089</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="122"
              trans_unit_id="122-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="00fd0832-f2be-4ed7-90c5-f84a0be508d9"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="00fd0832-f2be-4ed7-90c5-f84a0be508d9">
        <segment
          trans_unit_id="123">
          <SegmentId>897d9a6d-9f15-4e97-bd93-ccbc45315b46</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="123"
            trans_unit_id="123-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="97958f0f-e7fa-40d8-8262-20ecc3b27b8d"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="97958f0f-e7fa-40d8-8262-20ecc3b27b8d">
        <Lines>
          <MarkdownLine>
            <LineId>c1c7fef6-9798-4b8b-a5ae-1e1353184a8b</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="124">
                <SegmentId>0bd921bb-e460-4e3e-b052-efc43d1a7e82</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="124"
                  trans_unit_id="124-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Smart Cache</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="124">
            <SegmentId>0bd921bb-e460-4e3e-b052-efc43d1a7e82</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="124"
              trans_unit_id="124-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Smart Cache</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="39202357-d441-4a7d-a298-32f9b7fc8048"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="39202357-d441-4a7d-a298-32f9b7fc8048">
        <Lines>
          <MarkdownLine>
            <LineId>ff24dee4-819b-46e8-86b7-8cc90da189f6</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="125">
                <SegmentId>c440f3ed-1972-4de9-8739-7fd8ed9d445d</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="125"
                  trans_unit_id="125-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Resource Governance</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="125">
            <SegmentId>c440f3ed-1972-4de9-8739-7fd8ed9d445d</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="125"
              trans_unit_id="125-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Resource Governance</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="e254201d-ea38-4a27-995c-2c50f82b5a5d"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="e254201d-ea38-4a27-995c-2c50f82b5a5d">
        <Lines>
          <MarkdownLine>
            <LineId>e39a7b47-dd0b-431b-9834-913f1fd75838</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="126">
                <SegmentId>e5b3c256-4e7f-46bd-8564-52896393b401</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="126"
                  trans_unit_id="126-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="126">
            <SegmentId>e5b3c256-4e7f-46bd-8564-52896393b401</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="126"
              trans_unit_id="126-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="d7ac2825-a687-472d-a67b-71c21d115565"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="d7ac2825-a687-472d-a67b-71c21d115565">
        <Lines>
          <MarkdownLine>
            <LineId>c67ecc54-7e3e-4c7b-aa66-ef4048f4edfe</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="127">
                <SegmentId>8e5ede24-2dea-4d5b-ab96-d5936332fdcf</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="127"
                  trans_unit_id="127-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Internet of Things</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="127">
            <SegmentId>8e5ede24-2dea-4d5b-ab96-d5936332fdcf</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="127"
              trans_unit_id="127-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Internet of Things</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="98e1b8de-4df6-485e-9580-ac24eb7c468d"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="98e1b8de-4df6-485e-9580-ac24eb7c468d">
        <Lines>
          <MarkdownLine>
            <LineId>f8a34da5-963d-44c7-a806-624a39f606d5</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="128">
                <SegmentId>6e3eaef3-a3d9-4351-967e-c4b3d466488c</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="128"
                  trans_unit_id="128-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Distributed Computation</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-distributed-computation.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="128">
            <SegmentId>6e3eaef3-a3d9-4351-967e-c4b3d466488c</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="128"
              trans_unit_id="128-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Distributed Computation</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-distributed-computation.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="576215a8-bd99-44ea-b307-e8cde243162b"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="576215a8-bd99-44ea-b307-e8cde243162b">
        <Lines>
          <MarkdownLine>
            <LineId>3eaeb12e-3d7f-43fb-8a77-33bdfac506f8</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="129">
                <SegmentId>d0acbebf-8848-4abb-a772-189880cedb85</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="129"
                  trans_unit_id="129-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Some Anti-patterns</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="129">
            <SegmentId>d0acbebf-8848-4abb-a772-189880cedb85</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="129"
              trans_unit_id="129-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Some Anti-patterns</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="66c08bd2-f349-4141-bf02-e2b5ceece3d3"
        item_type="NormalParagraph"
        item_footer="&#xA;&#xA;"
        trans_unit_id="66c08bd2-f349-4141-bf02-e2b5ceece3d3">
        <Lines>
          <MarkdownLine>
            <LineId>478e3775-fbd3-4eff-8c8b-6b4b321d1f08</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="130">
                <SegmentId>42e6c2b6-8e67-4b2a-a054-3ce84868ed0c</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="130"
                  trans_unit_id="130-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="130">
            <SegmentId>42e6c2b6-8e67-4b2a-a054-3ce84868ed0c</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="130"
              trans_unit_id="130-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
    </ArrayOfMarkdownBlockBase>
  </block_element>
  <references>
    <ArrayOfMarkdownLinkedReference xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownLinkedReference
        item_id="d906296d-1811-456d-9b5e-87218ef814e8"
        item_type="LinkedReference"
        item_footer="footer_not_set"
        trans_unit_id="d906296d-1811-456d-9b5e-87218ef814e8">
        <link_id>1</link_id>
        <link_uri>./media/service-fabric-reliable-actors-pattern-distributed-networks-and-graphs/distributedNetworks_arch1.png</link_uri>
        <link_title />
      </MarkdownLinkedReference>
      <MarkdownLinkedReference
        item_id="36787b95-8dd1-4034-a876-0eae869cc936"
        item_type="LinkedReference"
        item_footer="footer_not_set"
        trans_unit_id="36787b95-8dd1-4034-a876-0eae869cc936">
        <link_id>2</link_id>
        <link_uri>./media/service-fabric-reliable-actors-pattern-distributed-networks-and-graphs/distributedNetworks_arch2.png</link_uri>
        <link_title />
      </MarkdownLinkedReference>
    </ArrayOfMarkdownLinkedReference>
  </references>
</markdown_skeleton_root>