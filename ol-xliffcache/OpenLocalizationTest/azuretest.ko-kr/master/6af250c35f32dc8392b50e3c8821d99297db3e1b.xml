{
  "nodes": [
    {
      "content": "Customize Swashbuckle-generated API definitions",
      "pos": [
        29,
        76
      ]
    },
    {
      "content": "Learn how to customize Swagger API definitions that are generated by Swashbuckle for an API app in Azure App Service.",
      "pos": [
        96,
        213
      ]
    },
    {
      "content": "Customize Swashbuckle-generated API definitions",
      "pos": [
        544,
        591
      ]
    },
    {
      "content": "Overview",
      "pos": [
        597,
        605
      ]
    },
    {
      "content": "This article explains how to customize Swashbuckle to handle common scenarios where you may want to alter the default behavior:",
      "pos": [
        607,
        734
      ]
    },
    {
      "content": "Swashbuckle generates duplicate operation identifiers for overloads of controller methods",
      "pos": [
        738,
        827
      ]
    },
    {
      "content": "Swashbuckle assumes that the only valid response from a method is HTTP 200 (OK)",
      "pos": [
        830,
        909
      ]
    },
    {
      "content": "Customize operation identifier generation",
      "pos": [
        916,
        957
      ]
    },
    {
      "content": "Swashbuckle generates Swagger operation identifiers by concatenating controller name and method name.",
      "pos": [
        959,
        1060
      ]
    },
    {
      "content": "This pattern creates a problem when you have multiple overloads of a method: Swashbuckle generates duplicate operation ids, which is invalid Swagger JSON.",
      "pos": [
        1061,
        1215
      ]
    },
    {
      "content": "For example, the following controller code causes Swashbuckle to generate three Contact_Get operation ids.",
      "pos": [
        1217,
        1323
      ]
    },
    {
      "content": "You can solve the problem manually by giving the methods unique names, such as the following for this example:",
      "pos": [
        1489,
        1599
      ]
    },
    {
      "content": "Get",
      "pos": [
        1603,
        1606
      ]
    },
    {
      "content": "GetById",
      "pos": [
        1609,
        1616
      ]
    },
    {
      "content": "GetPage",
      "pos": [
        1619,
        1626
      ]
    },
    {
      "content": "The alternative is to extend Swashbuckle to make it automatically generate unique operation ids.",
      "pos": [
        1628,
        1724
      ]
    },
    {
      "content": "The following steps show how to customize Swashbuckle by using the <bpt id=\"p1\">*</bpt>SwaggerConfig.cs<ept id=\"p1\">*</ept> file that is included in the project by the Visual Studio API Apps Preview project template.",
      "pos": [
        1726,
        1904
      ]
    },
    {
      "content": "You can also customize Swashbuckle in a Web API project that you configure for deployment as an API app.",
      "pos": [
        1906,
        2010
      ]
    },
    {
      "pos": [
        2015,
        2064
      ],
      "content": "Create a custom <ph id=\"ph1\">`IOperationFilter`</ph> implementation"
    },
    {
      "content": "The <ph id=\"ph1\">`IOperationFilter`</ph> interface provides an extensibility point for Swashbuckle users who want to customize various aspects of the Swagger metadata process.",
      "pos": [
        2071,
        2228
      ]
    },
    {
      "content": "The following code demonstrates one method of changing the operation-id-generation behavior.",
      "pos": [
        2229,
        2321
      ]
    },
    {
      "content": "The code appends parameter names to the operation id name.",
      "pos": [
        2322,
        2380
      ]
    },
    {
      "pos": [
        2392,
        2461
      ],
      "content": "using Swashbuckle.Swagger;\n     using System.Web.Http.Description;",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "using Swashbuckle.Swagger;",
          "pos": [
            0,
            26
          ]
        },
        {
          "content": "using System.Web.Http.Description;",
          "pos": [
            32,
            66
          ]
        }
      ]
    },
    {
      "pos": [
        2479,
        3201
      ],
      "content": "namespace ContactsList\n     {\n         public class MultipleOperationsWithSameVerbFilter : IOperationFilter\n         {\n             public void Apply(\n                 Operation operation,\n                 SchemaRegistry schemaRegistry,\n                 ApiDescription apiDescription)\n             {\n                 if (operation.parameters != null)\n                 {\n                     operation.operationId += \"By\";\n                     foreach (var parm in operation.parameters)\n                     {\n                         operation.operationId += string.Format(\"{0}\",parm.name);\n                     }\n                 }\n             }\n         }\n     }",
      "leadings": [
        "",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "namespace ContactsList",
          "pos": [
            0,
            22
          ]
        },
        {
          "content": "{",
          "pos": [
            28,
            29
          ]
        },
        {
          "content": "public class MultipleOperationsWithSameVerbFilter : IOperationFilter",
          "pos": [
            39,
            107
          ]
        },
        {
          "content": "{",
          "pos": [
            117,
            118
          ]
        },
        {
          "content": "public void Apply(",
          "pos": [
            132,
            150
          ]
        },
        {
          "content": "Operation operation,",
          "pos": [
            168,
            188
          ]
        },
        {
          "content": "SchemaRegistry schemaRegistry,",
          "pos": [
            206,
            236
          ]
        },
        {
          "content": "ApiDescription apiDescription)",
          "pos": [
            254,
            284
          ]
        },
        {
          "content": "{",
          "pos": [
            298,
            299
          ]
        },
        {
          "content": "if (operation.parameters != null)",
          "pos": [
            317,
            350
          ]
        },
        {
          "content": "{",
          "pos": [
            368,
            369
          ]
        },
        {
          "content": "operation.operationId += \"By\";",
          "pos": [
            391,
            421
          ]
        },
        {
          "content": "foreach (var parm in operation.parameters)",
          "pos": [
            443,
            485
          ]
        },
        {
          "content": "{",
          "pos": [
            507,
            508
          ]
        },
        {
          "content": "operation.operationId += string.Format(\"{0}\",parm.name);",
          "pos": [
            534,
            590
          ]
        },
        {
          "content": "}",
          "pos": [
            612,
            613
          ]
        },
        {
          "content": "}",
          "pos": [
            631,
            632
          ]
        },
        {
          "content": "}",
          "pos": [
            646,
            647
          ]
        },
        {
          "content": "}",
          "pos": [
            657,
            658
          ]
        },
        {
          "content": "}",
          "pos": [
            664,
            665
          ]
        }
      ]
    },
    {
      "pos": [
        3206,
        3348
      ],
      "content": "In <bpt id=\"p1\">*</bpt>App_Start\\SwaggerConfig.cs<ept id=\"p1\">*</ept> file, call the <ph id=\"ph1\">`OperationFilter`</ph> method to cause Swashbuckle to use the new <ph id=\"ph2\">`IOperationFilter`</ph> implementation."
    },
    {
      "content": "c.OperationFilter",
      "pos": [
        3358,
        3375
      ]
    },
    {
      "content": "();",
      "pos": [
        3413,
        3416
      ]
    },
    {
      "content": "The <bpt id=\"p1\">*</bpt>SwaggerConfig.cs<ept id=\"p1\">*</ept> file that is dropped in by the Swashbuckle NuGet package contains many commented-out examples of extensibility points.",
      "pos": [
        3499,
        3640
      ]
    },
    {
      "content": "The additional comments are not shown here.",
      "pos": [
        3641,
        3684
      ]
    },
    {
      "pos": [
        3691,
        3814
      ],
      "content": "After you make this change, your <ph id=\"ph1\">`IOperationFilter`</ph> implementation is used and causes unique operation ids to be generated."
    },
    {
      "content": "Allow response codes other than 200",
      "pos": [
        3970,
        4005
      ]
    },
    {
      "content": "By default, Swashbuckle assumes that an HTTP 200 (OK) response is the <bpt id=\"p1\">*</bpt>only<ept id=\"p1\">*</ept> legitimate response from a Web API method.",
      "pos": [
        4007,
        4126
      ]
    },
    {
      "content": "In some cases, you may want to return other response codes without causing the client to raise an exception.",
      "pos": [
        4127,
        4235
      ]
    },
    {
      "content": "For example, the following Web API code demonstrates a scenario in which you would want the client to accept either a 200 or a 404 as valid responses.",
      "pos": [
        4237,
        4387
      ]
    },
    {
      "content": "In this scenario, the Swagger that Swashbuckle generates by default specifies only one legitimate HTTP status code, HTTP 200.",
      "pos": [
        4842,
        4967
      ]
    },
    {
      "content": "Since Visual Studio uses the Swagger API definition to generate code for the client, it creates client code that raises an exception for any response other than an HTTP 200.",
      "pos": [
        5053,
        5226
      ]
    },
    {
      "content": "The code below is from a C# client generated for this sample Web API method.",
      "pos": [
        5227,
        5303
      ]
    },
    {
      "content": "Swashbuckle provides two ways of customizing the list of expected HTTP response codes that it generates, using XML comments or the <ph id=\"ph1\">`SwaggerResponse`</ph> attribute.",
      "pos": [
        5657,
        5816
      ]
    },
    {
      "content": "The attribute is easier, but it is only available in Swashbuckle 5.1.5 or later.",
      "pos": [
        5817,
        5897
      ]
    },
    {
      "content": "The API Apps preview new-project template in Visual Studio 2013 includes Swashbuckle version 5.0.0, so if you used the template and don't want to update Swashbuckle, your only option is to use XML comments.",
      "pos": [
        5898,
        6104
      ]
    },
    {
      "content": "Customize expected response codes using XML comments",
      "pos": [
        6111,
        6163
      ]
    },
    {
      "content": "Use this method to specify response codes if your Swashbuckle version is earlier than 5.1.5.",
      "pos": [
        6165,
        6257
      ]
    },
    {
      "content": "First, add XML documentation comments over the methods you wish to specify HTTP response codes for.",
      "pos": [
        6262,
        6361
      ]
    },
    {
      "content": "Taking the sample Web API action shown above and applying the XML documentation to it would result in code like the following example.",
      "pos": [
        6362,
        6496
      ]
    },
    {
      "pos": [
        6507,
        6978
      ],
      "content": "/// <summary>\n     /// Returns the specified contact.\n     /// </summary>\n     /// <param name=\"id\">The ID of the contact.</param>\n     /// <returns>A contact record with an HTTP 200, or null with an HTTP 404.</returns>\n     /// <response code=\"200\">OK</response>\n     /// <response code=\"404\">Not Found</response>\n     [ResponseType(typeof(Contact))]\n     public HttpResponseMessage Get(int id)\n     {\n         var contacts = GetContacts();",
      "leadings": [
        "",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "///",
          "pos": [
            0,
            3
          ]
        },
        {
          "content": "/// Returns the specified contact.",
          "pos": [
            19,
            53
          ]
        },
        {
          "content": "///",
          "pos": [
            59,
            62
          ]
        },
        {
          "content": "///",
          "pos": [
            79,
            82
          ]
        },
        {
          "content": "The ID of the contact.",
          "pos": [
            100,
            122
          ]
        },
        {
          "content": "///",
          "pos": [
            136,
            139
          ]
        },
        {
          "content": "A contact record with an HTTP 200, or null with an HTTP 404.",
          "pos": [
            149,
            209
          ]
        },
        {
          "content": "///",
          "pos": [
            225,
            228
          ]
        },
        {
          "content": "OK",
          "pos": [
            250,
            252
          ]
        },
        {
          "content": "///",
          "pos": [
            269,
            272
          ]
        },
        {
          "content": "Not Found",
          "pos": [
            294,
            303
          ]
        },
        {
          "content": "[ResponseType(typeof(Contact))]",
          "pos": [
            320,
            351
          ]
        },
        {
          "content": "public HttpResponseMessage Get(int id)",
          "pos": [
            357,
            395
          ]
        },
        {
          "content": "{",
          "pos": [
            401,
            402
          ]
        },
        {
          "content": "var contacts = GetContacts();",
          "pos": [
            412,
            441
          ]
        }
      ]
    },
    {
      "content": "var requestedContact = contacts.FirstOrDefault(x =&gt; x.Id == id);",
      "pos": [
        7000,
        7064
      ]
    },
    {
      "pos": [
        7086,
        7363
      ],
      "content": "if (requestedContact == null)\n         {\n             return Request.CreateResponse(HttpStatusCode.NotFound);\n         }\n         else\n         {\n             return Request.CreateResponse<Contact>(HttpStatusCode.OK, requestedContact);\n         }\n     }",
      "leadings": [
        "",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "if (requestedContact == null)",
          "pos": [
            0,
            29
          ]
        },
        {
          "content": "{",
          "pos": [
            39,
            40
          ]
        },
        {
          "content": "return Request.CreateResponse(HttpStatusCode.NotFound);",
          "pos": [
            54,
            109
          ]
        },
        {
          "content": "}",
          "pos": [
            119,
            120
          ]
        },
        {
          "content": "else",
          "pos": [
            130,
            134
          ]
        },
        {
          "content": "{",
          "pos": [
            144,
            145
          ]
        },
        {
          "content": "return Request.CreateResponse",
          "pos": [
            159,
            188
          ]
        },
        {
          "content": "(HttpStatusCode.OK, requestedContact);",
          "pos": [
            197,
            235
          ]
        },
        {
          "content": "}",
          "pos": [
            245,
            246
          ]
        },
        {
          "content": "}",
          "pos": [
            252,
            253
          ]
        }
      ]
    },
    {
      "pos": [
        7368,
        7480
      ],
      "content": "Add instructions in the <bpt id=\"p1\">*</bpt>SwaggerConfig.cs<ept id=\"p1\">*</ept> file to direct Swashbuckle to make use of the XML documentation file."
    },
    {
      "pos": [
        7488,
        7611
      ],
      "content": "Open <bpt id=\"p1\">*</bpt>SwaggerConfig.cs<ept id=\"p1\">*</ept> and create a method on the <bpt id=\"p2\">*</bpt>SwaggerConfig<ept id=\"p2\">*</ept> class to specify the path to the documentation XML file."
    },
    {
      "pos": [
        7626,
        7825
      ],
      "content": "private static string GetXmlCommentsPath()\n      {\n          return string.Format(@\"{0}\\XmlComments.xml\", \n              System.AppDomain.CurrentDomain.BaseDirectory);\n      }",
      "leadings": [
        "",
        "      ",
        "      ",
        "      ",
        "      "
      ],
      "nodes": [
        {
          "content": "private static string GetXmlCommentsPath()",
          "pos": [
            0,
            42
          ]
        },
        {
          "content": "{",
          "pos": [
            49,
            50
          ]
        },
        {
          "content": "return string.Format(@\"{0}\\XmlComments.xml\",",
          "pos": [
            61,
            105
          ]
        },
        {
          "content": "System.AppDomain.CurrentDomain.BaseDirectory);",
          "pos": [
            121,
            167
          ]
        },
        {
          "content": "}",
          "pos": [
            174,
            175
          ]
        }
      ]
    },
    {
      "pos": [
        7833,
        7954
      ],
      "content": "Scroll down in the <bpt id=\"p1\">*</bpt>SwaggerConfig.cs<ept id=\"p1\">*</ept> file until you see the commented-out line of code resembling the screen shot below."
    },
    {
      "content": "Uncomment the line to enable the XML comments processing during Swagger generation.",
      "pos": [
        8065,
        8148
      ]
    },
    {
      "content": "In order to generate the XML documentation file, go into the project's properties and enable the XML documentation file as shown in the screenshot below.",
      "pos": [
        8258,
        8411
      ]
    },
    {
      "content": "Once you perform these steps, the Swagger JSON generated by Swashbuckle will reflect the HTTP response codes that you specified in the XML comments.",
      "pos": [
        8512,
        8660
      ]
    },
    {
      "content": "The screenshot below demonstrates this new JSON payload.",
      "pos": [
        8661,
        8717
      ]
    },
    {
      "content": "When you use Visual Studio to regenerate the client code for your REST API, the C# code accepts both the HTTP OK and Not Found status codes without raising an exception, allowing your consuming code to make decisions on how to handle the return of a null Contact record.",
      "pos": [
        8810,
        9080
      ]
    },
    {
      "content": "The code for this demonstration can be found in <bpt id=\"p1\">[</bpt>this GitHub repository<ept id=\"p1\">](https://github.com/Azure-Samples/API-Apps-DotNet-Swashbuckle-Customization-MultipleResponseCodes)</ept>.",
      "pos": [
        9527,
        9698
      ]
    },
    {
      "content": "Along with the Web API project marked up with XML documentation comments is a Console Application project that contains a generated client for this API.",
      "pos": [
        9699,
        9851
      ]
    },
    {
      "content": "Customize expected response codes using the SwaggerResponse attribute",
      "pos": [
        9858,
        9927
      ]
    },
    {
      "content": "The <bpt id=\"p1\">[</bpt>SwaggerResponse<ept id=\"p1\">](https://github.com/domaindrivendev/Swashbuckle/blob/master/Swashbuckle.Core/Swagger/Annotations/SwaggerResponseAttribute.cs)</ept> attribute is available in Swashbuckle 5.1.5 and later.",
      "pos": [
        9929,
        10130
      ]
    },
    {
      "content": "In case you have an earlier version in your project, this section starts by explaining how to update the Swashbuckle NuGet package so that you can use this attribute.",
      "pos": [
        10131,
        10297
      ]
    },
    {
      "pos": [
        10302,
        10397
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, right-click your Web API project and click <bpt id=\"p2\">**</bpt>Manage NuGet Packages<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        10492,
        10558
      ],
      "content": "Click the <bpt id=\"p1\">*</bpt>Update<ept id=\"p1\">*</ept> button next to the <bpt id=\"p2\">*</bpt>Swashbuckle<ept id=\"p2\">*</ept> NuGet package."
    },
    {
      "pos": [
        10651,
        10774
      ],
      "content": "Add the <bpt id=\"p1\">*</bpt>SwaggerResponse<ept id=\"p1\">*</ept> attributes to the Web API action methods for which you want to specify valid HTTP response codes."
    },
    {
      "pos": [
        10785,
        11011
      ],
      "content": "[SwaggerResponse(HttpStatusCode.OK)]\n     [SwaggerResponse(HttpStatusCode.NotFound)]\n     [ResponseType(typeof(Contact))]\n     public HttpResponseMessage Get(int id)\n     {\n         var contacts = GetContacts();",
      "leadings": [
        "",
        "   ",
        "   ",
        "   ",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "[SwaggerResponse(HttpStatusCode.OK)]",
          "pos": [
            0,
            36
          ]
        },
        {
          "content": "[SwaggerResponse(HttpStatusCode.NotFound)]",
          "pos": [
            42,
            84
          ]
        },
        {
          "content": "[ResponseType(typeof(Contact))]",
          "pos": [
            90,
            121
          ]
        },
        {
          "content": "public HttpResponseMessage Get(int id)",
          "pos": [
            127,
            165
          ]
        },
        {
          "content": "{",
          "pos": [
            171,
            172
          ]
        },
        {
          "content": "var contacts = GetContacts();",
          "pos": [
            182,
            211
          ]
        }
      ]
    },
    {
      "pos": [
        11025,
        11379
      ],
      "content": "var requestedContact = contacts.FirstOrDefault(x => x.Id == id);\n         if (requestedContact == null)\n         {\n             return Request.CreateResponse(HttpStatusCode.NotFound);\n         }\n         else\n         {\n             return Request.CreateResponse<Contact>(HttpStatusCode.OK, requestedContact);\n         }\n     }",
      "leadings": [
        "",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "var requestedContact = contacts.FirstOrDefault(x =&gt; x.Id == id);",
          "pos": [
            0,
            64
          ]
        },
        {
          "content": "if (requestedContact == null)",
          "pos": [
            74,
            103
          ]
        },
        {
          "content": "{",
          "pos": [
            113,
            114
          ]
        },
        {
          "content": "return Request.CreateResponse(HttpStatusCode.NotFound);",
          "pos": [
            128,
            183
          ]
        },
        {
          "content": "}",
          "pos": [
            193,
            194
          ]
        },
        {
          "content": "else",
          "pos": [
            204,
            208
          ]
        },
        {
          "content": "{",
          "pos": [
            218,
            219
          ]
        },
        {
          "content": "return Request.CreateResponse",
          "pos": [
            233,
            262
          ]
        },
        {
          "content": "(HttpStatusCode.OK, requestedContact);",
          "pos": [
            271,
            309
          ]
        },
        {
          "content": "}",
          "pos": [
            319,
            320
          ]
        },
        {
          "content": "}",
          "pos": [
            326,
            327
          ]
        }
      ]
    },
    {
      "pos": [
        11384,
        11438
      ],
      "content": "Add a <ph id=\"ph1\">`using`</ph> statement for the attribute's namespace:"
    },
    {
      "content": "using Swashbuckle.Swagger.Annotations;",
      "pos": [
        11448,
        11486
      ]
    },
    {
      "pos": [
        11499,
        11624
      ],
      "content": "Browse to the <bpt id=\"p1\">*</bpt>/swagger/docs/v1<ept id=\"p1\">*</ept> URL of your project and the various HTTP response codes will be visible in the Swagger JSON."
    },
    {
      "content": "The code for this demonstration can be found in <bpt id=\"p1\">[</bpt>this GitHub repository<ept id=\"p1\">](https://github.com/Azure-Samples/API-Apps-DotNet-Swashbuckle-Customization-MultipleResponseCodes-With-Attributes)</ept>.",
      "pos": [
        11729,
        11916
      ]
    },
    {
      "content": "Along with the Web API project decorated with the <bpt id=\"p1\">*</bpt>SwaggerResponse<ept id=\"p1\">*</ept> attribute is a Console Application project that contains a generated client for this API.",
      "pos": [
        11917,
        12074
      ]
    },
    {
      "content": "Next steps",
      "pos": [
        12080,
        12090
      ]
    },
    {
      "content": "This article has shown how to customize the way Swashbuckle generates operation ids and valid response codes.",
      "pos": [
        12092,
        12201
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>Swashbuckle on GitHub<ept id=\"p1\">](https://github.com/domaindrivendev/Swashbuckle)</ept>.",
      "pos": [
        12202,
        12300
      ]
    },
    {
      "content": "test",
      "pos": [
        12304,
        12308
      ]
    }
  ],
  "content": "\n<properties \n    pageTitle=\"Customize Swashbuckle-generated API definitions\" \n    description=\"Learn how to customize Swagger API definitions that are generated by Swashbuckle for an API app in Azure App Service.\" \n    services=\"app-service\\api\" \n    documentationCenter=\".net\" \n    authors=\"bradygaster\" \n    manager=\"wpickett\" \n    editor=\"jimbe\"/>\n\n<tags \n    ms.service=\"app-service-api\" \n    ms.workload=\"web\" \n    ms.tgt_pltfrm=\"dotnet\" \n    ms.devlang=\"na\" \n    ms.topic=\"article\" \n    ms.date=\"08/16/2015\" \n    ms.author=\"bradyg\"/>\n\n# Customize Swashbuckle-generated API definitions \n\n## Overview\n\nThis article explains how to customize Swashbuckle to handle common scenarios where you may want to alter the default behavior:\n\n* Swashbuckle generates duplicate operation identifiers for overloads of controller methods\n* Swashbuckle assumes that the only valid response from a method is HTTP 200 (OK) \n \n## Customize operation identifier generation\n\nSwashbuckle generates Swagger operation identifiers by concatenating controller name and method name. This pattern creates a problem when you have multiple overloads of a method: Swashbuckle generates duplicate operation ids, which is invalid Swagger JSON.\n\nFor example, the following controller code causes Swashbuckle to generate three Contact_Get operation ids.\n\n![](./media/app-service-api-dotnet-swashbuckle-customize/multiplegetsincode.png)\n\n![](./media/app-service-api-dotnet-swashbuckle-customize/multiplegetsinjson.png)\n\nYou can solve the problem manually by giving the methods unique names, such as the following for this example:\n\n* Get\n* GetById\n* GetPage\n\nThe alternative is to extend Swashbuckle to make it automatically generate unique operation ids.\n\nThe following steps show how to customize Swashbuckle by using the *SwaggerConfig.cs* file that is included in the project by the Visual Studio API Apps Preview project template.  You can also customize Swashbuckle in a Web API project that you configure for deployment as an API app.\n\n1. Create a custom `IOperationFilter` implementation \n\n    The `IOperationFilter` interface provides an extensibility point for Swashbuckle users who want to customize various aspects of the Swagger metadata process. The following code demonstrates one method of changing the operation-id-generation behavior. The code appends parameter names to the operation id name.  \n\n        using Swashbuckle.Swagger;\n        using System.Web.Http.Description;\n        \n        namespace ContactsList\n        {\n            public class MultipleOperationsWithSameVerbFilter : IOperationFilter\n            {\n                public void Apply(\n                    Operation operation,\n                    SchemaRegistry schemaRegistry,\n                    ApiDescription apiDescription)\n                {\n                    if (operation.parameters != null)\n                    {\n                        operation.operationId += \"By\";\n                        foreach (var parm in operation.parameters)\n                        {\n                            operation.operationId += string.Format(\"{0}\",parm.name);\n                        }\n                    }\n                }\n            }\n        }\n\n2. In *App_Start\\SwaggerConfig.cs* file, call the `OperationFilter` method to cause Swashbuckle to use the new `IOperationFilter` implementation.\n\n        c.OperationFilter<MultipleOperationsWithSameVerbFilter>();\n\n    ![](./media/app-service-api-dotnet-swashbuckle-customize/usefilter.png)\n\n    The *SwaggerConfig.cs* file that is dropped in by the Swashbuckle NuGet package contains many commented-out examples of extensibility points. The additional comments are not shown here. \n\n    After you make this change, your `IOperationFilter` implementation is used and causes unique operation ids to be generated.\n \n    ![](./media/app-service-api-dotnet-swashbuckle-customize/uniqueids.png)\n\n<a id=\"multiple-response-codes\" name=\"multiple-response-codes\"></a>\n    \n## Allow response codes other than 200\n\nBy default, Swashbuckle assumes that an HTTP 200 (OK) response is the *only* legitimate response from a Web API method. In some cases, you may want to return other response codes without causing the client to raise an exception.  For example, the following Web API code demonstrates a scenario in which you would want the client to accept either a 200 or a 404 as valid responses.\n\n    [ResponseType(typeof(Contact))]\n    public HttpResponseMessage Get(int id)\n    {\n        var contacts = GetContacts();\n\n        var requestedContact = contacts.FirstOrDefault(x => x.Id == id);\n\n        if (requestedContact == null)\n        {\n            return Request.CreateResponse(HttpStatusCode.NotFound);\n        }\n        else\n        {\n            return Request.CreateResponse<Contact>(HttpStatusCode.OK, requestedContact);\n        }\n    }\n\nIn this scenario, the Swagger that Swashbuckle generates by default specifies only one legitimate HTTP status code, HTTP 200.\n\n![](./media/app-service-api-dotnet-swashbuckle-customize/http-200-output-only.png)\n\nSince Visual Studio uses the Swagger API definition to generate code for the client, it creates client code that raises an exception for any response other than an HTTP 200. The code below is from a C# client generated for this sample Web API method.\n\n    if (statusCode != HttpStatusCode.OK)\n    {\n        HttpOperationException<object> ex = new HttpOperationException<object>();\n        ex.Request = httpRequest;\n        ex.Response = httpResponse;\n        ex.Body = null;\n        if (shouldTrace)\n        {\n            ServiceClientTracing.Error(invocationId, ex);\n        }\n        throw ex;\n    } \n\nSwashbuckle provides two ways of customizing the list of expected HTTP response codes that it generates, using XML comments or the `SwaggerResponse` attribute. The attribute is easier, but it is only available in Swashbuckle 5.1.5 or later. The API Apps preview new-project template in Visual Studio 2013 includes Swashbuckle version 5.0.0, so if you used the template and don't want to update Swashbuckle, your only option is to use XML comments. \n\n### Customize expected response codes using XML comments\n\nUse this method to specify response codes if your Swashbuckle version is earlier than 5.1.5.\n\n1. First, add XML documentation comments over the methods you wish to specify HTTP response codes for. Taking the sample Web API action shown above and applying the XML documentation to it would result in code like the following example. \n\n        /// <summary>\n        /// Returns the specified contact.\n        /// </summary>\n        /// <param name=\"id\">The ID of the contact.</param>\n        /// <returns>A contact record with an HTTP 200, or null with an HTTP 404.</returns>\n        /// <response code=\"200\">OK</response>\n        /// <response code=\"404\">Not Found</response>\n        [ResponseType(typeof(Contact))]\n        public HttpResponseMessage Get(int id)\n        {\n            var contacts = GetContacts();\n        \n            var requestedContact = contacts.FirstOrDefault(x => x.Id == id);\n        \n            if (requestedContact == null)\n            {\n                return Request.CreateResponse(HttpStatusCode.NotFound);\n            }\n            else\n            {\n                return Request.CreateResponse<Contact>(HttpStatusCode.OK, requestedContact);\n            }\n        }\n\n1. Add instructions in the *SwaggerConfig.cs* file to direct Swashbuckle to make use of the XML documentation file.\n\n    * Open *SwaggerConfig.cs* and create a method on the *SwaggerConfig* class to specify the path to the documentation XML file. \n\n            private static string GetXmlCommentsPath()\n            {\n                return string.Format(@\"{0}\\XmlComments.xml\", \n                    System.AppDomain.CurrentDomain.BaseDirectory);\n            }\n\n    * Scroll down in the *SwaggerConfig.cs* file until you see the commented-out line of code resembling the screen shot below. \n\n        ![](./media/app-service-api-dotnet-swashbuckle-customize/xml-comments-commented-out.png)\n    \n    * Uncomment the line to enable the XML comments processing during Swagger generation. \n    \n        ![](./media/app-service-api-dotnet-swashbuckle-customize/xml-comments-uncommented.png)\n    \n1. In order to generate the XML documentation file, go into the project's properties and enable the XML documentation file as shown in the screenshot below. \n\n    ![](./media/app-service-api-dotnet-swashbuckle-customize/enable-xml-documentation-file.png) \n\nOnce you perform these steps, the Swagger JSON generated by Swashbuckle will reflect the HTTP response codes that you specified in the XML comments. The screenshot below demonstrates this new JSON payload. \n\n![](./media/app-service-api-dotnet-swashbuckle-customize/swagger-multiple-responses.png)\n\nWhen you use Visual Studio to regenerate the client code for your REST API, the C# code accepts both the HTTP OK and Not Found status codes without raising an exception, allowing your consuming code to make decisions on how to handle the return of a null Contact record. \n\n        if (statusCode != HttpStatusCode.OK && statusCode != HttpStatusCode.NotFound)\n        {\n            HttpOperationException<object> ex = new HttpOperationException<object>();\n            ex.Request = httpRequest;\n            ex.Response = httpResponse;\n            ex.Body = null;\n            if (shouldTrace)\n            {\n                ServiceClientTracing.Error(invocationId, ex);\n            }\n                throw ex;\n        }\n\nThe code for this demonstration can be found in [this GitHub repository](https://github.com/Azure-Samples/API-Apps-DotNet-Swashbuckle-Customization-MultipleResponseCodes). Along with the Web API project marked up with XML documentation comments is a Console Application project that contains a generated client for this API. \n\n### Customize expected response codes using the SwaggerResponse attribute\n\nThe [SwaggerResponse](https://github.com/domaindrivendev/Swashbuckle/blob/master/Swashbuckle.Core/Swagger/Annotations/SwaggerResponseAttribute.cs) attribute is available in Swashbuckle 5.1.5 and later. In case you have an earlier version in your project, this section starts by explaining how to update the Swashbuckle NuGet package so that you can use this attribute.\n\n1. In **Solution Explorer**, right-click your Web API project and click **Manage NuGet Packages**. \n\n    ![](./media/app-service-api-dotnet-swashbuckle-customize/manage-nuget-packages.png)\n\n1. Click the *Update* button next to the *Swashbuckle* NuGet package. \n\n    ![](./media/app-service-api-dotnet-swashbuckle-customize/update-nuget-dialog.png)\n\n1. Add the *SwaggerResponse* attributes to the Web API action methods for which you want to specify valid HTTP response codes. \n\n        [SwaggerResponse(HttpStatusCode.OK)]\n        [SwaggerResponse(HttpStatusCode.NotFound)]\n        [ResponseType(typeof(Contact))]\n        public HttpResponseMessage Get(int id)\n        {\n            var contacts = GetContacts();\n\n            var requestedContact = contacts.FirstOrDefault(x => x.Id == id);\n            if (requestedContact == null)\n            {\n                return Request.CreateResponse(HttpStatusCode.NotFound);\n            }\n            else\n            {\n                return Request.CreateResponse<Contact>(HttpStatusCode.OK, requestedContact);\n            }\n        }\n\n2. Add a `using` statement for the attribute's namespace:\n\n        using Swashbuckle.Swagger.Annotations;\n        \n1. Browse to the */swagger/docs/v1* URL of your project and the various HTTP response codes will be visible in the Swagger JSON. \n\n    ![](./media/app-service-api-dotnet-swashbuckle-customize/multiple-responses-post-attributes.png)\n\nThe code for this demonstration can be found in [this GitHub repository](https://github.com/Azure-Samples/API-Apps-DotNet-Swashbuckle-Customization-MultipleResponseCodes-With-Attributes). Along with the Web API project decorated with the *SwaggerResponse* attribute is a Console Application project that contains a generated client for this API. \n\n## Next steps\n\nThis article has shown how to customize the way Swashbuckle generates operation ids and valid response codes. For more information, see [Swashbuckle on GitHub](https://github.com/domaindrivendev/Swashbuckle).\n \n\ntest\n"
}