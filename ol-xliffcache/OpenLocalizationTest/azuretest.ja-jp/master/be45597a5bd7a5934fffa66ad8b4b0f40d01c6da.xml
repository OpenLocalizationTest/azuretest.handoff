<markdown_skeleton_root>
  <block_element>
    <ArrayOfMarkdownBlockBase xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownBlockBase
        xsi:type="MarkdownAzureMetadataBlock"
        item_id="76f2f71b-0949-4297-8166-3e8747510c92"
        item_type="AzureMetadata"
        item_footer="footer_not_set"
        trans_unit_id="76f2f71b-0949-4297-8166-3e8747510c92">
        <LocalizeItemList>
          <MarkdownInternalXmlItem
            internal_item_id="5c9b925f-020f-44f9-b83b-6c8aa55d44c0"
            trans_unit_id="101"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
          <MarkdownInternalXmlItem
            internal_item_id="af86c2ae-1ff3-48e9-92c7-0fa20e066033"
            trans_unit_id="102"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
        </LocalizeItemList>
        <ItemValue>&lt;properties
   pageTitle="5c9b925f-020f-44f9-b83b-6c8aa55d44c0"
   description="af86c2ae-1ff3-48e9-92c7-0fa20e066033"
   services="service-fabric"
   documentationCenter=".net"
   authors="jessebenson"
   manager="timlt"
   editor=""/&gt;

&lt;tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="08/11/2015"
   ms.author="claudioc"/&gt;

</ItemValue>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="d1f6de65-81d5-4a16-b0c7-b37537538453"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="d1f6de65-81d5-4a16-b0c7-b37537538453">
        <segment
          trans_unit_id="103">
          <SegmentId>3e9817f6-8a92-4753-b681-fdeab5eba32c</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="103"
            trans_unit_id="103-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>1</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="c784ccc7-a375-4469-a219-1dfacfaae4de"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="c784ccc7-a375-4469-a219-1dfacfaae4de">
        <Lines>
          <MarkdownLine>
            <LineId>323270ef-2fc0-4342-9173-a568b0fe2169</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="104">
                <SegmentId>1db590a6-3d0e-49d5-8f06-2d9a527d224d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="104"
                  trans_unit_id="104-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="104">
            <SegmentId>1db590a6-3d0e-49d5-8f06-2d9a527d224d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="104"
              trans_unit_id="104-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="975eed4b-4e56-4e2d-b5c8-14d0b8e88095"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="975eed4b-4e56-4e2d-b5c8-14d0b8e88095">
        <Lines>
          <MarkdownLine>
            <LineId>83c5dd84-2640-4103-9895-37143c49ff70</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="105">
                <SegmentId>e6ff8120-4542-4d97-8abb-87baa3a9e5a2</SegmentId>
                <ImageItem
                  internal_item_id="1"
                  internal_item_parent_id="105"
                  trans_unit_id="105-1"
                  internal_item_type="Image">
                  <internal_items />
                  <internal_Image_type>Reference</internal_Image_type>
                  <internal_link_text />
                  <internal_link_id>1</internal_link_id>
                </ImageItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="105">
            <SegmentId>e6ff8120-4542-4d97-8abb-87baa3a9e5a2</SegmentId>
            <ImageItem
              internal_item_id="1"
              internal_item_parent_id="105"
              trans_unit_id="105-1"
              internal_item_type="Image">
              <internal_items />
              <internal_Image_type>Reference</internal_Image_type>
              <internal_link_text />
              <internal_link_id>1</internal_link_id>
            </ImageItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="9fd22c0b-04e3-471b-81a0-06aff1175eb0"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="9fd22c0b-04e3-471b-81a0-06aff1175eb0">
        <Lines>
          <MarkdownLine>
            <LineId>a7af0a3c-d1fa-4cdb-b501-ff695a7d6305</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="106">
                <SegmentId>e23717f1-0c59-4205-b99c-282080106644</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="106"
                  trans_unit_id="106-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="107">
                <SegmentId>333d2e11-a10f-4085-96d9-b525aa5a6bc3</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="107"
                  trans_unit_id="107-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>c756ad0b-6a27-47f4-97b7-7da49682df81</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="108">
                <SegmentId>9755b3dc-aefe-4171-9879-a7e6e18702b6</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="108"
                  trans_unit_id="108-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="109">
                <SegmentId>dd462a45-e913-4c78-b172-7243bf62522a</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="109"
                  trans_unit_id="109-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="106">
            <SegmentId>e23717f1-0c59-4205-b99c-282080106644</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="106"
              trans_unit_id="106-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="107">
            <SegmentId>333d2e11-a10f-4085-96d9-b525aa5a6bc3</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="107"
              trans_unit_id="107-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="108">
            <SegmentId>9755b3dc-aefe-4171-9879-a7e6e18702b6</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="108"
              trans_unit_id="108-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="109">
            <SegmentId>dd462a45-e913-4c78-b172-7243bf62522a</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="109"
              trans_unit_id="109-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="f3ee99aa-9c47-4c7f-b9e1-898e20238bbc"
        item_type="NormalParagraph"
        item_footer="&#xA;"
        trans_unit_id="f3ee99aa-9c47-4c7f-b9e1-898e20238bbc">
        <Lines>
          <MarkdownLine>
            <LineId>8ffadc93-a50a-441b-a60c-5db73681ffc7</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="110">
                <SegmentId>cd963936-2ee1-485d-9da0-65a044a88fb4</SegmentId>
                <ImageItem
                  internal_item_id="1"
                  internal_item_parent_id="110"
                  trans_unit_id="110-1"
                  internal_item_type="Image">
                  <internal_items />
                  <internal_Image_type>Reference</internal_Image_type>
                  <internal_link_text />
                  <internal_link_id>2</internal_link_id>
                </ImageItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="110">
            <SegmentId>cd963936-2ee1-485d-9da0-65a044a88fb4</SegmentId>
            <ImageItem
              internal_item_id="1"
              internal_item_parent_id="110"
              trans_unit_id="110-1"
              internal_item_type="Image">
              <internal_items />
              <internal_Image_type>Reference</internal_Image_type>
              <internal_link_text />
              <internal_link_id>2</internal_link_id>
            </ImageItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="04d2e830-7294-4f26-8a5e-4bbae1181cff"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="04d2e830-7294-4f26-8a5e-4bbae1181cff">
        <segment
          trans_unit_id="111">
          <SegmentId>915f01d7-f6d1-4731-ab98-dee2b888963d</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="111"
            trans_unit_id="111-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="3e2b79af-90a6-4b33-b968-59015b58bd44"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="3e2b79af-90a6-4b33-b968-59015b58bd44">
        <Lines>
          <MarkdownLine>
            <LineId>60c9db38-3384-49be-ac4f-13a30ffd5632</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="112">
                <SegmentId>3730ede9-5f90-4275-b862-d89d9eb21739</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="112"
                  trans_unit_id="112-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="112">
            <SegmentId>3730ede9-5f90-4275-b862-d89d9eb21739</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="112"
              trans_unit_id="112-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="e024b83d-d932-44e1-baa0-ca2b99cbf5cf"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="e024b83d-d932-44e1-baa0-ca2b99cbf5cf">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface ISocialPerson : IActor
{
    Task AddFriend(long person);
    Task RemoveFriend(long person);
    Task&lt;List&lt;SocialStatus&gt;&gt; GetFriendsFeed();
    Task&lt;SocialStatus&gt; GetStatus();
    Task&lt;List&lt;SocialStatus&gt;&gt; GetMyFeed();
    Task UpdateStatus(string status);
    Task UpdateFriendFeedAsync(SocialStatus status);
}

[DataContract]
Public class SocialPersonState
{
    [DataMember]
    public string _name; // my name
    [DataMember]
    public List&lt;long&gt; _friends; // list of my friends' IDs
    [DataMember]
    public List&lt;SocialStatus&gt; _friendsFeed; // my friends feeds
    [DataMember]
    public List&lt;SocialStatus&gt; _myFeed; // this is my feed, all my status updates
    [DataMember]
    public SocialStatus _lastStatus; // this is my last update
}

public class SocialPerson : Actor, ISocialPerson
{
    public override Task ActivateAsync()
    {
        CreateOrRestoreState();
        return base.ActivateAsync();
    }

    public Task AddFriend(long person)
    {
        State._friends.Add(person);
        return TaskDone.Done;
    }

    public Task RemoveFriend(long person)
    {
        State._friends.Remove(person);
        return TaskDone.Done;
    }

    public Task&lt;List&lt;SocialStatus&gt;&gt; GetFriendsFeed()
    {
        return Task.FromResult(State._friendsFeed);
    }

    public Task UpdateStatus(string status)
    {
        State._lastStatus = new SocialStatus()
        {
            Name = _name,
            Status = status,
            Timestamp = DateTime.UtcNow
        };
        State._myFeed.Add(_lastStatus);

        var taskList = new List&lt;Task&gt;();

        foreach(var friendId in _friends)
        {
            var friend = ActorProxy.Create&lt;ISocialPerson&gt;(friendId);
            taskList.Add(friend.UpdateFriendFeedAsync(_lastStatus));
        }

        return Task.WhenAll(taskList);
    }

    public Task UpdateFriendFeed(SocialStatus status)
    {
        State._friendsFeed.Add(status);

        return TaskDone.Done;
    }

    public Task&lt;SocialStatus&gt; GetStatus()
    {
        return Task.FromResult(State._lastStatus);
    }

    public Task&lt;List&lt;SocialStatus&gt;&gt; GetMyFeed()
    {
        return Task.FromResult(State._myFeed);
    }
}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="bd27e32d-451e-4046-9442-3c962dfe66be"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="bd27e32d-451e-4046-9442-3c962dfe66be">
        <Lines>
          <MarkdownLine>
            <LineId>e7c01bbe-d92e-4b83-9688-c8e31b404b60</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="113">
                <SegmentId>3f19c031-02cc-42cf-af09-73d800888ba9</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="113"
                  trans_unit_id="113-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="114">
                <SegmentId>b4a9a0bd-afd6-4593-9f01-a731f9447b7d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="114"
                  trans_unit_id="114-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="115">
                <SegmentId>3b57ee6d-5675-4e2b-9975-eea6adfc838d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="115"
                  trans_unit_id="115-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>33d30cb5-211b-4287-a4be-db3f79fd01b1</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="116">
                <SegmentId>86f0c610-3544-4931-bd7b-28fd723da4a3</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="116"
                  trans_unit_id="116-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="117">
                <SegmentId>586dfe09-9943-4a49-8f97-179f9f4d5080</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="117"
                  trans_unit_id="117-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>c52550e6-a609-4bc9-abff-4af36dbcc1db</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="118">
                <SegmentId>e4dc08ba-ec90-4a29-aba8-cf861db2c708</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="118"
                  trans_unit_id="118-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="119">
                <SegmentId>4f795826-386e-4784-99fd-fccad49a4238</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="119"
                  trans_unit_id="119-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>906ae2b9-1b93-4bcd-8ec6-4ce26b6de589</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="120">
                <SegmentId>077c235a-3b9d-41d1-8ac4-1f114e236329</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="120"
                  trans_unit_id="120-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="113">
            <SegmentId>3f19c031-02cc-42cf-af09-73d800888ba9</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="113"
              trans_unit_id="113-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="114">
            <SegmentId>b4a9a0bd-afd6-4593-9f01-a731f9447b7d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="114"
              trans_unit_id="114-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="115">
            <SegmentId>3b57ee6d-5675-4e2b-9975-eea6adfc838d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="115"
              trans_unit_id="115-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="116">
            <SegmentId>86f0c610-3544-4931-bd7b-28fd723da4a3</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="116"
              trans_unit_id="116-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="117">
            <SegmentId>586dfe09-9943-4a49-8f97-179f9f4d5080</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="117"
              trans_unit_id="117-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="118">
            <SegmentId>e4dc08ba-ec90-4a29-aba8-cf861db2c708</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="118"
              trans_unit_id="118-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="119">
            <SegmentId>4f795826-386e-4784-99fd-fccad49a4238</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="119"
              trans_unit_id="119-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="120">
            <SegmentId>077c235a-3b9d-41d1-8ac4-1f114e236329</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="120"
              trans_unit_id="120-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="21d3cbfb-e5ff-4f11-8133-b4cab940bc9f"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="21d3cbfb-e5ff-4f11-8133-b4cab940bc9f">
        <segment
          trans_unit_id="121">
          <SegmentId>c80d5202-90ef-46ce-a32a-b46468d7d3dc</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="121"
            trans_unit_id="121-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="2b165194-5c6b-46db-b3f8-77dd2ccc02f2"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="2b165194-5c6b-46db-b3f8-77dd2ccc02f2">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface IGroupChat : IActor
{
    Task PublishMessageAsync(long participantId, string message);
    Task&lt;List&lt;GroupChatMessage&gt;&gt; GetMessagesAsync();
    Task AddParticipantAsync(long participantId);
    Task RemoveParticipantAsync(long partitipantId);
}

[DataContract]
public class GroupChatParticipantState
{
    [DataMember]
    Public long _groupChatId;
    [DataMember]
    public List&lt;GroupChatMessage&gt; _messages;
}

public class GroupChatParticipant : Actor&lt;GroupChatParticipantState&gt;, IGroupParticipant
{
    public Task SendMessageAsync(string message)
    {
        if (State._groupChatId != -1)
        {
            var groupChat = ActorProxy.Create&lt;IGroupChat&gt;(State._groupChatId);
            return groupChat.PublishMessageAsync(this.Id, message);
        }

        return TaskDone.Done;
    }

    ...
}

[DataContract]
public class GroupChatState
{
    [DataMember]
    Public List&lt;long&gt; _participants;
    [DataMember]
    Public List&lt;GroupChatMessage&gt; _messages;
}


public class GroupChat : Actor&lt;GroupChatState&gt;, IGroupChat
{

public Task PublishMessageAsync(long participantId, string message)
{
    var chatMessage = new GroupChatMessage()
    {
        ParticipantId = participantId,
        Message = message,
        Timestamp = DateTime.Now
    };

    State._messages.Add(chatMessage);

    var taskList = new List&lt;Task&gt;();

    foreach(var id in State._participants)
    {
        if (id != participantId)
        {
            var participant = ActorProxy.Create&lt;IGroupParticipant&gt;.Create(id);
            taskList.Add(participant.ReceiveMessageAsync(chatMessage));
        }
    }
    return Task.WhenAll(taskList);
}

...

}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="2a4ac988-797a-49b1-8511-f0e0fdde9c4c"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="2a4ac988-797a-49b1-8511-f0e0fdde9c4c">
        <Lines>
          <MarkdownLine>
            <LineId>1d038f08-deaf-4644-98ff-0bd2a64dedb1</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="122">
                <SegmentId>f2a8ba25-c579-4f8e-aafa-036d27e3f2e7</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="122"
                  trans_unit_id="122-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="122">
            <SegmentId>f2a8ba25-c579-4f8e-aafa-036d27e3f2e7</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="122"
              trans_unit_id="122-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="3816b020-249d-4f57-8362-345a12cccf6f"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="3816b020-249d-4f57-8362-345a12cccf6f">
        <segment
          trans_unit_id="123">
          <SegmentId>e7d08715-5fbb-451d-b993-f5a8776bdbca</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="123"
            trans_unit_id="123-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="860c77c0-5d70-4b10-be31-8637fe056ab8"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="860c77c0-5d70-4b10-be31-8637fe056ab8">
        <Lines>
          <MarkdownLine>
            <LineId>7f1546be-4b01-4697-a2b3-e288a7936bcd</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="124">
                <SegmentId>0549f3fe-bb23-4e43-b116-f5266f1e1fae</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="124"
                  trans_unit_id="124-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Smart Cache</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="124">
            <SegmentId>0549f3fe-bb23-4e43-b116-f5266f1e1fae</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="124"
              trans_unit_id="124-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Smart Cache</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="dc8ff53a-1fe9-4ec5-b362-94e56dc333f5"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="dc8ff53a-1fe9-4ec5-b362-94e56dc333f5">
        <Lines>
          <MarkdownLine>
            <LineId>8f3cd5f4-070d-4c82-8ef3-ac59440bac58</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="125">
                <SegmentId>d3dd09d3-b53a-4e74-adb5-b50013bf4e4f</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="125"
                  trans_unit_id="125-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Resource Governance</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="125">
            <SegmentId>d3dd09d3-b53a-4e74-adb5-b50013bf4e4f</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="125"
              trans_unit_id="125-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Resource Governance</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="d3e2af7e-caea-49f1-92a0-616b9a333902"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="d3e2af7e-caea-49f1-92a0-616b9a333902">
        <Lines>
          <MarkdownLine>
            <LineId>5072d805-c9d8-4981-bf4f-b4b505657b5d</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="126">
                <SegmentId>80cac39b-2edd-4f83-bac9-e1dae9a79c82</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="126"
                  trans_unit_id="126-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="126">
            <SegmentId>80cac39b-2edd-4f83-bac9-e1dae9a79c82</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="126"
              trans_unit_id="126-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="f4f3596d-8cb6-49c5-ada9-f70ea076fa1f"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="f4f3596d-8cb6-49c5-ada9-f70ea076fa1f">
        <Lines>
          <MarkdownLine>
            <LineId>493fd2cf-f5ba-4844-ac0e-1328cbd4f94f</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="127">
                <SegmentId>7c27d851-3ba3-40e5-968a-5b851d148db0</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="127"
                  trans_unit_id="127-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Internet of Things</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="127">
            <SegmentId>7c27d851-3ba3-40e5-968a-5b851d148db0</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="127"
              trans_unit_id="127-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Internet of Things</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="330bb0da-2798-4166-9a9b-4c0499f60a51"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="330bb0da-2798-4166-9a9b-4c0499f60a51">
        <Lines>
          <MarkdownLine>
            <LineId>1adb2da0-afb6-45da-b025-cb9c35a24fd3</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="128">
                <SegmentId>929877c2-5ebe-4c6e-a506-e2343d6a3984</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="128"
                  trans_unit_id="128-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Distributed Computation</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-distributed-computation.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="128">
            <SegmentId>929877c2-5ebe-4c6e-a506-e2343d6a3984</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="128"
              trans_unit_id="128-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Distributed Computation</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-distributed-computation.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="b697be27-e4c6-4e6c-bb18-6f62d5e4344f"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="b697be27-e4c6-4e6c-bb18-6f62d5e4344f">
        <Lines>
          <MarkdownLine>
            <LineId>d61c6b52-a36d-4a0b-8ec2-a3c45423926a</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="129">
                <SegmentId>2f25e2ea-a219-4b90-85b8-cc4262dd31e1</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="129"
                  trans_unit_id="129-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Some Anti-patterns</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="129">
            <SegmentId>2f25e2ea-a219-4b90-85b8-cc4262dd31e1</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="129"
              trans_unit_id="129-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Some Anti-patterns</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="9a62edca-ad98-4f2d-b7f4-617903cf4283"
        item_type="NormalParagraph"
        item_footer="&#xA;&#xA;"
        trans_unit_id="9a62edca-ad98-4f2d-b7f4-617903cf4283">
        <Lines>
          <MarkdownLine>
            <LineId>c312706d-4d45-4dc5-99f2-501c0083bbf4</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="130">
                <SegmentId>fad5f1db-2d19-4e23-bd58-4ca493965c54</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="130"
                  trans_unit_id="130-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="130">
            <SegmentId>fad5f1db-2d19-4e23-bd58-4ca493965c54</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="130"
              trans_unit_id="130-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
    </ArrayOfMarkdownBlockBase>
  </block_element>
  <references>
    <ArrayOfMarkdownLinkedReference xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownLinkedReference
        item_id="3dc1329f-f53b-48d8-97cf-d9842581bf9f"
        item_type="LinkedReference"
        item_footer="footer_not_set"
        trans_unit_id="3dc1329f-f53b-48d8-97cf-d9842581bf9f">
        <link_id>1</link_id>
        <link_uri>./media/service-fabric-reliable-actors-pattern-distributed-networks-and-graphs/distributedNetworks_arch1.png</link_uri>
        <link_title />
      </MarkdownLinkedReference>
      <MarkdownLinkedReference
        item_id="7416bd86-17bd-4ead-8302-704e5e8cbb26"
        item_type="LinkedReference"
        item_footer="footer_not_set"
        trans_unit_id="7416bd86-17bd-4ead-8302-704e5e8cbb26">
        <link_id>2</link_id>
        <link_uri>./media/service-fabric-reliable-actors-pattern-distributed-networks-and-graphs/distributedNetworks_arch2.png</link_uri>
        <link_title />
      </MarkdownLinkedReference>
    </ArrayOfMarkdownLinkedReference>
  </references>
</markdown_skeleton_root>