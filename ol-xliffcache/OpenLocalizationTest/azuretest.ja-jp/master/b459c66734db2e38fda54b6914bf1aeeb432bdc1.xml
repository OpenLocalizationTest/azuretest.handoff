<markdown_skeleton_root>
  <block_element>
    <ArrayOfMarkdownBlockBase xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownBlockBase
        xsi:type="MarkdownAzureMetadataBlock"
        item_id="1d00bda0-c042-4d8c-be78-6ef7aacd9b0f"
        item_type="AzureMetadata"
        item_footer="footer_not_set"
        trans_unit_id="1d00bda0-c042-4d8c-be78-6ef7aacd9b0f">
        <LocalizeItemList>
          <MarkdownInternalXmlItem
            internal_item_id="2e99822c-eb7e-4fc1-8a5d-de161f8083cb"
            trans_unit_id="101"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
          <MarkdownInternalXmlItem
            internal_item_id="8e6ca71f-2361-4761-ad0f-5d2b53fb454d"
            trans_unit_id="102"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
        </LocalizeItemList>
        <ItemValue>&lt;properties 
   pageTitle="2e99822c-eb7e-4fc1-8a5d-de161f8083cb"
   description="8e6ca71f-2361-4761-ad0f-5d2b53fb454d"
   services="event-hubs"
   documentationCenter="na"
   authors="sethmanheim"
   manager="timlt"
   editor="" /&gt;
&lt;tags 
   ms.service="event-hubs"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="tbd"
   ms.date="07/10/2015"
   ms.author="sethm" /&gt;

</ItemValue>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="b91221fe-bac2-4f7e-b7f9-57af176f2684"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="b91221fe-bac2-4f7e-b7f9-57af176f2684">
        <segment
          trans_unit_id="103">
          <SegmentId>b86bdeb7-65e2-44cd-ac47-6e5cc129d1a6</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="103"
            trans_unit_id="103-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>1</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="9b6c4850-7d61-489b-9316-2cc712cc6af1"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="9b6c4850-7d61-489b-9316-2cc712cc6af1">
        <Lines>
          <MarkdownLine>
            <LineId>b135c5d0-1861-458a-adff-43ab5fa54e9a</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="104">
                <SegmentId>3e540252-3438-4e9f-b717-7a19d4f94c3f</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="104"
                  trans_unit_id="104-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="105">
                <SegmentId>bda93bc5-01e2-4fec-98f4-cfa6e148505c</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="105"
                  trans_unit_id="105-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="106">
                <SegmentId>ed382061-15f4-4dc7-9561-074e83305ed7</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="106"
                  trans_unit_id="106-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="107">
                <SegmentId>51a568ce-2077-4331-acc4-9b9d59f98d1a</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="107"
                  trans_unit_id="107-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="104">
            <SegmentId>3e540252-3438-4e9f-b717-7a19d4f94c3f</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="104"
              trans_unit_id="104-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="105">
            <SegmentId>bda93bc5-01e2-4fec-98f4-cfa6e148505c</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="105"
              trans_unit_id="105-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="106">
            <SegmentId>ed382061-15f4-4dc7-9561-074e83305ed7</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="106"
              trans_unit_id="106-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="107">
            <SegmentId>51a568ce-2077-4331-acc4-9b9d59f98d1a</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="107"
              trans_unit_id="107-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="00a05924-50d6-4805-ac47-8410999c651f"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="00a05924-50d6-4805-ac47-8410999c651f">
        <Lines>
          <MarkdownLine>
            <LineId>a7bd9df0-a2ce-4eec-9790-d90a9a7579ad</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="108">
                <SegmentId>24e2cbad-69c8-421d-86e8-32adb4da23cb</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="108"
                  trans_unit_id="108-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="109">
                <SegmentId>baf59cfd-4978-414b-9a12-2d2eb127da94</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="109"
                  trans_unit_id="109-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="109"
                  trans_unit_id="109-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>.NET Class Library</internal_link_text>
                  <internal_link_url>https://msdn.microsoft.com/library/jj933431.aspx</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="109"
                  trans_unit_id="109-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="4"
                  internal_item_parent_id="109"
                  trans_unit_id="109-4"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>EventProcessorHost API</internal_link_text>
                  <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.aspx</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="5"
                  internal_item_parent_id="109"
                  trans_unit_id="109-5"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="108">
            <SegmentId>24e2cbad-69c8-421d-86e8-32adb4da23cb</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="108"
              trans_unit_id="108-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="109">
            <SegmentId>baf59cfd-4978-414b-9a12-2d2eb127da94</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="109"
              trans_unit_id="109-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="109"
              trans_unit_id="109-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>.NET Class Library</internal_link_text>
              <internal_link_url>https://msdn.microsoft.com/library/jj933431.aspx</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="109"
              trans_unit_id="109-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="4"
              internal_item_parent_id="109"
              trans_unit_id="109-4"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>EventProcessorHost API</internal_link_text>
              <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.aspx</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="5"
              internal_item_parent_id="109"
              trans_unit_id="109-5"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="0b5007f2-9579-436c-b78d-041549ed57db"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="0b5007f2-9579-436c-b78d-041549ed57db">
        <segment
          trans_unit_id="110">
          <SegmentId>ed821918-5762-4468-9279-18b75fadf081</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="110"
            trans_unit_id="110-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="6b8a2b3c-ed59-425e-bfad-30b4e67dfe43"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="6b8a2b3c-ed59-425e-bfad-30b4e67dfe43">
        <Lines>
          <MarkdownLine>
            <LineId>ff366e37-b0be-4e62-a3be-429e8bc4d613</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="111">
                <SegmentId>3a2de9b2-5d96-45a2-a66f-77d72b6e6b29</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="111"
                  trans_unit_id="111-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <MarkdownInternalBoldItem
                  internal_item_id="2"
                  internal_item_parent_id="111"
                  trans_unit_id="111-2"
                  internal_item_type="Bold">
                  <internal_items />
                  <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                </MarkdownInternalBoldItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="111"
                  trans_unit_id="111-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="111">
            <SegmentId>3a2de9b2-5d96-45a2-a66f-77d72b6e6b29</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="111"
              trans_unit_id="111-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <MarkdownInternalBoldItem
              internal_item_id="2"
              internal_item_parent_id="111"
              trans_unit_id="111-2"
              internal_item_type="Bold">
              <internal_items />
              <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
            </MarkdownInternalBoldItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="111"
              trans_unit_id="111-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="7ce67ac6-acba-42ef-99b4-d9194baf23b2"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="7ce67ac6-acba-42ef-99b4-d9194baf23b2">
        <segment
          trans_unit_id="112">
          <SegmentId>e8e12c49-ffb5-4002-adf4-f72f9f4bbec7</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="112"
            trans_unit_id="112-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="d971152c-cfe7-4020-9c30-f9be3c530047"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="d971152c-cfe7-4020-9c30-f9be3c530047">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Create the Event Hub
EventHubDescription ehd = new EventHubDescription(eventHubName);
ehd.PartitionCount = SampleManager.numPartitions;
namespaceManager.CreateEventHubAsync(ehd).Wait();</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="70fbcfc5-5508-4509-ac5b-0e9440bbd6ab"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="70fbcfc5-5508-4509-ac5b-0e9440bbd6ab">
        <segment
          trans_unit_id="113">
          <SegmentId>58ab8397-02d6-4b1a-8ba9-06fe857899df</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="113"
            trans_unit_id="113-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="f6e75068-8f4f-4614-b439-d00bea3c7b8a"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="f6e75068-8f4f-4614-b439-d00bea3c7b8a">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>EventHubDescription ehd = await namespaceManager.GetEventHubAsync(eventHubName);

// Create a customer SAS rule with Manage permissions
ehd.UserMetadata = "Some updated info";
string ruleName = "myeventhubmanagerule";
string ruleKey = SharedAccessAuthorizationRule.GenerateRandomKey();
ehd.Authorization.Add(new SharedAccessAuthorizationRule(ruleName, ruleKey, new AccessRights[] {AccessRights.Manage, AccessRights.Listen, AccessRights.Send} )); 
namespaceManager.UpdateEventHubAsync(ehd).Wait();</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="35820259-3118-4c9f-a3cb-b242c6b7acac"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="35820259-3118-4c9f-a3cb-b242c6b7acac">
        <segment
          trans_unit_id="114">
          <SegmentId>4b560510-bf9b-4625-afb8-a1369b8d318f</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="114"
            trans_unit_id="114-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="f0d8614d-2d27-4744-a1a4-e9ef67aaff96"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="f0d8614d-2d27-4744-a1a4-e9ef67aaff96">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>namespaceManager.DeleteEventHubAsync("event hub name").Wait();</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="4bfed8a0-bcfd-42e3-83a4-573d8fc37975"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="4bfed8a0-bcfd-42e3-83a4-573d8fc37975">
        <segment
          trans_unit_id="115">
          <SegmentId>2e1250ba-07d5-400e-b539-2d2b710803a2</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="115"
            trans_unit_id="115-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="9a2b7d42-ceee-4145-8331-740299f551be"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="9a2b7d42-ceee-4145-8331-740299f551be">
        <segment
          trans_unit_id="116">
          <SegmentId>d1db9958-3f90-4f17-8e5b-c8b5b8420110</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="116"
            trans_unit_id="116-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="31ff5c77-686f-42d0-8c84-deebe0f97280"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="31ff5c77-686f-42d0-8c84-deebe0f97280">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// EventHubClient model (uses implicit factory instance, so all links on same connection)
EventHubClient eventHubClient = EventHubClient.Create("event hub name");</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="9671b5a3-4fa8-4a37-bf17-0df8c7f731d4"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="9671b5a3-4fa8-4a37-bf17-0df8c7f731d4">
        <segment
          trans_unit_id="117">
          <SegmentId>0b73d29f-90bb-424e-a092-64ef95b423bc</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="117"
            trans_unit_id="117-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="918988e9-ba56-44d7-be3e-a245814ff4dd"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="918988e9-ba56-44d7-be3e-a245814ff4dd">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Create the device/temperature metric
MetricEvent info = new MetricEvent() { DeviceId = random.Next(SampleManager.NumDevices), Temperature = random.Next(100) };
EventData data = new EventData(new byte[10]); // Byte array
EventData data = new EventData(Stream); // Stream 
EventData data = new EventData(info, serializer) //Object and serializer 
    {
       PartitionKey = info.DeviceId.ToString()
    };

// Set user properties if needed
data.Properties.Add("Type", "Telemetry_" + DateTime.Now.ToLongTimeString());

// Send single message async
await client.SendAsync(data);</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="14bc4a04-b5ab-4bb4-af49-d5c2f8475a3e"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="14bc4a04-b5ab-4bb4-af49-d5c2f8475a3e">
        <segment
          trans_unit_id="118">
          <SegmentId>73e280b0-6323-45e6-8001-8b84c7787cf8</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="118"
            trans_unit_id="118-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="46681ac1-5e31-47d4-a1fb-41ff9ce4e2c2"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="46681ac1-5e31-47d4-a1fb-41ff9ce4e2c2">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Create the Event Hub client
EventHubClient eventHubClient = EventHubClient.Create(EventHubName);

// Get the default subscriber group
EventHubSubscriberGroup defaultSubscriberGroup = eventHubClient.GetDefaultSubscriberGroup();

// All messages
EventHubReceiver consumer = await defaultConsumerGroup.CreateReceiverAsync(shardId: index);

// From one day ago
EventHubReceiver consumer = await defaultConsumerGroup.CreateReceiverAsync(shardId: index, startingDateTimeUtc:DateTime.Now.AddDays(-1));

// From specific offset, -1 means oldest
EventHubReceiver consumer = await defaultConsumerGroup.CreateReceiverAsync(shardId: index,startingOffset:-1); </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="83870658-2e9a-456c-990a-fb8c20aec0db"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="83870658-2e9a-456c-990a-fb8c20aec0db">
        <segment
          trans_unit_id="119">
          <SegmentId>f9ea44c1-8b16-41cf-8f2a-8a461301e0db</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="119"
            trans_unit_id="119-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="2f31102c-bbb5-4d01-9ff1-f1e292917654"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="2f31102c-bbb5-4d01-9ff1-f1e292917654">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>var message = await consumer.ReceiveAsync();

// Provide a serializer
var info = message.GetBody&lt;Type&gt;(Serializer)

// Get a byte[]
var info = message.GetBytes(); 
msg = UnicodeEncoding.UTF8.GetString(info);</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="0670d25a-b386-4db6-a871-b31ee4dcbee7"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="0670d25a-b386-4db6-a871-b31ee4dcbee7">
        <segment
          trans_unit_id="120">
          <SegmentId>674df7b4-2045-4048-bd8c-b19b2fb526ef</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="120"
            trans_unit_id="120-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="4038d79e-7e0e-4b63-a9dd-5ac60450e6fd"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="4038d79e-7e0e-4b63-a9dd-5ac60450e6fd">
        <Lines>
          <MarkdownLine>
            <LineId>e69f4d7a-7712-4832-b263-41724f1cc413</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="121">
                <SegmentId>eaf288fa-c35e-4117-85f8-55383aac651b</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="121"
                  trans_unit_id="121-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="121">
            <SegmentId>eaf288fa-c35e-4117-85f8-55383aac651b</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="121"
              trans_unit_id="121-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="22bfd016-c351-4ee5-9651-61cba2ee8a99"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="22bfd016-c351-4ee5-9651-61cba2ee8a99">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Checkpointing is done within the SimpleEventProcessor and on a per-consumerGroup per-partition basis, workers resume from where they last left off.
// Use the EventData.Offset value for checkpointing yourself, this value is unique per partition.
string eventHubConnectionString = System.Configuration.ConfigurationManager.AppSettings["Microsoft.ServiceBus.ConnectionString"];
string blobConnectionString = System.Configuration.ConfigurationManager.AppSettings["AzureStorageConnectionString"]; // Required for checkpoint/state

EventHubDescription eventHubDescription = new EventHubDescription(EventHubName);
EventProcessorHost host = new EventProcessorHost(WorkerName, EventHubName, defaultConsumerGroup.GroupName, eventHubConnectionString, blobConnectionString);
            host.RegisterEventProcessorAsync&lt;SimpleEventProcessor&gt;();

// To close
host.UnregisterEventProcessorAsync().Wait();   </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="85cc31ed-be67-4768-9438-ebdc3a9f7673"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="85cc31ed-be67-4768-9438-ebdc3a9f7673">
        <Lines>
          <MarkdownLine>
            <LineId>076d72c3-4727-4c35-9924-b9a0d62f9ba1</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="122">
                <SegmentId>ac3652a1-6836-4c90-9bff-3f6163f6d06b</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="122"
                  trans_unit_id="122-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="122"
                  trans_unit_id="122-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>IEventProcessor</internal_link_text>
                  <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.ieventprocessor.aspx</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="122"
                  trans_unit_id="122-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="122">
            <SegmentId>ac3652a1-6836-4c90-9bff-3f6163f6d06b</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="122"
              trans_unit_id="122-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="122"
              trans_unit_id="122-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>IEventProcessor</internal_link_text>
              <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.ieventprocessor.aspx</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="122"
              trans_unit_id="122-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="36324796-eb8c-441b-ab68-1b9d51da39c5"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="36324796-eb8c-441b-ab68-1b9d51da39c5">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public class SimpleEventProcessor : IEventProcessor
{
    IDictionary&lt;string, string&gt; map;
    PartitionContext partitionContext;

    public SimpleEventProcessor()
    {
        this.map = new Dictionary&lt;string, string&gt;();
    }

    public Task OpenAsync(PartitionContext context)
    {
        this.partitionContext = context;

        return Task.FromResult&lt;object&gt;(null);
    }

    public async Task ProcessEventsAsync(PartitionContext context, IEnumerable&lt;EventData&gt; messages)
    {
        foreach (EventData message in messages)
        {
            Process messages here
        }

        // Checkpoint when appropriate
        await context.CheckpointAsync();

    }


    public async Task CloseAsync(PartitionContext context, CloseReason reason)
    {
        if (reason == CloseReason.Shutdown)
        {
            await context.CheckpointAsync();
        }
    }
}</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="555f8fd3-5a6b-493a-b015-790056ab1387"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="555f8fd3-5a6b-493a-b015-790056ab1387">
        <segment
          trans_unit_id="123">
          <SegmentId>617249de-f247-4226-9c0b-f3ccbc782142</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="123"
            trans_unit_id="123-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="768faae6-a9b0-4725-88d2-0ac6690afcf1"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="768faae6-a9b0-4725-88d2-0ac6690afcf1">
        <Lines>
          <MarkdownLine>
            <LineId>6c4db62c-60bb-4d93-a061-71a92f4aa165</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="124">
                <SegmentId>c3b1533b-e590-40f3-bbf5-8581c5d4cd6d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="124"
                  trans_unit_id="124-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="124">
            <SegmentId>c3b1533b-e590-40f3-bbf5-8581c5d4cd6d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="124"
              trans_unit_id="124-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="375be277-895a-403b-8ce6-6e5901797d68"
        item_type="List"
        item_footer=""
        trans_unit_id="375be277-895a-403b-8ce6-6e5901797d68">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="b09f27a0-1104-4453-8b92-cac49fccb059"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="b09f27a0-1104-4453-8b92-cac49fccb059">
              <Lines>
                <MarkdownLine>
                  <LineId>067db21f-7a4b-49de-b273-e90c7627f09f</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="125">
                      <SegmentId>f47b99db-b13e-4588-b92c-67e8f44a0672</SegmentId>
                      <LinkItem
                        internal_item_id="1"
                        internal_item_parent_id="125"
                        trans_unit_id="125-1"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Event Hubs programming guide</internal_link_text>
                        <internal_link_url>event-hubs-programming-guide.md</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="125">
                  <SegmentId>f47b99db-b13e-4588-b92c-67e8f44a0672</SegmentId>
                  <LinkItem
                    internal_item_id="1"
                    internal_item_parent_id="125"
                    trans_unit_id="125-1"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Event Hubs programming guide</internal_link_text>
                    <internal_link_url>event-hubs-programming-guide.md</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>-</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="443c2545-235d-4231-a9e5-f4b0fc8780b8"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="443c2545-235d-4231-a9e5-f4b0fc8780b8">
              <Lines>
                <MarkdownLine>
                  <LineId>f0a38969-7ad7-44e2-930d-c0f5bb3e563e</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="126">
                      <SegmentId>5a357be5-7ec2-4745-b15c-1c78d4d8a639</SegmentId>
                      <LinkItem
                        internal_item_id="1"
                        internal_item_parent_id="126"
                        trans_unit_id="126-1"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Event Hubs overview</internal_link_text>
                        <internal_link_url>event-hubs-overview.md</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="126">
                  <SegmentId>5a357be5-7ec2-4745-b15c-1c78d4d8a639</SegmentId>
                  <LinkItem
                    internal_item_id="1"
                    internal_item_parent_id="126"
                    trans_unit_id="126-1"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Event Hubs overview</internal_link_text>
                    <internal_link_url>event-hubs-overview.md</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>-</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="36c87972-daf5-46ef-9407-172c81feab46"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="36c87972-daf5-46ef-9407-172c81feab46">
              <Lines>
                <MarkdownLine>
                  <LineId>6adccd6b-f636-4f6e-84b2-6c6d1228e475</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="127">
                      <SegmentId>dd29f766-3bf3-4481-bebf-6dd12eb11f51</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="127"
                        trans_unit_id="127-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="127">
                  <SegmentId>dd29f766-3bf3-4481-bebf-6dd12eb11f51</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="127"
                    trans_unit_id="127-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>-</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="d85a0ca4-aff7-4edc-946a-1d6d4705b54b"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="d85a0ca4-aff7-4edc-946a-1d6d4705b54b">
        <Lines>
          <MarkdownLine>
            <LineId>d2a767a8-b588-470d-9eae-b8bd45efda68</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="128">
                <SegmentId>6585cdd0-2b66-41ff-81da-def29243555e</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="128"
                  trans_unit_id="128-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="128">
            <SegmentId>6585cdd0-2b66-41ff-81da-def29243555e</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="128"
              trans_unit_id="128-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="812515b3-d9ca-4a57-b786-b4a98bd11dbd"
        item_type="List"
        item_footer="&#xA;&#xA;"
        trans_unit_id="812515b3-d9ca-4a57-b786-b4a98bd11dbd">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="15e6f403-fb0d-45af-a00a-a97a4933dc6a"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="15e6f403-fb0d-45af-a00a-a97a4933dc6a">
              <Lines>
                <MarkdownLine>
                  <LineId>2a04d47f-c45c-4bc7-bf09-6e79cb2b9137</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="129">
                      <SegmentId>f0d1cf7d-2f41-40d7-9adc-e4952ca7c88d</SegmentId>
                      <LinkItem
                        internal_item_id="1"
                        internal_item_parent_id="129"
                        trans_unit_id="129-1"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Service Bus and Event Hubs .NET API reference</internal_link_text>
                        <internal_link_url>https://msdn.microsoft.com/library/jj933424.aspx</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="129">
                  <SegmentId>f0d1cf7d-2f41-40d7-9adc-e4952ca7c88d</SegmentId>
                  <LinkItem
                    internal_item_id="1"
                    internal_item_parent_id="129"
                    trans_unit_id="129-1"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Service Bus and Event Hubs .NET API reference</internal_link_text>
                    <internal_link_url>https://msdn.microsoft.com/library/jj933424.aspx</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>-</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="9806fbca-a87c-4fdc-ad38-5c93c529adf8"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="9806fbca-a87c-4fdc-ad38-5c93c529adf8">
              <Lines>
                <MarkdownLine>
                  <LineId>fe255ab3-81eb-4e5c-8d0d-69510fc35768</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="130">
                      <SegmentId>52963b9e-12c1-4194-b506-9d8200914111</SegmentId>
                      <LinkItem
                        internal_item_id="1"
                        internal_item_parent_id="130"
                        trans_unit_id="130-1"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Event processor host API reference</internal_link_text>
                        <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.eventprocessorhost.aspx</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="130">
                  <SegmentId>52963b9e-12c1-4194-b506-9d8200914111</SegmentId>
                  <LinkItem
                    internal_item_id="1"
                    internal_item_parent_id="130"
                    trans_unit_id="130-1"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Event processor host API reference</internal_link_text>
                    <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.eventprocessorhost.aspx</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>-</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
    </ArrayOfMarkdownBlockBase>
  </block_element>
  <references>
    <ArrayOfMarkdownLinkedReference xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
  </references>
</markdown_skeleton_root>