<markdown_skeleton_root>
  <block_element>
    <ArrayOfMarkdownBlockBase xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownBlockBase
        xsi:type="MarkdownAzureMetadataBlock"
        item_id="3ff48b97-f315-42b1-a352-ff5553d60956"
        item_type="AzureMetadata"
        item_footer="footer_not_set"
        trans_unit_id="3ff48b97-f315-42b1-a352-ff5553d60956">
        <LocalizeItemList>
          <MarkdownInternalXmlItem
            internal_item_id="7774a67b-ffb4-4c4a-8a94-e87add444a9a"
            trans_unit_id="101"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
          <MarkdownInternalXmlItem
            internal_item_id="2031a17c-293f-4511-b10a-c425f66ac49b"
            trans_unit_id="102"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
        </LocalizeItemList>
        <ItemValue>&lt;properties 
    title="Multi-tenant applications with elastic database tools and row-level security" 
    pageTitle="7774a67b-ffb4-4c4a-8a94-e87add444a9a" 
    description="2031a17c-293f-4511-b10a-c425f66ac49b" 
    metaKeywords="azure sql database elastic tools multi tenant row level security rls" 
    services="sql-database" documentationCenter=""  
    manager="jeffreyg" 
    authors="tmullaney"/&gt;

&lt;tags 
    ms.service="sql-database" 
    ms.workload="sql-database" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="08/19/2015" 
    ms.author="thmullan;torsteng;sidneyh" /&gt;

</ItemValue>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="d343e268-916b-4fca-8b2a-a24493537b9c"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="d343e268-916b-4fca-8b2a-a24493537b9c">
        <segment
          trans_unit_id="103">
          <SegmentId>7533830a-0611-44a2-8853-d69eca8b6f80</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="103"
            trans_unit_id="103-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>1</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="2c3ea2f2-fc9d-416a-9903-68ff0a28bd49"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="2c3ea2f2-fc9d-416a-9903-68ff0a28bd49">
        <Lines>
          <MarkdownLine>
            <LineId>38a3674c-1f90-46bd-89f2-15a8ec2a1ee4</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="104">
                <SegmentId>c7d257bc-b8f4-4bac-a58a-26dbb8f091a8</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="104"
                  trans_unit_id="104-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Elastic database tools</internal_link_text>
                  <internal_link_url>sql-database-elastic-scale-get-started.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="2"
                  internal_item_parent_id="104"
                  trans_unit_id="104-2"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="3"
                  internal_item_parent_id="104"
                  trans_unit_id="104-3"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>row-level security (RLS)</internal_link_text>
                  <internal_link_url>https://msdn.microsoft.com/library/dn765131</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="4"
                  internal_item_parent_id="104"
                  trans_unit_id="104-4"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="105">
                <SegmentId>9a453b35-2f0c-4fa1-8e69-ccb02b7e626f</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="105"
                  trans_unit_id="105-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <MarkdownInternalBoldItem
                  internal_item_id="2"
                  internal_item_parent_id="105"
                  trans_unit_id="105-2"
                  internal_item_type="Bold">
                  <internal_items />
                  <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                </MarkdownInternalBoldItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="105"
                  trans_unit_id="105-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <MarkdownInternalBoldItem
                  internal_item_id="4"
                  internal_item_parent_id="105"
                  trans_unit_id="105-4"
                  internal_item_type="Bold">
                  <internal_items />
                  <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                </MarkdownInternalBoldItem>
                <InternalNormalItem
                  internal_item_id="5"
                  internal_item_parent_id="105"
                  trans_unit_id="105-5"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="104">
            <SegmentId>c7d257bc-b8f4-4bac-a58a-26dbb8f091a8</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="104"
              trans_unit_id="104-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Elastic database tools</internal_link_text>
              <internal_link_url>sql-database-elastic-scale-get-started.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="2"
              internal_item_parent_id="104"
              trans_unit_id="104-2"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="3"
              internal_item_parent_id="104"
              trans_unit_id="104-3"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>row-level security (RLS)</internal_link_text>
              <internal_link_url>https://msdn.microsoft.com/library/dn765131</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="4"
              internal_item_parent_id="104"
              trans_unit_id="104-4"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="105">
            <SegmentId>9a453b35-2f0c-4fa1-8e69-ccb02b7e626f</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="105"
              trans_unit_id="105-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <MarkdownInternalBoldItem
              internal_item_id="2"
              internal_item_parent_id="105"
              trans_unit_id="105-2"
              internal_item_type="Bold">
              <internal_items />
              <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
            </MarkdownInternalBoldItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="105"
              trans_unit_id="105-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <MarkdownInternalBoldItem
              internal_item_id="4"
              internal_item_parent_id="105"
              trans_unit_id="105-4"
              internal_item_type="Bold">
              <internal_items />
              <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
            </MarkdownInternalBoldItem>
            <InternalNormalItem
              internal_item_id="5"
              internal_item_parent_id="105"
              trans_unit_id="105-5"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="8276daaf-38da-493e-bd69-95c996b21c39"
        item_type="List"
        item_footer=""
        trans_unit_id="8276daaf-38da-493e-bd69-95c996b21c39">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="34c7e625-61aa-440d-8b21-2b9be0e3eab4"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="34c7e625-61aa-440d-8b21-2b9be0e3eab4">
              <Lines>
                <MarkdownLine>
                  <LineId>96171f10-53b3-4783-88c4-b6e59f4901d3</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="106">
                      <SegmentId>5dca1cd7-1a05-4515-ac6c-f826f60a2489</SegmentId>
                      <MarkdownInternalBoldItem
                        internal_item_id="1"
                        internal_item_parent_id="106"
                        trans_unit_id="106-1"
                        internal_item_type="Bold">
                        <internal_items />
                        <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                      </MarkdownInternalBoldItem>
                      <InternalNormalItem
                        internal_item_id="2"
                        internal_item_parent_id="106"
                        trans_unit_id="106-2"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                    <MarkdownSegment
                      trans_unit_id="107">
                      <SegmentId>96d7ae30-f35f-4b03-90fb-1b481e432ead</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="107"
                        trans_unit_id="107-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="106">
                  <SegmentId>5dca1cd7-1a05-4515-ac6c-f826f60a2489</SegmentId>
                  <MarkdownInternalBoldItem
                    internal_item_id="1"
                    internal_item_parent_id="106"
                    trans_unit_id="106-1"
                    internal_item_type="Bold">
                    <internal_items />
                    <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                  </MarkdownInternalBoldItem>
                  <InternalNormalItem
                    internal_item_id="2"
                    internal_item_parent_id="106"
                    trans_unit_id="106-2"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
                <MarkdownSegment
                  trans_unit_id="107">
                  <SegmentId>96d7ae30-f35f-4b03-90fb-1b481e432ead</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="107"
                    trans_unit_id="107-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="58a0ddb7-a436-4c33-bc2a-fc7a3b3c6ce5"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="58a0ddb7-a436-4c33-bc2a-fc7a3b3c6ce5">
              <Lines>
                <MarkdownLine>
                  <LineId>91745f5c-b2de-46c4-ba26-c41f4897a476</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="108">
                      <SegmentId>5967b88b-e387-4cc3-8d35-75a9d8f48f0b</SegmentId>
                      <MarkdownInternalBoldItem
                        internal_item_id="1"
                        internal_item_parent_id="108"
                        trans_unit_id="108-1"
                        internal_item_type="Bold">
                        <internal_items />
                        <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                      </MarkdownInternalBoldItem>
                      <InternalNormalItem
                        internal_item_id="2"
                        internal_item_parent_id="108"
                        trans_unit_id="108-2"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                    <MarkdownSegment
                      trans_unit_id="109">
                      <SegmentId>44b663cf-42fe-4e5f-82d9-02623744286b</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="109"
                        trans_unit_id="109-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                    <MarkdownSegment
                      trans_unit_id="110">
                      <SegmentId>03394e19-9240-4e11-b2b7-ce477931ecec</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="110"
                        trans_unit_id="110-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                      <LinkItem
                        internal_item_id="2"
                        internal_item_parent_id="110"
                        trans_unit_id="110-2"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Azure SQL Database update (V12)</internal_link_text>
                        <internal_link_url>sql-database-preview-whats-new.md</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                      <InternalNormalItem
                        internal_item_id="3"
                        internal_item_parent_id="110"
                        trans_unit_id="110-3"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="108">
                  <SegmentId>5967b88b-e387-4cc3-8d35-75a9d8f48f0b</SegmentId>
                  <MarkdownInternalBoldItem
                    internal_item_id="1"
                    internal_item_parent_id="108"
                    trans_unit_id="108-1"
                    internal_item_type="Bold">
                    <internal_items />
                    <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                  </MarkdownInternalBoldItem>
                  <InternalNormalItem
                    internal_item_id="2"
                    internal_item_parent_id="108"
                    trans_unit_id="108-2"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
                <MarkdownSegment
                  trans_unit_id="109">
                  <SegmentId>44b663cf-42fe-4e5f-82d9-02623744286b</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="109"
                    trans_unit_id="109-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
                <MarkdownSegment
                  trans_unit_id="110">
                  <SegmentId>03394e19-9240-4e11-b2b7-ce477931ecec</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="110"
                    trans_unit_id="110-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                  <LinkItem
                    internal_item_id="2"
                    internal_item_parent_id="110"
                    trans_unit_id="110-2"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Azure SQL Database update (V12)</internal_link_text>
                    <internal_link_url>sql-database-preview-whats-new.md</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                  <InternalNormalItem
                    internal_item_id="3"
                    internal_item_parent_id="110"
                    trans_unit_id="110-3"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="3e241498-94bc-4a1d-9c44-f6ced9d054a7"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="3e241498-94bc-4a1d-9c44-f6ced9d054a7">
        <Lines>
          <MarkdownLine>
            <LineId>7382928a-1faa-4bc8-b261-da94a6a0ae52</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="111">
                <SegmentId>690faa88-9b4d-4744-a493-571aa9bb20ef</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="111"
                  trans_unit_id="111-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="112">
                <SegmentId>211a5fed-bb8d-43b2-8783-107b4bea1507</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="112"
                  trans_unit_id="112-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="111">
            <SegmentId>690faa88-9b4d-4744-a493-571aa9bb20ef</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="111"
              trans_unit_id="111-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="112">
            <SegmentId>211a5fed-bb8d-43b2-8783-107b4bea1507</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="112"
              trans_unit_id="112-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="1b1c0bec-cc7e-4cb2-b5c0-c58d36517740"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="1b1c0bec-cc7e-4cb2-b5c0-c58d36517740">
        <Lines>
          <MarkdownLine>
            <LineId>9ac3aa72-1818-4640-9882-09f91a95a0e2</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="113">
                <SegmentId>19211ab7-d6e0-443c-9ade-56837e450640</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="113"
                  trans_unit_id="113-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="113"
                  trans_unit_id="113-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>data dependent routing</internal_link_text>
                  <internal_link_url>sql-database-elastic-scale-data-dependent-routing.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="113"
                  trans_unit_id="113-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="114">
                <SegmentId>d1264723-bcb1-4766-9ca8-aa4843fa734b</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="114"
                  trans_unit_id="114-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="115">
                <SegmentId>a9c1f8bc-11ac-48ac-a91a-8a6aa0b93427</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="115"
                  trans_unit_id="115-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="113">
            <SegmentId>19211ab7-d6e0-443c-9ade-56837e450640</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="113"
              trans_unit_id="113-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="113"
              trans_unit_id="113-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>data dependent routing</internal_link_text>
              <internal_link_url>sql-database-elastic-scale-data-dependent-routing.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="113"
              trans_unit_id="113-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="114">
            <SegmentId>d1264723-bcb1-4766-9ca8-aa4843fa734b</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="114"
              trans_unit_id="114-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="115">
            <SegmentId>a9c1f8bc-11ac-48ac-a91a-8a6aa0b93427</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="115"
              trans_unit_id="115-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="cc417b9a-299e-4849-a20b-4e4876f64e8e"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="cc417b9a-299e-4849-a20b-4e4876f64e8e">
        <Lines>
          <MarkdownLine>
            <LineId>c6507b94-59c2-4236-b28a-6dbe62de5204</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="116">
                <SegmentId>f18f84c0-bd0b-4a74-b0ba-bac92854d756</SegmentId>
                <ImageItem
                  internal_item_id="1"
                  internal_item_parent_id="116"
                  trans_unit_id="116-1"
                  internal_item_type="Image">
                  <internal_items />
                  <internal_Image_type>Reference</internal_Image_type>
                  <internal_link_text>Blogging app architecture</internal_link_text>
                  <internal_link_id>1</internal_link_id>
                </ImageItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="116">
            <SegmentId>f18f84c0-bd0b-4a74-b0ba-bac92854d756</SegmentId>
            <ImageItem
              internal_item_id="1"
              internal_item_parent_id="116"
              trans_unit_id="116-1"
              internal_item_type="Image">
              <internal_items />
              <internal_Image_type>Reference</internal_Image_type>
              <internal_link_text>Blogging app architecture</internal_link_text>
              <internal_link_id>1</internal_link_id>
            </ImageItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="f95fccff-f0b6-471a-aa87-0d4554d9455c"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="f95fccff-f0b6-471a-aa87-0d4554d9455c">
        <segment
          trans_unit_id="117">
          <SegmentId>68691715-1280-41c9-a730-102da6012c1d</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="117"
            trans_unit_id="117-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="8aeded93-225b-4e9e-92f0-39bf70e5184b"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="8aeded93-225b-4e9e-92f0-39bf70e5184b">
        <segment
          trans_unit_id="118">
          <SegmentId>1993e90e-20bb-4f50-a3ea-be89b66973ef</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="118"
            trans_unit_id="118-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="7e4beb89-100b-41fc-8732-4551fe1d3d3a"
        item_type="List"
        item_footer=""
        trans_unit_id="7e4beb89-100b-41fc-8732-4551fe1d3d3a">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="10beca49-a7c1-4a93-89c3-346267334ca2"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="10beca49-a7c1-4a93-89c3-346267334ca2">
              <Lines>
                <MarkdownLine>
                  <LineId>c750e60c-8948-4fc3-ac06-de868286eab6</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="119">
                      <SegmentId>cc6d1c56-09a8-45be-935d-7176c6e836dc</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="119"
                        trans_unit_id="119-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="119">
                  <SegmentId>cc6d1c56-09a8-45be-935d-7176c6e836dc</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="119"
                    trans_unit_id="119-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="ce6a4f42-f357-49e0-854c-302d4f0b3a47"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="ce6a4f42-f357-49e0-854c-302d4f0b3a47">
              <Lines>
                <MarkdownLine>
                  <LineId>f128f21f-9d84-4c63-a2dd-bd892e1d3203</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="120">
                      <SegmentId>83aed617-cd16-4e02-bada-78a934f9719a</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="120"
                        trans_unit_id="120-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="120">
                  <SegmentId>83aed617-cd16-4e02-bada-78a934f9719a</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="120"
                    trans_unit_id="120-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="18379d4f-0a50-494e-9146-497a4adb5897"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="18379d4f-0a50-494e-9146-497a4adb5897">
              <Lines>
                <MarkdownLine>
                  <LineId>93067336-b7d7-4123-bfc9-09dd16a72768</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="121">
                      <SegmentId>47c404cb-74bb-4e1c-8c22-7f70a85afb02</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="121"
                        trans_unit_id="121-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                      <LinkItem
                        internal_item_id="2"
                        internal_item_parent_id="121"
                        trans_unit_id="121-2"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Elastic DB Tools for Azure SQL - Multi-Tenant Shards</internal_link_text>
                        <internal_link_url>http://go.microsoft.com/?linkid=9888163</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="121">
                  <SegmentId>47c404cb-74bb-4e1c-8c22-7f70a85afb02</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="121"
                    trans_unit_id="121-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                  <LinkItem
                    internal_item_id="2"
                    internal_item_parent_id="121"
                    trans_unit_id="121-2"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Elastic DB Tools for Azure SQL - Multi-Tenant Shards</internal_link_text>
                    <internal_link_url>http://go.microsoft.com/?linkid=9888163</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <MarkdownListBlock
              item_id="dcdeae4d-1948-4141-8fe5-2c9c71ab8028"
              item_type="List"
              item_footer="footer_not_set"
              trans_unit_id="dcdeae4d-1948-4141-8fe5-2c9c71ab8028">
              <inner_list_items>
                <ListItem>
                  <MarkdownParagraphBlock
                    item_id="dded3c32-547a-41bf-b411-60667f3d305f"
                    item_type="NormalParagraph"
                    item_footer="footer_not_set"
                    trans_unit_id="dded3c32-547a-41bf-b411-60667f3d305f">
                    <Lines>
                      <MarkdownLine>
                        <LineId>b33312a9-9250-427d-a321-425e98529a20</LineId>
                        <paragraph_segments>
                          <MarkdownSegment
                            trans_unit_id="122">
                            <SegmentId>24d1f8b8-d6f1-4285-ac4e-82d56a84f3b5</SegmentId>
                            <InternalNormalItem
                              internal_item_id="1"
                              internal_item_parent_id="122"
                              trans_unit_id="122-1"
                              internal_item_type="Normal">
                              <internal_items />
                            </InternalNormalItem>
                            <MarkdownInternalBoldItem
                              internal_item_id="2"
                              internal_item_parent_id="122"
                              trans_unit_id="122-2"
                              internal_item_type="Bold">
                              <internal_items />
                              <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                            </MarkdownInternalBoldItem>
                          </MarkdownSegment>
                        </paragraph_segments>
                        <PrefixWSLength>1</PrefixWSLength>
                        <SuffixWSLength>0</SuffixWSLength>
                      </MarkdownLine>
                    </Lines>
                    <paragraph_segments>
                      <MarkdownSegment
                        trans_unit_id="122">
                        <SegmentId>24d1f8b8-d6f1-4285-ac4e-82d56a84f3b5</SegmentId>
                        <InternalNormalItem
                          internal_item_id="1"
                          internal_item_parent_id="122"
                          trans_unit_id="122-1"
                          internal_item_type="Normal">
                          <internal_items />
                        </InternalNormalItem>
                        <MarkdownInternalBoldItem
                          internal_item_id="2"
                          internal_item_parent_id="122"
                          trans_unit_id="122-2"
                          internal_item_type="Bold">
                          <internal_items />
                          <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                        </MarkdownInternalBoldItem>
                      </MarkdownSegment>
                    </paragraph_segments>
                  </MarkdownParagraphBlock>
                  <Identifier>*</Identifier>
                  <IndentsLength>
                    <int>0</int>
                  </IndentsLength>
                </ListItem>
              </inner_list_items>
              <ListType>Charactor</ListType>
            </MarkdownListBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
              <int>2</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="c9772df7-faf7-49ba-9159-8cdef5069d12"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="c9772df7-faf7-49ba-9159-8cdef5069d12">
        <Lines>
          <MarkdownLine>
            <LineId>77abb4ab-d04d-4f0c-8226-33a3309e1333</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="123">
                <SegmentId>b963e92c-0750-471e-8111-45b185a8e601</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="123"
                  trans_unit_id="123-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="123"
                  trans_unit_id="123-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Elastic DB Tools for Azure SQL - Entity Framework Integration</internal_link_text>
                  <internal_link_url>sql-database-elastic-scale-use-entity-framework-applications-visual-studio.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="123"
                  trans_unit_id="123-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="124">
                <SegmentId>ac85f68b-17d0-40c9-9b0e-208921023f75</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="124"
                  trans_unit_id="124-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="123">
            <SegmentId>b963e92c-0750-471e-8111-45b185a8e601</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="123"
              trans_unit_id="123-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="123"
              trans_unit_id="123-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Elastic DB Tools for Azure SQL - Entity Framework Integration</internal_link_text>
              <internal_link_url>sql-database-elastic-scale-use-entity-framework-applications-visual-studio.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="123"
              trans_unit_id="123-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="124">
            <SegmentId>ac85f68b-17d0-40c9-9b0e-208921023f75</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="124"
              trans_unit_id="124-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="d1027c23-545e-44e5-b69d-5fc9c42ee397"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="d1027c23-545e-44e5-b69d-5fc9c42ee397">
        <Lines>
          <MarkdownLine>
            <LineId>540d49dd-52f4-43d9-928f-43ff82873cc1</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="125">
                <SegmentId>37f30cb2-5f29-4f83-9320-8ef1352d8b82</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="125"
                  trans_unit_id="125-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="126">
                <SegmentId>ea7ab498-02fe-4def-8d64-263f2609b87f</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="126"
                  trans_unit_id="126-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="125">
            <SegmentId>37f30cb2-5f29-4f83-9320-8ef1352d8b82</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="125"
              trans_unit_id="125-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="126">
            <SegmentId>ea7ab498-02fe-4def-8d64-263f2609b87f</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="126"
              trans_unit_id="126-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="caafdf04-de58-4008-8aae-f4de2ffa7d60"
        item_type="List"
        item_footer=""
        trans_unit_id="caafdf04-de58-4008-8aae-f4de2ffa7d60">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="aeab4f96-c34f-4245-ad60-b042fe45e0e5"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="aeab4f96-c34f-4245-ad60-b042fe45e0e5">
              <Lines>
                <MarkdownLine>
                  <LineId>a88e7a28-9dee-4938-bc09-ed80c3a1f6d9</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="127">
                      <SegmentId>1c067816-4ca4-4499-893c-0e9233fd3586</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="127"
                        trans_unit_id="127-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="127">
                  <SegmentId>1c067816-4ca4-4499-893c-0e9233fd3586</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="127"
                    trans_unit_id="127-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>1.</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="4cd08331-c89b-4679-b3de-23429c8b828e"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="4cd08331-c89b-4679-b3de-23429c8b828e">
              <Lines>
                <MarkdownLine>
                  <LineId>de8bb2f6-0bda-427c-b5c4-54f3b87b4e92</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="128">
                      <SegmentId>83069f96-1c34-4ab1-860a-f027ff715417</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="128"
                        trans_unit_id="128-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="128">
                  <SegmentId>83069f96-1c34-4ab1-860a-f027ff715417</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="128"
                    trans_unit_id="128-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>2.</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="c1a06090-e3c5-48a3-a89d-4ea52c7fe733"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="c1a06090-e3c5-48a3-a89d-4ea52c7fe733">
              <Lines>
                <MarkdownLine>
                  <LineId>3e220f79-930a-477e-bb5a-fe5146a13c9f</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="129">
                      <SegmentId>80f35879-3c56-4ab0-8fc9-139e0ec19de0</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="129"
                        trans_unit_id="129-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="129">
                  <SegmentId>80f35879-3c56-4ab0-8fc9-139e0ec19de0</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="129"
                    trans_unit_id="129-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>3.</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Number</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="90e28053-7613-4622-8093-51979e8c7077"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="90e28053-7613-4622-8093-51979e8c7077">
        <Lines>
          <MarkdownLine>
            <LineId>93f8713a-a2c5-422e-96ff-3f68ce59f150</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="130">
                <SegmentId>d054b0d4-e121-4b36-ae23-b6224495fffc</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="130"
                  trans_unit_id="130-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="131">
                <SegmentId>f1744164-023b-4ce7-b8fe-5cfd7b8fc8ea</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="131"
                  trans_unit_id="131-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="132">
                <SegmentId>f5e40f20-25cb-4454-954f-8cf3f312edd7</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="132"
                  trans_unit_id="132-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="130">
            <SegmentId>d054b0d4-e121-4b36-ae23-b6224495fffc</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="130"
              trans_unit_id="130-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="131">
            <SegmentId>f1744164-023b-4ce7-b8fe-5cfd7b8fc8ea</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="131"
              trans_unit_id="131-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="132">
            <SegmentId>f5e40f20-25cb-4454-954f-8cf3f312edd7</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="132"
              trans_unit_id="132-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="a6566f5f-c71b-41d5-aee2-383277d5fece"
        item_type="List"
        item_footer="&#xA;"
        trans_unit_id="a6566f5f-c71b-41d5-aee2-383277d5fece">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="ad341f9d-09b0-4f46-a986-023cf2619d08"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="ad341f9d-09b0-4f46-a986-023cf2619d08">
              <Lines>
                <MarkdownLine>
                  <LineId>3c4e5f6c-d34f-481b-9c39-2274bb77e06a</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="133">
                      <SegmentId>57e2397f-95b5-4854-ac34-f068034e6415</SegmentId>
                      <MarkdownInternalBoldItem
                        internal_item_id="1"
                        internal_item_parent_id="133"
                        trans_unit_id="133-1"
                        internal_item_type="Bold">
                        <internal_items />
                        <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                      </MarkdownInternalBoldItem>
                      <InternalNormalItem
                        internal_item_id="2"
                        internal_item_parent_id="133"
                        trans_unit_id="133-2"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                    <MarkdownSegment
                      trans_unit_id="134">
                      <SegmentId>669bf12e-a9e1-4dfa-b99d-0b2e660238f1</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="134"
                        trans_unit_id="134-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="133">
                  <SegmentId>57e2397f-95b5-4854-ac34-f068034e6415</SegmentId>
                  <MarkdownInternalBoldItem
                    internal_item_id="1"
                    internal_item_parent_id="133"
                    trans_unit_id="133-1"
                    internal_item_type="Bold">
                    <internal_items />
                    <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                  </MarkdownInternalBoldItem>
                  <InternalNormalItem
                    internal_item_id="2"
                    internal_item_parent_id="133"
                    trans_unit_id="133-2"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
                <MarkdownSegment
                  trans_unit_id="134">
                  <SegmentId>669bf12e-a9e1-4dfa-b99d-0b2e660238f1</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="134"
                    trans_unit_id="134-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>1.</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="aa79ce37-6027-4dce-b28e-9a8e6cd3c6c5"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="aa79ce37-6027-4dce-b28e-9a8e6cd3c6c5">
              <Lines>
                <MarkdownLine>
                  <LineId>a13bf219-8365-42e3-b011-8d4bc040bf11</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="135">
                      <SegmentId>1334e609-3af9-4261-9bd4-5733d48612aa</SegmentId>
                      <MarkdownInternalBoldItem
                        internal_item_id="1"
                        internal_item_parent_id="135"
                        trans_unit_id="135-1"
                        internal_item_type="Bold">
                        <internal_items />
                        <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                      </MarkdownInternalBoldItem>
                      <InternalNormalItem
                        internal_item_id="2"
                        internal_item_parent_id="135"
                        trans_unit_id="135-2"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                    <MarkdownSegment
                      trans_unit_id="136">
                      <SegmentId>a7fc57ff-3613-4d2c-a873-565dfb88cc9b</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="136"
                        trans_unit_id="136-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="135">
                  <SegmentId>1334e609-3af9-4261-9bd4-5733d48612aa</SegmentId>
                  <MarkdownInternalBoldItem
                    internal_item_id="1"
                    internal_item_parent_id="135"
                    trans_unit_id="135-1"
                    internal_item_type="Bold">
                    <internal_items />
                    <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                  </MarkdownInternalBoldItem>
                  <InternalNormalItem
                    internal_item_id="2"
                    internal_item_parent_id="135"
                    trans_unit_id="135-2"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
                <MarkdownSegment
                  trans_unit_id="136">
                  <SegmentId>a7fc57ff-3613-4d2c-a873-565dfb88cc9b</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="136"
                    trans_unit_id="136-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>2.</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Number</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="b42d4e3b-8860-43ed-bf3c-e48a39468406"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="b42d4e3b-8860-43ed-bf3c-e48a39468406">
        <segment
          trans_unit_id="137">
          <SegmentId>3eb45c96-2d58-4f45-8eab-641d9024cc16</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="137"
            trans_unit_id="137-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="05c4ff19-5c38-4051-b87b-d6ce4c9470c2"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="05c4ff19-5c38-4051-b87b-d6ce4c9470c2">
        <Lines>
          <MarkdownLine>
            <LineId>808280e0-6a91-4f76-aedb-39300b46cc4e</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="138">
                <SegmentId>71c46d4f-d89d-4236-b134-47a30b1851f1</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="138"
                  trans_unit_id="138-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="139">
                <SegmentId>3e82a246-95d5-46f6-adda-d74eb5d7371c</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="139"
                  trans_unit_id="139-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="139"
                  trans_unit_id="139-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>CONTEXT_INFO</internal_link_text>
                  <internal_link_url>https://msdn.microsoft.com/library/ms180125</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="139"
                  trans_unit_id="139-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="140">
                <SegmentId>5153f187-80a8-443a-867e-4eec828be4a0</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="140"
                  trans_unit_id="140-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <ItalicsItem
                  internal_item_id="2"
                  internal_item_parent_id="140"
                  trans_unit_id="140-2"
                  internal_item_type="Italics">
                  <internal_items />
                  <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                </ItalicsItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="140"
                  trans_unit_id="140-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="138">
            <SegmentId>71c46d4f-d89d-4236-b134-47a30b1851f1</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="138"
              trans_unit_id="138-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="139">
            <SegmentId>3e82a246-95d5-46f6-adda-d74eb5d7371c</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="139"
              trans_unit_id="139-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="139"
              trans_unit_id="139-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>CONTEXT_INFO</internal_link_text>
              <internal_link_url>https://msdn.microsoft.com/library/ms180125</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="139"
              trans_unit_id="139-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="140">
            <SegmentId>5153f187-80a8-443a-867e-4eec828be4a0</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="140"
              trans_unit_id="140-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <ItalicsItem
              internal_item_id="2"
              internal_item_parent_id="140"
              trans_unit_id="140-2"
              internal_item_type="Italics">
              <internal_items />
              <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
            </ItalicsItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="140"
              trans_unit_id="140-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="4fb8986a-63f2-49f6-af3c-b4544b46ab28"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="4fb8986a-63f2-49f6-af3c-b4544b46ab28">
        <segment
          trans_unit_id="141">
          <SegmentId>b3b1e6e9-fb23-4fb0-8894-a66fca11ac90</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="141"
            trans_unit_id="141-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="b8a2f702-3664-4a7e-96fd-6eeb4b234e65"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="b8a2f702-3664-4a7e-96fd-6eeb4b234e65">
        <Lines>
          <MarkdownLine>
            <LineId>fe7c129d-b2f4-4f6d-a3fe-78f1309cb2c4</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="142">
                <SegmentId>4ab9e775-d7aa-4503-8a9b-7c349c3ff03f</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="142"
                  trans_unit_id="142-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="142"
                  trans_unit_id="142-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Data Dependent Routing using EF DbContext</internal_link_text>
                  <internal_link_url>sql-database-elastic-scale-use-entity-framework-applications-visual-studio.md/#data-dependent-routing-using-ef-dbcontext</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="142"
                  trans_unit_id="142-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="143">
                <SegmentId>94cfabad-a314-4f4f-bd65-71fa55243acd</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="143"
                  trans_unit_id="143-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="144">
                <SegmentId>4820851a-2572-479e-adaf-d69b5b4df9aa</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="144"
                  trans_unit_id="144-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="142">
            <SegmentId>4ab9e775-d7aa-4503-8a9b-7c349c3ff03f</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="142"
              trans_unit_id="142-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="142"
              trans_unit_id="142-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Data Dependent Routing using EF DbContext</internal_link_text>
              <internal_link_url>sql-database-elastic-scale-use-entity-framework-applications-visual-studio.md/#data-dependent-routing-using-ef-dbcontext</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="142"
              trans_unit_id="142-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="143">
            <SegmentId>94cfabad-a314-4f4f-bd65-71fa55243acd</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="143"
              trans_unit_id="143-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="144">
            <SegmentId>4820851a-2572-479e-adaf-d69b5b4df9aa</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="144"
              trans_unit_id="144-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="1e7fdac9-548a-4403-b762-0c1d5b6d3ca6"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="1e7fdac9-548a-4403-b762-0c1d5b6d3ca6">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// ElasticScaleContext.cs 
// ... 
// C'tor for data dependent routing. This call will open a validated connection routed to the proper 
// shard by the shard map manager. Note that the base class c'tor call will fail for an open connection 
// if migrations need to be done and SQL credentials are used. This is the reason for the  
// separation of c'tors into the DDR case (this c'tor) and the internal c'tor for new shards. 
public ElasticScaleContext(ShardMap shardMap, T shardingKey, string connectionStr)
    : base(OpenDDRConnection(shardMap, shardingKey, connectionStr), true /* contextOwnsConnection */)
{
}

public static SqlConnection OpenDDRConnection(ShardMap shardMap, T shardingKey, string connectionStr)
{
    // No initialization
    Database.SetInitializer&lt;ElasticScaleContext&lt;T&gt;&gt;(null);

    // Ask shard map to broker a validated connection for the given key
    SqlConnection conn = null;
    try
    {
        conn = shardMap.OpenConnectionForKey(shardingKey, connectionStr, ConnectionOptions.Validate);

        // Set CONTEXT_INFO to shardingKey to enable Row-Level Security filtering
        SqlCommand cmd = conn.CreateCommand();
        cmd.CommandText = @"SET CONTEXT_INFO @shardingKey";
        cmd.Parameters.AddWithValue("@shardingKey", shardingKey);
        cmd.ExecuteNonQuery();

        return conn;
    }
    catch (Exception)
    {
        if (conn != null)
        {
            conn.Dispose();
        }

        throw;
    }
} 
// ... </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="da4e741d-09a3-421d-adbf-9d9b91fc9ea8"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="da4e741d-09a3-421d-adbf-9d9b91fc9ea8">
        <Lines>
          <MarkdownLine>
            <LineId>e8b838ef-014d-4673-aaac-bf98a24dfeee</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="145">
                <SegmentId>f41f6de4-656d-4b9f-8bef-95b0205ff34d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="145"
                  trans_unit_id="145-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="145">
            <SegmentId>f41f6de4-656d-4b9f-8bef-95b0205ff34d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="145"
              trans_unit_id="145-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="3919bfc6-4c89-4c5f-8934-310744940c8e"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="3919bfc6-4c89-4c5f-8934-310744940c8e">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Program.cs 
SqlDatabaseUtils.SqlRetryPolicy.ExecuteAction(() =&gt; 
{   
    using (var db = new ElasticScaleContext&lt;int&gt;(sharding.ShardMap, tenantId, connStrBldr.ConnectionString))   
    {     
        var query = from b in db.Blogs
                    orderby b.Name
                    select b;

        Console.WriteLine("All blogs for TenantId {0}:", tenantId);     
        foreach (var item in query)     
        {       
            Console.WriteLine(item.Name);     
        }   
    } 
}); </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="dc6237fb-dd17-4150-a867-5d130abe4743"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="dc6237fb-dd17-4150-a867-5d130abe4743">
        <segment
          trans_unit_id="146">
          <SegmentId>38af8175-e7d7-4654-b2c4-68fe3a2d683c</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="146"
            trans_unit_id="146-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="ed8d2e11-8a11-42e1-8ae0-5205bf4ec3f4"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="ed8d2e11-8a11-42e1-8ae0-5205bf4ec3f4">
        <Lines>
          <MarkdownLine>
            <LineId>507a766a-b5f2-427a-a1e9-e62cf5728447</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="147">
                <SegmentId>c33b7d8c-5813-4ebb-93a2-43fe787395fb</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="147"
                  trans_unit_id="147-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="148">
                <SegmentId>e076c4d8-5941-4569-b01b-ad9ef7eee4dc</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="148"
                  trans_unit_id="148-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="147">
            <SegmentId>c33b7d8c-5813-4ebb-93a2-43fe787395fb</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="147"
              trans_unit_id="147-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="148">
            <SegmentId>e076c4d8-5941-4569-b01b-ad9ef7eee4dc</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="148"
              trans_unit_id="148-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="f84c632b-bafc-4edc-8061-9104bb610edf"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="f84c632b-bafc-4edc-8061-9104bb610edf">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Program.cs
// ...

// Wrapper function for ShardMap.OpenConnectionForKey() that automatically sets CONTEXT_INFO to the correct
// tenantId before returning a connection. As a best practice, you should only open connections using this 
// method to ensure that CONTEXT_INFO is always set before executing a query.
public static SqlConnection OpenConnectionForTenant(ShardMap shardMap, int tenantId, string connectionStr)
{
    SqlConnection conn = null;
    try
    {
        // Ask shard map to broker a validated connection for the given key
        conn = shardMap.OpenConnectionForKey(tenantId, connectionStr, ConnectionOptions.Validate);

        // Set CONTEXT_INFO to shardingKey to enable Row-Level Security filtering
        SqlCommand cmd = conn.CreateCommand();
        cmd.CommandText = @"SET CONTEXT_INFO @shardingKey";
        cmd.Parameters.AddWithValue("@shardingKey", tenantId);
        cmd.ExecuteNonQuery();

        return conn;
    }
    catch (Exception)
    {
        if (conn != null)
        {
            conn.Dispose();
        }

        throw;
    }
}

// ...

// Example query via ADO.NET SqlClient
// If row-level security is enabled, only Tenant 4's blogs will be listed
SqlDatabaseUtils.SqlRetryPolicy.ExecuteAction(() =&gt;
{
    using (SqlConnection conn = OpenConnectionForTenant(sharding.ShardMap, tenantId4, connStrBldr.ConnectionString))
    {
        SqlCommand cmd = conn.CreateCommand();
        cmd.CommandText = @"SELECT * FROM Blogs";

        Console.WriteLine("--\nAll blogs for TenantId {0} (using ADO.NET SqlClient):", tenantId4);
        SqlDataReader reader = cmd.ExecuteReader();
        while (reader.Read())
        {
            Console.WriteLine("{0}", reader["Name"]);
        }
    }
});
</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="20f513f9-3bee-4e86-811b-39f190b0b4ec"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="20f513f9-3bee-4e86-811b-39f190b0b4ec">
        <segment
          trans_unit_id="149">
          <SegmentId>1edcd66b-424d-4de9-8142-837cde399d5e</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="149"
            trans_unit_id="149-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="9d08b984-460d-44ca-bb2c-a125b105c820"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="9d08b984-460d-44ca-bb2c-a125b105c820">
        <segment
          trans_unit_id="150">
          <SegmentId>b8a06745-030d-44b1-bbd3-56c80c63744d</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="150"
            trans_unit_id="150-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="12e77d87-9d87-42ff-99f5-ea49b4a0bd43"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="12e77d87-9d87-42ff-99f5-ea49b4a0bd43">
        <Lines>
          <MarkdownLine>
            <LineId>c8fe506a-b5cb-4401-b592-b237d3876bb1</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="151">
                <SegmentId>0642e2a1-dbeb-499b-a82d-12e8ea890bcc</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="151"
                  trans_unit_id="151-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="151">
            <SegmentId>0642e2a1-dbeb-499b-a82d-12e8ea890bcc</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="151"
              trans_unit_id="151-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="ac4da628-6ff0-4ef1-a41b-3c3a5241393b"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="ac4da628-6ff0-4ef1-a41b-3c3a5241393b">
        <Lines>
          <MarkdownLine>
            <LineId>d6d37285-a97d-49f1-80fe-f20545bf1209</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="152">
                <SegmentId>814e622c-8ab4-48ab-9f83-0226c8b2ae34</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="152"
                  trans_unit_id="152-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="153">
                <SegmentId>e0573fdd-285f-423a-b0bb-549724f22892</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="153"
                  trans_unit_id="153-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="154">
                <SegmentId>b5364554-70d0-4c78-894c-9c64391f0233</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="154"
                  trans_unit_id="154-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="155">
                <SegmentId>6326df52-ea49-4021-823a-7b083987086e</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="155"
                  trans_unit_id="155-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="152">
            <SegmentId>814e622c-8ab4-48ab-9f83-0226c8b2ae34</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="152"
              trans_unit_id="152-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="153">
            <SegmentId>e0573fdd-285f-423a-b0bb-549724f22892</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="153"
              trans_unit_id="153-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="154">
            <SegmentId>b5364554-70d0-4c78-894c-9c64391f0233</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="154"
              trans_unit_id="154-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="155">
            <SegmentId>6326df52-ea49-4021-823a-7b083987086e</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="155"
              trans_unit_id="155-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="9a4ae06e-557f-47f9-a909-de9c42400412"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="9a4ae06e-557f-47f9-a909-de9c42400412">
        <Lines>
          <MarkdownLine>
            <LineId>7f3ca690-53b5-48df-b4ee-1ae78088882c</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="156">
                <SegmentId>e0e59247-1b1a-418a-ba5f-35ea2f56a087</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="156"
                  trans_unit_id="156-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="156"
                  trans_unit_id="156-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Elastic Database Jobs</internal_link_text>
                  <internal_link_url>sql-database-elastic-jobs-overview.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="156"
                  trans_unit_id="156-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="156">
            <SegmentId>e0e59247-1b1a-418a-ba5f-35ea2f56a087</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="156"
              trans_unit_id="156-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="156"
              trans_unit_id="156-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Elastic Database Jobs</internal_link_text>
              <internal_link_url>sql-database-elastic-jobs-overview.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="156"
              trans_unit_id="156-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="66774d5a-9a84-47e1-8253-42f45def1235"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="66774d5a-9a84-47e1-8253-42f45def1235">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>CREATE SCHEMA rls -- separate schema to organize RLS objects 
GO

CREATE FUNCTION rls.fn_tenantAccessPredicate(@TenantId int)     
    RETURNS TABLE     
    WITH SCHEMABINDING
AS
    RETURN SELECT 1 AS fn_accessResult          
        WHERE DATABASE_PRINCIPAL_ID() = DATABASE_PRINCIPAL_ID('dbo') -- the user in your application’s connection string (dbo is only for demo purposes!)         
        AND CONVERT(int, CONVERT(varbinary(4), CONTEXT_INFO())) = @TenantId -- @TenantId (int) is 4 bytes 
GO

CREATE SECURITY POLICY rls.tenantAccessPolicy
    ADD FILTER PREDICATE rls.fn_tenantAccessPredicate(TenantId) ON dbo.Blogs,
    ADD FILTER PREDICATE rls.fn_tenantAccessPredicate(TenantId) ON dbo.Posts
GO </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownNoteBlock"
        item_id="69274ad2-cd39-45a6-9228-0fd734b7d849"
        item_type="Note"
        item_footer=""
        trans_unit_id="69274ad2-cd39-45a6-9228-0fd734b7d849">
        <Lines>
          <MarkdownLine>
            <LineId>24a3b46a-f871-434f-9ef5-e79b10881bac</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="157">
                <SegmentId>de101155-bb8e-4dcd-a9f1-b04e81987723</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="157"
                  trans_unit_id="157-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="158">
                <SegmentId>1104abdc-c2fc-469c-b9d6-40aa9c006a77</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="158"
                  trans_unit_id="158-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="158"
                  trans_unit_id="158-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Apply Row-Level Security to all tables – helper script (blog)</internal_link_text>
                  <internal_link_url>http://blogs.msdn.com/b/sqlsecurity/archive/2015/03/31/apply-row-level-security-to-all-tables-helper-script</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="158"
                  trans_unit_id="158-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>2</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <NoteSign>&gt; [AZURE.TIP] </NoteSign>
        <Prefixes>
          <string />
        </Prefixes>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="157">
            <SegmentId>de101155-bb8e-4dcd-a9f1-b04e81987723</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="157"
              trans_unit_id="157-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="158">
            <SegmentId>1104abdc-c2fc-469c-b9d6-40aa9c006a77</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="158"
              trans_unit_id="158-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="158"
              trans_unit_id="158-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Apply Row-Level Security to all tables – helper script (blog)</internal_link_text>
              <internal_link_url>http://blogs.msdn.com/b/sqlsecurity/archive/2015/03/31/apply-row-level-security-to-all-tables-helper-script</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="158"
              trans_unit_id="158-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="0fb4037a-4a3a-4234-afb9-3549de76d44c"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="0fb4037a-4a3a-4234-afb9-3549de76d44c">
        <Lines>
          <MarkdownLine>
            <LineId>6899fd7f-0506-4cc3-a84d-40a088495278</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="159">
                <SegmentId>760328a9-66a8-4148-a363-c893cd9c19e4</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="159"
                  trans_unit_id="159-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="159">
            <SegmentId>760328a9-66a8-4148-a363-c893cd9c19e4</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="159"
              trans_unit_id="159-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="c1f46a19-4605-46d0-9ec1-a25b3f9d14b1"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="c1f46a19-4605-46d0-9ec1-a25b3f9d14b1">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>ALTER SECURITY POLICY rls.tenantAccessPolicy     
    ADD FILTER PREDICATE rls.fn_tenantAccessPredicate(TenantId) ON dbo.MyNewTable 
GO </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="354bf94d-a608-4b24-a9cb-42e54c35b228"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="354bf94d-a608-4b24-a9cb-42e54c35b228">
        <Lines>
          <MarkdownLine>
            <LineId>a7e9d2bd-27bd-4055-bcba-211d8dbae5b4</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="160">
                <SegmentId>9caaef8d-5ad8-49a6-b27e-45fda4dbc1e6</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="160"
                  trans_unit_id="160-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="160">
            <SegmentId>9caaef8d-5ad8-49a6-b27e-45fda4dbc1e6</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="160"
              trans_unit_id="160-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="0fb8a233-b87d-48dc-8bb0-3e28cfd9a112"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="0fb8a233-b87d-48dc-8bb0-3e28cfd9a112">
        <segment
          trans_unit_id="161">
          <SegmentId>f2c1044e-39e0-42bf-b4e4-3d11e6219c9b</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="161"
            trans_unit_id="161-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="ad1ba905-19e9-4c2d-b9c8-6c01affd3d87"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="ad1ba905-19e9-4c2d-b9c8-6c01affd3d87">
        <Lines>
          <MarkdownLine>
            <LineId>bfd258f8-c1aa-4bc6-8cef-d0d93dc9fb60</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="162">
                <SegmentId>5d9b86bd-c6a0-4128-b8d6-0b9a6f60df9b</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="162"
                  trans_unit_id="162-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="163">
                <SegmentId>d239dd95-60e9-4b1f-ab7b-390795f020dd</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="163"
                  trans_unit_id="163-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="164">
                <SegmentId>ae4ac54e-8faf-494d-8d01-a27be3f1e9fb</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="164"
                  trans_unit_id="164-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="165">
                <SegmentId>f9457b50-4bb1-4f25-92de-89baaea230c1</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="165"
                  trans_unit_id="165-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="165"
                  trans_unit_id="165-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Row-Level Security: Blocking unauthorized INSERTs (blog)</internal_link_text>
                  <internal_link_url>http://blogs.msdn.com/b/sqlsecurity/archive/2015/03/23/row-level-security-blocking-unauthorized-inserts</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="165"
                  trans_unit_id="165-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="162">
            <SegmentId>5d9b86bd-c6a0-4128-b8d6-0b9a6f60df9b</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="162"
              trans_unit_id="162-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="163">
            <SegmentId>d239dd95-60e9-4b1f-ab7b-390795f020dd</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="163"
              trans_unit_id="163-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="164">
            <SegmentId>ae4ac54e-8faf-494d-8d01-a27be3f1e9fb</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="164"
              trans_unit_id="164-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="165">
            <SegmentId>f9457b50-4bb1-4f25-92de-89baaea230c1</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="165"
              trans_unit_id="165-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="165"
              trans_unit_id="165-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Row-Level Security: Blocking unauthorized INSERTs (blog)</internal_link_text>
              <internal_link_url>http://blogs.msdn.com/b/sqlsecurity/archive/2015/03/23/row-level-security-blocking-unauthorized-inserts</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="165"
              trans_unit_id="165-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="0cc03434-5350-4f03-a16e-60a9956fc4ca"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="0cc03434-5350-4f03-a16e-60a9956fc4ca">
        <Lines>
          <MarkdownLine>
            <LineId>06fa857f-50e6-4f60-87c4-f60d3c1a0268</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="166">
                <SegmentId>77dac12a-284d-4c3e-97d1-cbb639dba53a</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="166"
                  trans_unit_id="166-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="166">
            <SegmentId>77dac12a-284d-4c3e-97d1-cbb639dba53a</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="166"
              trans_unit_id="166-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="49a34fd0-fc5d-4d5d-8c3b-fc61aed05de5"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="49a34fd0-fc5d-4d5d-8c3b-fc61aed05de5">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>-- Create a scalar version of the predicate function for use in check constraints 
CREATE FUNCTION rls.fn_tenantAccessPredicateScalar(@TenantId int)     
    RETURNS bit 
AS     
    BEGIN     
        IF EXISTS( SELECT 1 FROM rls.fn_tenantAccessPredicate(@TenantId) )         
            RETURN 1     
        RETURN 0 
    END 
GO 

-- Add the function as a check constraint on all sharded tables 
ALTER TABLE Blogs     
    WITH NOCHECK -- don't check data already in table     
    ADD CONSTRAINT chk_blocking_Blogs -- needs a unique name     
    CHECK( rls.fn_tenantAccessPredicateScalar(TenantId) = 1 ) 
GO

ALTER TABLE Posts     
    WITH NOCHECK     
    ADD CONSTRAINT chk_blocking_Posts     
    CHECK( rls.fn_tenantAccessPredicateScalar(TenantId) = 1 ) 
GO </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="febcea93-307b-437f-8fee-4cbd9fb5c7bd"
        item_type="NormalParagraph"
        item_footer="&#xA;"
        trans_unit_id="febcea93-307b-437f-8fee-4cbd9fb5c7bd">
        <Lines>
          <MarkdownLine>
            <LineId>cab52542-1357-4520-96d2-acf8a40a7aa3</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="167">
                <SegmentId>16516e56-0da0-4a5d-b2db-8da9b91b9a94</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="167"
                  trans_unit_id="167-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="168">
                <SegmentId>4663cd8b-554e-40a3-92f7-4e8358cbaf4d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="168"
                  trans_unit_id="168-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="169">
                <SegmentId>51d364cc-f4cf-43f3-ba18-0b594b38294b</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="169"
                  trans_unit_id="169-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="167">
            <SegmentId>16516e56-0da0-4a5d-b2db-8da9b91b9a94</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="167"
              trans_unit_id="167-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="168">
            <SegmentId>4663cd8b-554e-40a3-92f7-4e8358cbaf4d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="168"
              trans_unit_id="168-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="169">
            <SegmentId>51d364cc-f4cf-43f3-ba18-0b594b38294b</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="169"
              trans_unit_id="169-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="7992b38e-58b3-48f7-8657-db1ec057d615"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="7992b38e-58b3-48f7-8657-db1ec057d615">
        <segment
          trans_unit_id="170">
          <SegmentId>7c2c3107-ef78-4011-b0a5-205d198857f2</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="170"
            trans_unit_id="170-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="8ce9be2a-2204-4ae5-9efd-ac040fa3a749"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="8ce9be2a-2204-4ae5-9efd-ac040fa3a749">
        <Lines>
          <MarkdownLine>
            <LineId>018e6d48-9710-4206-a59f-000499b6075a</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="171">
                <SegmentId>2760e354-4839-4a05-ac73-7f4042679fb7</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="171"
                  trans_unit_id="171-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="172">
                <SegmentId>9c5e7b51-0a6c-477c-96b6-05f05b096451</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="172"
                  trans_unit_id="172-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="171">
            <SegmentId>2760e354-4839-4a05-ac73-7f4042679fb7</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="171"
              trans_unit_id="171-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="172">
            <SegmentId>9c5e7b51-0a6c-477c-96b6-05f05b096451</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="172"
              trans_unit_id="172-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="7f164b29-1efb-4019-9069-8bb92eec9445"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="7f164b29-1efb-4019-9069-8bb92eec9445">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>-- Create default constraints to auto-populate TenantId with the value of CONTEXT_INFO for inserts 
ALTER TABLE Blogs     
    ADD CONSTRAINT df_TenantId_Blogs      
    DEFAULT CONVERT(int, CONVERT(varbinary(4), CONTEXT_INFO())) FOR TenantId 
GO

ALTER TABLE Posts     
    ADD CONSTRAINT df_TenantId_Posts      
    DEFAULT CONVERT(int, CONVERT(varbinary(4), CONTEXT_INFO())) FOR TenantId 
GO </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="205f626a-e45c-428f-9cb7-05c155821228"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="205f626a-e45c-428f-9cb7-05c155821228">
        <Lines>
          <MarkdownLine>
            <LineId>2139c331-d594-44da-80bd-ad60ee656908</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="173">
                <SegmentId>f9bdd914-783c-42d4-a72c-813883815fde</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="173"
                  trans_unit_id="173-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="173">
            <SegmentId>f9bdd914-783c-42d4-a72c-813883815fde</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="173"
              trans_unit_id="173-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="244c9a54-6135-4b4d-8a45-0aac668cb032"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="244c9a54-6135-4b4d-8a45-0aac668cb032">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>SqlDatabaseUtils.SqlRetryPolicy.ExecuteAction(() =&gt; 
{   
    using (var db = new ElasticScaleContext&lt;int&gt;(sharding.ShardMap, tenantId, connStrBldr.ConnectionString))
    {
        var blog = new Blog { Name = name }; // default constraint sets TenantId automatically     
        db.Blogs.Add(blog);     
        db.SaveChanges();   
    } 
}); </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownNoteBlock"
        item_id="dd0152c0-b2f1-40c3-b1bd-04a9d839da4d"
        item_type="Note"
        item_footer=""
        trans_unit_id="dd0152c0-b2f1-40c3-b1bd-04a9d839da4d">
        <Lines>
          <MarkdownLine>
            <LineId>35b1c1ca-2d7d-4d3e-8da6-985afcc7a850</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="174">
                <SegmentId>0215984d-540b-4e2c-9edb-db4d5604aee3</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="174"
                  trans_unit_id="174-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="175">
                <SegmentId>ad2d0cde-a38f-4cc3-ac6e-8bdc46376d76</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="175"
                  trans_unit_id="175-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="176">
                <SegmentId>53137cf1-f761-41a8-abe1-7c1396fef139</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="176"
                  trans_unit_id="176-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="177">
                <SegmentId>943f1d54-0f7a-40f4-a37a-72dbd85dae8e</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="177"
                  trans_unit_id="177-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>1</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <NoteSign>&gt; [AZURE.NOTE] </NoteSign>
        <Prefixes>
          <string />
        </Prefixes>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="174">
            <SegmentId>0215984d-540b-4e2c-9edb-db4d5604aee3</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="174"
              trans_unit_id="174-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="175">
            <SegmentId>ad2d0cde-a38f-4cc3-ac6e-8bdc46376d76</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="175"
              trans_unit_id="175-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="176">
            <SegmentId>53137cf1-f761-41a8-abe1-7c1396fef139</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="176"
              trans_unit_id="176-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="177">
            <SegmentId>943f1d54-0f7a-40f4-a37a-72dbd85dae8e</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="177"
              trans_unit_id="177-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="42af759f-74c9-41fb-8441-05544c777a35"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="42af759f-74c9-41fb-8441-05544c777a35">
        <segment
          trans_unit_id="178">
          <SegmentId>608b0ade-29c4-41a1-8500-bf1e6647c71f</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="178"
            trans_unit_id="178-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="36faade8-284b-4faa-9f09-0eff2f13f0c9"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="36faade8-284b-4faa-9f09-0eff2f13f0c9">
        <Lines>
          <MarkdownLine>
            <LineId>3cc787d9-0e73-4a31-8f83-7b776e96eeb2</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="179">
                <SegmentId>1a896433-7bca-4edd-92a5-88f39f11be1d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="179"
                  trans_unit_id="179-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="180">
                <SegmentId>e12bf332-e5f4-4e01-b6c9-b6dddb4fae86</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="180"
                  trans_unit_id="180-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="181">
                <SegmentId>5f820e0d-81d8-45ab-b254-10a4869fbbd7</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="181"
                  trans_unit_id="181-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="179">
            <SegmentId>1a896433-7bca-4edd-92a5-88f39f11be1d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="179"
              trans_unit_id="179-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="180">
            <SegmentId>e12bf332-e5f4-4e01-b6c9-b6dddb4fae86</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="180"
              trans_unit_id="180-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="181">
            <SegmentId>5f820e0d-81d8-45ab-b254-10a4869fbbd7</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="181"
              trans_unit_id="181-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="2549381d-8d74-4998-bc21-52fb9a71ba67"
        item_type="FencedCodeBlock"
        item_footer="&#xA;"
        trans_unit_id="2549381d-8d74-4998-bc21-52fb9a71ba67">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>-- New predicate function that adds superuser logic
CREATE FUNCTION rls.fn_tenantAccessPredicateWithSuperUser(@TenantId int)
    RETURNS TABLE
    WITH SCHEMABINDING
AS
    RETURN SELECT 1 AS fn_accessResult 
        WHERE 
        (
            DATABASE_PRINCIPAL_ID() = DATABASE_PRINCIPAL_ID('dbo') -- note, should not be dbo!
            AND CONVERT(int, CONVERT(varbinary(4), CONTEXT_INFO())) = @TenantId
        ) 
        OR
        (
            DATABASE_PRINCIPAL_ID() = DATABASE_PRINCIPAL_ID('superuser')
        )
GO

-- Atomically swap in the new predicate function on each table
ALTER SECURITY POLICY rls.tenantAccessPolicy
    ALTER FILTER PREDICATE rls.fn_tenantAccessPredicateWithSuperUser(TenantId) ON dbo.Blogs,
    ALTER FILTER PREDICATE rls.fn_tenantAccessPredicateWithSuperUser(TenantId) ON dbo.Posts
GO</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="43eee253-1499-479c-acf1-7dd992bac8c8"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="43eee253-1499-479c-acf1-7dd992bac8c8">
        <segment
          trans_unit_id="182">
          <SegmentId>54228dd5-649b-490b-b997-03bb67a7cd28</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="182"
            trans_unit_id="182-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="dc7b3872-719f-4cbe-ba02-d4d903e190d3"
        item_type="List"
        item_footer="&#xA;"
        trans_unit_id="dc7b3872-719f-4cbe-ba02-d4d903e190d3">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="7e211aa0-9209-410b-b2d8-50d2ed12712c"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="7e211aa0-9209-410b-b2d8-50d2ed12712c">
              <Lines>
                <MarkdownLine>
                  <LineId>dcb79e33-2146-478d-801a-dcc508d8d083</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="183">
                      <SegmentId>5a6e02e0-1b99-4f8d-b40c-5de939d5de1d</SegmentId>
                      <MarkdownInternalBoldItem
                        internal_item_id="1"
                        internal_item_parent_id="183"
                        trans_unit_id="183-1"
                        internal_item_type="Bold">
                        <internal_items />
                        <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                      </MarkdownInternalBoldItem>
                      <InternalNormalItem
                        internal_item_id="2"
                        internal_item_parent_id="183"
                        trans_unit_id="183-2"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="183">
                  <SegmentId>5a6e02e0-1b99-4f8d-b40c-5de939d5de1d</SegmentId>
                  <MarkdownInternalBoldItem
                    internal_item_id="1"
                    internal_item_parent_id="183"
                    trans_unit_id="183-1"
                    internal_item_type="Bold">
                    <internal_items />
                    <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                  </MarkdownInternalBoldItem>
                  <InternalNormalItem
                    internal_item_id="2"
                    internal_item_parent_id="183"
                    trans_unit_id="183-2"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="2178d118-f16c-4798-a939-9084de1eb7f0"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="2178d118-f16c-4798-a939-9084de1eb7f0">
              <Lines>
                <MarkdownLine>
                  <LineId>3e68e03a-92ef-41cc-bf4c-dfa06c289e54</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="184">
                      <SegmentId>c31b53e4-59d7-4d2b-a70b-e83d1707fc24</SegmentId>
                      <MarkdownInternalBoldItem
                        internal_item_id="1"
                        internal_item_parent_id="184"
                        trans_unit_id="184-1"
                        internal_item_type="Bold">
                        <internal_items />
                        <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                      </MarkdownInternalBoldItem>
                      <InternalNormalItem
                        internal_item_id="2"
                        internal_item_parent_id="184"
                        trans_unit_id="184-2"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                    <MarkdownSegment
                      trans_unit_id="185">
                      <SegmentId>363d2d21-2c36-447a-8b9d-2f0e80a04f1e</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="185"
                        trans_unit_id="185-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                      <LinkItem
                        internal_item_id="2"
                        internal_item_parent_id="185"
                        trans_unit_id="185-2"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Apply Row-Level Security automatically to newly created tables (blog)</internal_link_text>
                        <internal_link_url>http://blogs.msdn.com/b/sqlsecurity/archive/2015/05/22/apply-row-level-security-automatically-to-newly-created-tables.aspx</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                      <InternalNormalItem
                        internal_item_id="3"
                        internal_item_parent_id="185"
                        trans_unit_id="185-3"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="184">
                  <SegmentId>c31b53e4-59d7-4d2b-a70b-e83d1707fc24</SegmentId>
                  <MarkdownInternalBoldItem
                    internal_item_id="1"
                    internal_item_parent_id="184"
                    trans_unit_id="184-1"
                    internal_item_type="Bold">
                    <internal_items />
                    <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                  </MarkdownInternalBoldItem>
                  <InternalNormalItem
                    internal_item_id="2"
                    internal_item_parent_id="184"
                    trans_unit_id="184-2"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
                <MarkdownSegment
                  trans_unit_id="185">
                  <SegmentId>363d2d21-2c36-447a-8b9d-2f0e80a04f1e</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="185"
                    trans_unit_id="185-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                  <LinkItem
                    internal_item_id="2"
                    internal_item_parent_id="185"
                    trans_unit_id="185-2"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Apply Row-Level Security automatically to newly created tables (blog)</internal_link_text>
                    <internal_link_url>http://blogs.msdn.com/b/sqlsecurity/archive/2015/05/22/apply-row-level-security-automatically-to-newly-created-tables.aspx</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                  <InternalNormalItem
                    internal_item_id="3"
                    internal_item_parent_id="185"
                    trans_unit_id="185-3"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="0fced351-3b18-4b2a-bf42-afe0678136e7"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="0fced351-3b18-4b2a-bf42-afe0678136e7">
        <segment
          trans_unit_id="186">
          <SegmentId>afee3f2b-a9b9-4442-a951-0041fbbe99eb</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="186"
            trans_unit_id="186-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="14cdf4b6-9120-47d4-9073-424d797cbe4d"
        item_type="NormalParagraph"
        item_footer="&#xA;"
        trans_unit_id="14cdf4b6-9120-47d4-9073-424d797cbe4d">
        <Lines>
          <MarkdownLine>
            <LineId>66ec5d31-b222-428d-aa64-5c900cbfb8a5</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="187">
                <SegmentId>1038ac3a-c0f0-4f92-a01d-fcb8c9964aa8</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="187"
                  trans_unit_id="187-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="188">
                <SegmentId>d280abbb-4ecc-484d-bb1b-d6b66c6ff796</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="188"
                  trans_unit_id="188-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="189">
                <SegmentId>a80f2e2c-f089-4179-9c04-3bd5ce1887ee</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="189"
                  trans_unit_id="189-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="189"
                  trans_unit_id="189-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Elastic Database Tools Documentation Map</internal_link_text>
                  <internal_link_url>sql-database-elastic-scale-documentation-map.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="189"
                  trans_unit_id="189-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="4"
                  internal_item_parent_id="189"
                  trans_unit_id="189-4"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Row-Level Security reference</internal_link_text>
                  <internal_link_url>https://msdn.microsoft.com/library/dn765131</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="5"
                  internal_item_parent_id="189"
                  trans_unit_id="189-5"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="187">
            <SegmentId>1038ac3a-c0f0-4f92-a01d-fcb8c9964aa8</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="187"
              trans_unit_id="187-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="188">
            <SegmentId>d280abbb-4ecc-484d-bb1b-d6b66c6ff796</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="188"
              trans_unit_id="188-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="189">
            <SegmentId>a80f2e2c-f089-4179-9c04-3bd5ce1887ee</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="189"
              trans_unit_id="189-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="189"
              trans_unit_id="189-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Elastic Database Tools Documentation Map</internal_link_text>
              <internal_link_url>sql-database-elastic-scale-documentation-map.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="189"
              trans_unit_id="189-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="4"
              internal_item_parent_id="189"
              trans_unit_id="189-4"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Row-Level Security reference</internal_link_text>
              <internal_link_url>https://msdn.microsoft.com/library/dn765131</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="5"
              internal_item_parent_id="189"
              trans_unit_id="189-5"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="5609a19a-a171-43a8-a7d5-5924e84de76a"
        item_type="NormalParagraph"
        item_footer="&#xA;&#xA;&#xA;&#xA;&#xA;&#xA;&#xA;"
        trans_unit_id="5609a19a-a171-43a8-a7d5-5924e84de76a">
        <Lines>
          <MarkdownLine>
            <LineId>f89a07db-6181-4a8c-9b3e-90a27cc6c973</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="190">
                <SegmentId>42a5176a-ed45-4651-839f-0c9cc4cba1c1</SegmentId>
                <MarkdownInternalTokenItem
                  internal_item_id="1"
                  internal_item_parent_id="190"
                  trans_unit_id="190-1"
                  internal_item_type="Token">
                  <internal_items />
                  <TokenPrefix>AZURE.INCLUDE </TokenPrefix>
                  <TokenShortName>elastic-scale-include</TokenShortName>
                  <TokenHyperLink>../../includes/elastic-scale-include.md</TokenHyperLink>
                </MarkdownInternalTokenItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="190">
            <SegmentId>42a5176a-ed45-4651-839f-0c9cc4cba1c1</SegmentId>
            <MarkdownInternalTokenItem
              internal_item_id="1"
              internal_item_parent_id="190"
              trans_unit_id="190-1"
              internal_item_type="Token">
              <internal_items />
              <TokenPrefix>AZURE.INCLUDE </TokenPrefix>
              <TokenShortName>elastic-scale-include</TokenShortName>
              <TokenHyperLink>../../includes/elastic-scale-include.md</TokenHyperLink>
            </MarkdownInternalTokenItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
    </ArrayOfMarkdownBlockBase>
  </block_element>
  <references>
    <ArrayOfMarkdownLinkedReference xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownLinkedReference
        item_id="b6ab795e-98c5-4989-bebd-bde26152aff1"
        item_type="LinkedReference"
        item_footer="footer_not_set"
        trans_unit_id="b6ab795e-98c5-4989-bebd-bde26152aff1">
        <link_id>1</link_id>
        <link_uri>./media/sql-database-elastic-tools-multi-tenant-row-level-security/blogging-app.png</link_uri>
        <link_title />
      </MarkdownLinkedReference>
    </ArrayOfMarkdownLinkedReference>
  </references>
</markdown_skeleton_root>