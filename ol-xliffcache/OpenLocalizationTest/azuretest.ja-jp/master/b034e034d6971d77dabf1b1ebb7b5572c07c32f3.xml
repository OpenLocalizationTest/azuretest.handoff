<markdown_skeleton_root>
  <block_element>
    <ArrayOfMarkdownBlockBase xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownBlockBase
        xsi:type="MarkdownAzureMetadataBlock"
        item_id="d1c0c143-6e74-4a70-b8ae-fbf0587be739"
        item_type="AzureMetadata"
        item_footer="footer_not_set"
        trans_unit_id="d1c0c143-6e74-4a70-b8ae-fbf0587be739">
        <LocalizeItemList>
          <MarkdownInternalXmlItem
            internal_item_id="9c617985-b492-4aa0-ac43-9212deb1642e"
            trans_unit_id="101"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
          <MarkdownInternalXmlItem
            internal_item_id="1ef04a75-da82-4a24-adb6-7f855baed8ba"
            trans_unit_id="102"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
        </LocalizeItemList>
        <ItemValue>&lt;properties
   pageTitle="9c617985-b492-4aa0-ac43-9212deb1642e"
   description="1ef04a75-da82-4a24-adb6-7f855baed8ba"
   services="service-fabric"
   documentationCenter=".net"
   authors="jessebenson"
   manager="timlt"
   editor=""/&gt;

&lt;tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="08/05/2015"
   ms.author="claudioc"/&gt;

</ItemValue>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="0a63c49c-6909-4905-a8d2-51ddad5314a8"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="0a63c49c-6909-4905-a8d2-51ddad5314a8">
        <segment
          trans_unit_id="103">
          <SegmentId>111f96c0-868a-458a-9ecd-4111a8633c58</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="103"
            trans_unit_id="103-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>1</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="2113540f-79b0-43ca-87a6-e600b0ee5ae8"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="2113540f-79b0-43ca-87a6-e600b0ee5ae8">
        <Lines>
          <MarkdownLine>
            <LineId>b244ec41-d963-4f88-a6db-6b81a00639d6</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="104">
                <SegmentId>a26d410a-4a67-4bc8-babd-f3c6250b10ec</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="104"
                  trans_unit_id="104-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="104">
            <SegmentId>a26d410a-4a67-4bc8-babd-f3c6250b10ec</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="104"
              trans_unit_id="104-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="6de1868d-a37b-4e9e-b989-76aa496ea75c"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="6de1868d-a37b-4e9e-b989-76aa496ea75c">
        <Lines>
          <MarkdownLine>
            <LineId>b942e4de-9697-4dc9-be76-a1c17668379d</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="105">
                <SegmentId>b0eea631-0f02-43bf-9010-b045393d4c52</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="105"
                  trans_unit_id="105-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="105">
            <SegmentId>b0eea631-0f02-43bf-9010-b045393d4c52</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="105"
              trans_unit_id="105-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="29521780-60ad-4dc1-ab88-45bbbac62b41"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="29521780-60ad-4dc1-ab88-45bbbac62b41">
        <Lines>
          <MarkdownLine>
            <LineId>2002c5ed-2747-449f-99b9-f87195b64c65</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="106">
                <SegmentId>55b37cb8-76f1-4bdc-b1d9-aa3caca0be8e</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="106"
                  trans_unit_id="106-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="106">
            <SegmentId>55b37cb8-76f1-4bdc-b1d9-aa3caca0be8e</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="106"
              trans_unit_id="106-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="9a8348b6-63ac-4df4-a3d3-8e47f66c8b62"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="9a8348b6-63ac-4df4-a3d3-8e47f66c8b62">
        <Lines>
          <MarkdownLine>
            <LineId>65c5052b-3db0-486b-bb74-44506647a44a</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="107">
                <SegmentId>46ba33c5-ee06-4350-80a3-d31f07df7398</SegmentId>
                <ImageItem
                  internal_item_id="1"
                  internal_item_parent_id="107"
                  trans_unit_id="107-1"
                  internal_item_type="Image">
                  <internal_items />
                  <internal_Image_type>Reference</internal_Image_type>
                  <internal_link_text />
                  <internal_link_id>1</internal_link_id>
                </ImageItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="107">
            <SegmentId>46ba33c5-ee06-4350-80a3-d31f07df7398</SegmentId>
            <ImageItem
              internal_item_id="1"
              internal_item_parent_id="107"
              trans_unit_id="107-1"
              internal_item_type="Image">
              <internal_items />
              <internal_Image_type>Reference</internal_Image_type>
              <internal_link_text />
              <internal_link_id>1</internal_link_id>
            </ImageItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="88224723-68de-47ac-845d-f801efa6327a"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="88224723-68de-47ac-845d-f801efa6327a">
        <Lines>
          <MarkdownLine>
            <LineId>ddec1031-8ade-4646-9fe7-300ff2c4f2db</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="108">
                <SegmentId>f8ac864e-f94b-4099-8b13-3cd2747c2d36</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="108"
                  trans_unit_id="108-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="109">
                <SegmentId>2d128f19-c9f6-4e87-8a9f-45e209911762</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="109"
                  trans_unit_id="109-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="108">
            <SegmentId>f8ac864e-f94b-4099-8b13-3cd2747c2d36</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="108"
              trans_unit_id="108-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="109">
            <SegmentId>2d128f19-c9f6-4e87-8a9f-45e209911762</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="109"
              trans_unit_id="109-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="61e4a8ae-8902-473b-a41a-4a4b9251f381"
        item_type="List"
        item_footer=""
        trans_unit_id="61e4a8ae-8902-473b-a41a-4a4b9251f381">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="189bd4b0-479a-489e-9971-25859deed297"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="189bd4b0-479a-489e-9971-25859deed297">
              <Lines>
                <MarkdownLine>
                  <LineId>650a2436-1acd-44e9-bb87-c51a3a847ea4</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="110">
                      <SegmentId>58a9df39-fc67-46fe-973a-ffb2e331faa2</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="110"
                        trans_unit_id="110-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="110">
                  <SegmentId>58a9df39-fc67-46fe-973a-ffb2e331faa2</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="110"
                    trans_unit_id="110-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="df7ab292-2512-406e-b6ee-a17976fb5d2b"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="df7ab292-2512-406e-b6ee-a17976fb5d2b">
              <Lines>
                <MarkdownLine>
                  <LineId>dc6bf0d1-34ff-4ac7-a001-96536bb4de8c</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="111">
                      <SegmentId>30626a2f-70d6-4f81-9477-f4c3be7d873e</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="111"
                        trans_unit_id="111-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="111">
                  <SegmentId>30626a2f-70d6-4f81-9477-f4c3be7d873e</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="111"
                    trans_unit_id="111-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="b80cff82-721c-468e-b859-078f7fae8dd3"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="b80cff82-721c-468e-b859-078f7fae8dd3">
              <Lines>
                <MarkdownLine>
                  <LineId>8293609d-3169-44d1-b7ab-4cad54c7a4bf</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="112">
                      <SegmentId>dd3f9612-c310-4393-875b-ce1efb60a690</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="112"
                        trans_unit_id="112-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="112">
                  <SegmentId>dd3f9612-c310-4393-875b-ce1efb60a690</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="112"
                    trans_unit_id="112-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="38017ff0-7e03-407a-a308-1968cdc6a661"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="38017ff0-7e03-407a-a308-1968cdc6a661">
              <Lines>
                <MarkdownLine>
                  <LineId>9e25333f-a068-4bf7-b975-0bc3ccd8daf6</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="113">
                      <SegmentId>b385a2cf-0cc4-4d01-a1a0-5f2c45819c4c</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="113"
                        trans_unit_id="113-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="113">
                  <SegmentId>b385a2cf-0cc4-4d01-a1a0-5f2c45819c4c</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="113"
                    trans_unit_id="113-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="cbb577bb-eee0-45b9-af71-3f3ee4863af1"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="cbb577bb-eee0-45b9-af71-3f3ee4863af1">
        <segment
          trans_unit_id="114">
          <SegmentId>b92de33f-6c09-4949-9a79-c25fff8ce0d4</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="114"
            trans_unit_id="114-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="ef4dd383-1f39-474a-bf5e-1982560582a6"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="ef4dd383-1f39-474a-bf5e-1982560582a6">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface IProcessor : IActor
{
    Task ProcessAsync(int tries, int seed, int taskCount);
}

public class Processor : Actor, IProcessor
{
    public Task ProcessAsync(int tries, int seed, int taskCount)
    {
        var tasks = new List&lt;Task&gt;();
        for (int i = 0; i &lt; taskCount; i++)
        {
            var task = ActorProxy.Create&lt;IPooledTask&gt;(0); // stateless
            tasks.Add(task.CalculateAsync(tries, seed));
        }
        return Task.WhenAll(tasks);
    }
}

public interface IPooledTask : IActor
{
    Task CalculateAsync(int tries, int seed);
}

public class PooledTask : Actor, IPooledTask
{
    public Task CalculateAsync(int tries, int seed)
    {
        var pi = new Pi()
        {
            InCircle = 0,
            Tries = tries
        };

        var random = new Random(seed);
        double x, y;
        for (int i = 0; i &lt; tries; i++)
        {
            x = random.NextDouble();
            y = random.NextDouble();
            if (Math.Sqrt(x * x + y * y) &lt;= 1)
                pi.InCircle++;
        }

        var agg = ActorProxy.Create&lt;IAggregator&gt;(ActorId.NewId());
        return agg.AggregateAsync(pi);
    }
}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="68bf3a4c-1478-4d76-8b69-d49eb0a15189"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="68bf3a4c-1478-4d76-8b69-d49eb0a15189">
        <Lines>
          <MarkdownLine>
            <LineId>b1ce2c06-23b6-4e92-b86b-84ee57d3c4a8</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="115">
                <SegmentId>0363a4a9-108d-4c09-9be7-f41aed1ed88d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="115"
                  trans_unit_id="115-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="116">
                <SegmentId>63b0850a-4945-4621-861f-e01633cf8f44</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="116"
                  trans_unit_id="116-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>879a1d5d-16b0-4512-8f0f-83a12bd8fd5f</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="117">
                <SegmentId>8746417c-de26-45b2-9a9e-ee4650959e8d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="117"
                  trans_unit_id="117-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="115">
            <SegmentId>0363a4a9-108d-4c09-9be7-f41aed1ed88d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="115"
              trans_unit_id="115-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="116">
            <SegmentId>63b0850a-4945-4621-861f-e01633cf8f44</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="116"
              trans_unit_id="116-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="117">
            <SegmentId>8746417c-de26-45b2-9a9e-ee4650959e8d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="117"
              trans_unit_id="117-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="3c207359-c988-40a3-b135-5c655aeceedd"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="3c207359-c988-40a3-b135-5c655aeceedd">
        <segment
          trans_unit_id="118">
          <SegmentId>fc7fa1c1-42dc-4071-901e-46319955e2a8</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="118"
            trans_unit_id="118-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="27678d39-59b6-4859-8a3d-fbc9a2c72be9"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="27678d39-59b6-4859-8a3d-fbc9a2c72be9">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface IAggregator : IActor
{
    Task AggregateAsync(Pi pi);
}

[DataContract]
class AggregatorState
{
    [DataMember]
    public Pi _pi;
    [DataMember]
    public bool _pending;
}

public class Aggregator : Actor&lt;AggregatorState&gt;, IAggregator
{
    public override Task OnActivateAsync()
    {
        State._pi = new Pi() { InCircle = 0, Tries = 0 };
        State._pending = false;

        this.RegisterTimer(
            ProcessAsync,
            null,
            TimeSpan.FromSeconds(5),
            TimeSpan.FromSeconds(5));

        return base.OnActivateAsync();
    }

    private async Task ProcessAsync(object obj)
    {
        if (false == _pending)
            return;

        var finaliser = ActorProxy.Create&lt;IFinaliser&gt;(0);
        await finaliser.FinaliseAsync(_pi);
        State._pending = false;
        State._pi.InCircle = 0;
        State._pi.Tries = 0;
    }

    public Task AggregateAsync(Pi pi)
    {
        State._pi.InCircle += pi.InCircle;
        State._pi.Tries += pi.Tries;
        State._pending = true;
        return TaskDone.Done;
    }
}

public interface IFinaliser : IActor
{
    Task FinaliseAsync(Pi pi);
}

[DataContract]
class FinalizerState
{
    [DataMember]
    public Pi _pi;
}

public class Finaliser : Actor&lt;FinalizerState&gt;, IFinaliser
{
    public override Task OnActivateAsync()
    {
        State._pi = new Pi()
        {
            InCircle = 0,
            Tries = 0
        };

        return base.OnActivateAsync();
    }

    public Task FinaliseAsync(Pi pi)
    {
        State._pi.InCircle += pi.InCircle;
        State._pi.Tries += pi.Tries;
        Console.WriteLine(" Pi = {0:N9}  T = {1:N0}, {2}",(double)State._pi.InCircle / (double)State._pi.Tries * 4.0, State._pi.Tries, State._pi.InCircle);

        return TaskDone.Done;
    }
}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="966f5e6b-d572-4338-b648-bd5bfadf564d"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="966f5e6b-d572-4338-b648-bd5bfadf564d">
        <Lines>
          <MarkdownLine>
            <LineId>4a5201a6-6ef8-4c3d-947f-1cedf888d660</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="119">
                <SegmentId>dc3b411a-ce17-4b84-9323-1678eebb07ec</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="119"
                  trans_unit_id="119-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="119">
            <SegmentId>dc3b411a-ce17-4b84-9323-1678eebb07ec</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="119"
              trans_unit_id="119-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="cd522abd-d1dd-4388-825d-55a6edef78e4"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="cd522abd-d1dd-4388-825d-55a6edef78e4">
        <Lines>
          <MarkdownLine>
            <LineId>b8b0092f-04f5-4c4e-8cfe-6bd2f99434be</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="120">
                <SegmentId>bdd417e8-bcc0-49f3-9abb-3ed2c7560049</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="120"
                  trans_unit_id="120-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="121">
                <SegmentId>263b8e1d-98ea-4a3a-a813-28026be1c1b2</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="121"
                  trans_unit_id="121-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="122">
                <SegmentId>fa0947ff-11ca-48a1-9ef3-804df74fe9aa</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="122"
                  trans_unit_id="122-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="120">
            <SegmentId>bdd417e8-bcc0-49f3-9abb-3ed2c7560049</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="120"
              trans_unit_id="120-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="121">
            <SegmentId>263b8e1d-98ea-4a3a-a813-28026be1c1b2</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="121"
              trans_unit_id="121-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="122">
            <SegmentId>fa0947ff-11ca-48a1-9ef3-804df74fe9aa</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="122"
              trans_unit_id="122-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="54ef7177-9c15-4359-9715-808eeef32b43"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="54ef7177-9c15-4359-9715-808eeef32b43">
        <segment
          trans_unit_id="123">
          <SegmentId>e705af53-36b8-4742-be77-7c35ec211bd0</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="123"
            trans_unit_id="123-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="c9f1e2bc-aeeb-48c9-95e9-7619b4234181"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="c9f1e2bc-aeeb-48c9-95e9-7619b4234181">
        <Lines>
          <MarkdownLine>
            <LineId>7013372f-b87d-46bb-8469-1a81ff6160e5</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="124">
                <SegmentId>0691302d-841d-4d55-b802-0982b543834e</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="124"
                  trans_unit_id="124-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Smart Cache</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="124">
            <SegmentId>0691302d-841d-4d55-b802-0982b543834e</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="124"
              trans_unit_id="124-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Smart Cache</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="c283e6a5-1d3a-4a14-801a-0ab170b8effa"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="c283e6a5-1d3a-4a14-801a-0ab170b8effa">
        <Lines>
          <MarkdownLine>
            <LineId>73f06e2c-0ce9-4425-bff3-dd2fc66a70e0</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="125">
                <SegmentId>da54d9fb-9895-4d04-920f-7c0d96d57c26</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="125"
                  trans_unit_id="125-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Distributed Networks and Graphs</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-distributed-networks-and-graphs.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="125">
            <SegmentId>da54d9fb-9895-4d04-920f-7c0d96d57c26</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="125"
              trans_unit_id="125-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Distributed Networks and Graphs</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-distributed-networks-and-graphs.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="ef4c441e-771b-40b1-96b2-34222bc28ee7"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="ef4c441e-771b-40b1-96b2-34222bc28ee7">
        <Lines>
          <MarkdownLine>
            <LineId>85253a8e-84be-43bf-af16-4935b535bf6f</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="126">
                <SegmentId>c77904ba-73c0-446d-891d-6045ad25c2ad</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="126"
                  trans_unit_id="126-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Resource Governance</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="126">
            <SegmentId>c77904ba-73c0-446d-891d-6045ad25c2ad</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="126"
              trans_unit_id="126-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Resource Governance</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="fb6e4dd9-84d6-426e-b31f-b6eac954ff10"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="fb6e4dd9-84d6-426e-b31f-b6eac954ff10">
        <Lines>
          <MarkdownLine>
            <LineId>680c25cd-6ce8-44b4-8a4c-c4b9aadc8326</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="127">
                <SegmentId>ad8d9aa1-96c3-4c33-af0c-7808ebc07dda</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="127"
                  trans_unit_id="127-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="127">
            <SegmentId>ad8d9aa1-96c3-4c33-af0c-7808ebc07dda</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="127"
              trans_unit_id="127-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="4b764f2c-cea7-41a0-bcae-346c1ec22226"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="4b764f2c-cea7-41a0-bcae-346c1ec22226">
        <Lines>
          <MarkdownLine>
            <LineId>54f92074-44a8-48e3-9ba3-9c573d2b3bac</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="128">
                <SegmentId>0e3614b8-be7d-45d6-93a0-ffd50c571b25</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="128"
                  trans_unit_id="128-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Internet of Things</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="128">
            <SegmentId>0e3614b8-be7d-45d6-93a0-ffd50c571b25</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="128"
              trans_unit_id="128-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Internet of Things</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="f4c4397d-59c8-4289-adda-d7429c04ba2a"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="f4c4397d-59c8-4289-adda-d7429c04ba2a">
        <Lines>
          <MarkdownLine>
            <LineId>dd4bf06e-78a1-4364-a783-9eebf80586ab</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="129">
                <SegmentId>4f53ca47-34c2-49f8-abd6-6ddb4f751e3d</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="129"
                  trans_unit_id="129-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Some Anti-patterns</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="129">
            <SegmentId>4f53ca47-34c2-49f8-abd6-6ddb4f751e3d</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="129"
              trans_unit_id="129-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Some Anti-patterns</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="b638f575-98bb-40cd-a46f-b46beb61a616"
        item_type="NormalParagraph"
        item_footer="&#xA;&#xA;"
        trans_unit_id="b638f575-98bb-40cd-a46f-b46beb61a616">
        <Lines>
          <MarkdownLine>
            <LineId>9395c09f-3efb-4b3c-a0c8-885422bf05a3</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="130">
                <SegmentId>458ef4ec-a363-49c7-843f-70d058dcec9d</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="130"
                  trans_unit_id="130-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="130">
            <SegmentId>458ef4ec-a363-49c7-843f-70d058dcec9d</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="130"
              trans_unit_id="130-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
    </ArrayOfMarkdownBlockBase>
  </block_element>
  <references>
    <ArrayOfMarkdownLinkedReference xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownLinkedReference
        item_id="d7f83edf-0dc9-4bca-aea2-080387f89536"
        item_type="LinkedReference"
        item_footer="footer_not_set"
        trans_unit_id="d7f83edf-0dc9-4bca-aea2-080387f89536">
        <link_id>1</link_id>
        <link_uri>./media/service-fabric-reliable-actors-pattern-distributed-computation/distributed-computation-1.png</link_uri>
        <link_title />
      </MarkdownLinkedReference>
    </ArrayOfMarkdownLinkedReference>
  </references>
</markdown_skeleton_root>