<markdown_skeleton_root>
  <block_element>
    <ArrayOfMarkdownBlockBase xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownBlockBase
        xsi:type="MarkdownAzureMetadataBlock"
        item_id="546a148f-c6d1-4d1d-930c-0b119950a57a"
        item_type="AzureMetadata"
        item_footer="footer_not_set"
        trans_unit_id="546a148f-c6d1-4d1d-930c-0b119950a57a">
        <LocalizeItemList>
          <MarkdownInternalXmlItem
            internal_item_id="13e8202c-c46f-488f-9df2-21eed65f12a2"
            trans_unit_id="101"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
          <MarkdownInternalXmlItem
            internal_item_id="70316fe5-7046-4f60-84f8-765e375d69c9"
            trans_unit_id="102"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
        </LocalizeItemList>
        <ItemValue>&lt;properties
   pageTitle="13e8202c-c46f-488f-9df2-21eed65f12a2"
   description="70316fe5-7046-4f60-84f8-765e375d69c9"
   services="service-fabric"
   documentationCenter=".net"
   authors="jessebenson"
   manager="timlt"
   editor=""/&gt;

&lt;tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="08/05/2015"
   ms.author="claudioc"/&gt;

</ItemValue>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="141a4ddb-6253-4dd7-8dbd-783b318b8871"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="141a4ddb-6253-4dd7-8dbd-783b318b8871">
        <segment
          trans_unit_id="103">
          <SegmentId>ddb776da-b86c-4862-9c4b-d9dd782f5621</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="103"
            trans_unit_id="103-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>1</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="b8ff16ec-cc26-4a98-8d2f-e5baa537ce9e"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="b8ff16ec-cc26-4a98-8d2f-e5baa537ce9e">
        <Lines>
          <MarkdownLine>
            <LineId>7a99c2d5-ba3b-4717-b120-4f208ec28b02</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="104">
                <SegmentId>9f878ae7-46b2-4509-aeed-fc680f7f2a9d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="104"
                  trans_unit_id="104-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="104">
            <SegmentId>9f878ae7-46b2-4509-aeed-fc680f7f2a9d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="104"
              trans_unit_id="104-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="e9e55468-6185-4cc6-9e28-c4ef9992ffaa"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="e9e55468-6185-4cc6-9e28-c4ef9992ffaa">
        <Lines>
          <MarkdownLine>
            <LineId>5f891ab4-545a-4e13-9a69-4bdee577f93b</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="105">
                <SegmentId>2301be8f-55f4-4c6e-b38b-44bb85c86f77</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="105"
                  trans_unit_id="105-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="105">
            <SegmentId>2301be8f-55f4-4c6e-b38b-44bb85c86f77</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="105"
              trans_unit_id="105-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="533e09f2-ddc1-4913-82d4-a67253c5972f"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="533e09f2-ddc1-4913-82d4-a67253c5972f">
        <Lines>
          <MarkdownLine>
            <LineId>5efa199f-e191-4eec-8af1-16b071eb69af</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="106">
                <SegmentId>70823288-14f1-4aa1-94c9-03b5b67dcd20</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="106"
                  trans_unit_id="106-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="106">
            <SegmentId>70823288-14f1-4aa1-94c9-03b5b67dcd20</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="106"
              trans_unit_id="106-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="af04f49e-0635-4643-b6a7-cab1c0df6afb"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="af04f49e-0635-4643-b6a7-cab1c0df6afb">
        <Lines>
          <MarkdownLine>
            <LineId>cf1c0330-0a07-4803-a342-65d1f7c667cb</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="107">
                <SegmentId>29df58d9-c126-4f49-8466-8020315b767d</SegmentId>
                <ImageItem
                  internal_item_id="1"
                  internal_item_parent_id="107"
                  trans_unit_id="107-1"
                  internal_item_type="Image">
                  <internal_items />
                  <internal_Image_type>Reference</internal_Image_type>
                  <internal_link_text />
                  <internal_link_id>1</internal_link_id>
                </ImageItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="107">
            <SegmentId>29df58d9-c126-4f49-8466-8020315b767d</SegmentId>
            <ImageItem
              internal_item_id="1"
              internal_item_parent_id="107"
              trans_unit_id="107-1"
              internal_item_type="Image">
              <internal_items />
              <internal_Image_type>Reference</internal_Image_type>
              <internal_link_text />
              <internal_link_id>1</internal_link_id>
            </ImageItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="638a2990-9a0e-4ab9-b2c6-4d13b0ec8e65"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="638a2990-9a0e-4ab9-b2c6-4d13b0ec8e65">
        <Lines>
          <MarkdownLine>
            <LineId>67c5b57b-c2c5-4ba3-bcb1-c48d7aaedc2c</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="108">
                <SegmentId>2ca0010c-29ec-44d7-b64e-e6d55ef31015</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="108"
                  trans_unit_id="108-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="109">
                <SegmentId>465286e8-e56d-433d-a80a-6416270c7a1c</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="109"
                  trans_unit_id="109-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="108">
            <SegmentId>2ca0010c-29ec-44d7-b64e-e6d55ef31015</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="108"
              trans_unit_id="108-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="109">
            <SegmentId>465286e8-e56d-433d-a80a-6416270c7a1c</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="109"
              trans_unit_id="109-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="afe918fb-6b45-438a-8325-a48258cb40cc"
        item_type="List"
        item_footer=""
        trans_unit_id="afe918fb-6b45-438a-8325-a48258cb40cc">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="db9220f3-753b-44fa-ac66-af32d2e4d99c"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="db9220f3-753b-44fa-ac66-af32d2e4d99c">
              <Lines>
                <MarkdownLine>
                  <LineId>0b74f0cb-b851-4f51-a675-402935cee83e</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="110">
                      <SegmentId>8f8c7fd4-c200-4f00-bf81-d3de2c9583e4</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="110"
                        trans_unit_id="110-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="110">
                  <SegmentId>8f8c7fd4-c200-4f00-bf81-d3de2c9583e4</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="110"
                    trans_unit_id="110-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="4cbe68d3-ed9d-43cc-8ca3-a5739d779797"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="4cbe68d3-ed9d-43cc-8ca3-a5739d779797">
              <Lines>
                <MarkdownLine>
                  <LineId>5291889f-441b-4b36-8670-edf7bc73089a</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="111">
                      <SegmentId>14ee2f07-84cf-419c-ae18-72db9b71fc50</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="111"
                        trans_unit_id="111-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="111">
                  <SegmentId>14ee2f07-84cf-419c-ae18-72db9b71fc50</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="111"
                    trans_unit_id="111-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="0bea2e12-3402-4d40-848b-516da2c31090"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="0bea2e12-3402-4d40-848b-516da2c31090">
              <Lines>
                <MarkdownLine>
                  <LineId>94b3867e-8e6f-4740-9126-72c171e0f012</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="112">
                      <SegmentId>d4225800-3ab5-4e2c-88a3-be43449bb2e5</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="112"
                        trans_unit_id="112-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="112">
                  <SegmentId>d4225800-3ab5-4e2c-88a3-be43449bb2e5</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="112"
                    trans_unit_id="112-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="59dd0383-3741-459b-8eba-925481cb64b2"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="59dd0383-3741-459b-8eba-925481cb64b2">
              <Lines>
                <MarkdownLine>
                  <LineId>c58193db-ebd1-4ecd-bc72-335ec5c16e2a</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="113">
                      <SegmentId>a81d1528-7b3e-4e43-9f5a-126bc916b339</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="113"
                        trans_unit_id="113-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="113">
                  <SegmentId>a81d1528-7b3e-4e43-9f5a-126bc916b339</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="113"
                    trans_unit_id="113-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="a83ccd1a-0df2-4099-a66b-b147506cd8ae"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="a83ccd1a-0df2-4099-a66b-b147506cd8ae">
        <segment
          trans_unit_id="114">
          <SegmentId>102188fa-ed73-4453-b1f1-1fd54a18ea67</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="114"
            trans_unit_id="114-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="a21e43f4-8cfa-4498-88a2-f571c9124057"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="a21e43f4-8cfa-4498-88a2-f571c9124057">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface IProcessor : IActor
{
    Task ProcessAsync(int tries, int seed, int taskCount);
}

public class Processor : Actor, IProcessor
{
    public Task ProcessAsync(int tries, int seed, int taskCount)
    {
        var tasks = new List&lt;Task&gt;();
        for (int i = 0; i &lt; taskCount; i++)
        {
            var task = ActorProxy.Create&lt;IPooledTask&gt;(0); // stateless
            tasks.Add(task.CalculateAsync(tries, seed));
        }
        return Task.WhenAll(tasks);
    }
}

public interface IPooledTask : IActor
{
    Task CalculateAsync(int tries, int seed);
}

public class PooledTask : Actor, IPooledTask
{
    public Task CalculateAsync(int tries, int seed)
    {
        var pi = new Pi()
        {
            InCircle = 0,
            Tries = tries
        };

        var random = new Random(seed);
        double x, y;
        for (int i = 0; i &lt; tries; i++)
        {
            x = random.NextDouble();
            y = random.NextDouble();
            if (Math.Sqrt(x * x + y * y) &lt;= 1)
                pi.InCircle++;
        }

        var agg = ActorProxy.Create&lt;IAggregator&gt;(ActorId.NewId());
        return agg.AggregateAsync(pi);
    }
}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="36d04966-08f8-4203-b1ea-54ac8f774392"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="36d04966-08f8-4203-b1ea-54ac8f774392">
        <Lines>
          <MarkdownLine>
            <LineId>0768546e-ed98-4f7e-b685-5c10089748ff</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="115">
                <SegmentId>ae41f55f-9805-4add-be3e-eab9f4997d24</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="115"
                  trans_unit_id="115-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="116">
                <SegmentId>c8c8bad1-f0fb-44d0-a42f-57e06029bc4a</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="116"
                  trans_unit_id="116-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>76137d87-622c-4917-819f-a8c5651f772b</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="117">
                <SegmentId>d2cb61bc-4584-4de1-8927-1e6e34787966</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="117"
                  trans_unit_id="117-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="115">
            <SegmentId>ae41f55f-9805-4add-be3e-eab9f4997d24</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="115"
              trans_unit_id="115-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="116">
            <SegmentId>c8c8bad1-f0fb-44d0-a42f-57e06029bc4a</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="116"
              trans_unit_id="116-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="117">
            <SegmentId>d2cb61bc-4584-4de1-8927-1e6e34787966</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="117"
              trans_unit_id="117-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="968a51a8-359f-437d-a243-a7111d80bb29"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="968a51a8-359f-437d-a243-a7111d80bb29">
        <segment
          trans_unit_id="118">
          <SegmentId>70b93fe0-16b4-472e-a95c-afe7fbb32f06</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="118"
            trans_unit_id="118-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="d4cc08dd-b13b-43e2-90ee-8af6656f595c"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="d4cc08dd-b13b-43e2-90ee-8af6656f595c">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface IAggregator : IActor
{
    Task AggregateAsync(Pi pi);
}

[DataContract]
class AggregatorState
{
    [DataMember]
    public Pi _pi;
    [DataMember]
    public bool _pending;
}

public class Aggregator : Actor&lt;AggregatorState&gt;, IAggregator
{
    public override Task OnActivateAsync()
    {
        State._pi = new Pi() { InCircle = 0, Tries = 0 };
        State._pending = false;

        this.RegisterTimer(
            ProcessAsync,
            null,
            TimeSpan.FromSeconds(5),
            TimeSpan.FromSeconds(5));

        return base.OnActivateAsync();
    }

    private async Task ProcessAsync(object obj)
    {
        if (false == _pending)
            return;

        var finaliser = ActorProxy.Create&lt;IFinaliser&gt;(0);
        await finaliser.FinaliseAsync(_pi);
        State._pending = false;
        State._pi.InCircle = 0;
        State._pi.Tries = 0;
    }

    public Task AggregateAsync(Pi pi)
    {
        State._pi.InCircle += pi.InCircle;
        State._pi.Tries += pi.Tries;
        State._pending = true;
        return TaskDone.Done;
    }
}

public interface IFinaliser : IActor
{
    Task FinaliseAsync(Pi pi);
}

[DataContract]
class FinalizerState
{
    [DataMember]
    public Pi _pi;
}

public class Finaliser : Actor&lt;FinalizerState&gt;, IFinaliser
{
    public override Task OnActivateAsync()
    {
        State._pi = new Pi()
        {
            InCircle = 0,
            Tries = 0
        };

        return base.OnActivateAsync();
    }

    public Task FinaliseAsync(Pi pi)
    {
        State._pi.InCircle += pi.InCircle;
        State._pi.Tries += pi.Tries;
        Console.WriteLine(" Pi = {0:N9}  T = {1:N0}, {2}",(double)State._pi.InCircle / (double)State._pi.Tries * 4.0, State._pi.Tries, State._pi.InCircle);

        return TaskDone.Done;
    }
}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="41870e17-a686-4fa3-8043-846b119eabad"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="41870e17-a686-4fa3-8043-846b119eabad">
        <Lines>
          <MarkdownLine>
            <LineId>c7f5a768-bb07-4a44-b306-755f68e744e2</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="119">
                <SegmentId>3b6984df-0d8c-47e1-b083-29e0e8ba4d96</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="119"
                  trans_unit_id="119-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="119">
            <SegmentId>3b6984df-0d8c-47e1-b083-29e0e8ba4d96</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="119"
              trans_unit_id="119-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="16d305a3-9eac-4573-b24e-6846dee00f40"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="16d305a3-9eac-4573-b24e-6846dee00f40">
        <Lines>
          <MarkdownLine>
            <LineId>37c911ff-a15a-4ab4-9b96-53de8a52523f</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="120">
                <SegmentId>8546d9c8-fc47-4f6d-a40f-4f1f9fbf3206</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="120"
                  trans_unit_id="120-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="121">
                <SegmentId>6b347f8f-4bd9-4262-9d02-8e6e2787539a</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="121"
                  trans_unit_id="121-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="122">
                <SegmentId>f2cdfde5-c203-49d2-a67e-17669f6f211c</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="122"
                  trans_unit_id="122-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="120">
            <SegmentId>8546d9c8-fc47-4f6d-a40f-4f1f9fbf3206</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="120"
              trans_unit_id="120-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="121">
            <SegmentId>6b347f8f-4bd9-4262-9d02-8e6e2787539a</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="121"
              trans_unit_id="121-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="122">
            <SegmentId>f2cdfde5-c203-49d2-a67e-17669f6f211c</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="122"
              trans_unit_id="122-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="990d6808-12a8-4512-b98d-b6fc96b9e59e"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="990d6808-12a8-4512-b98d-b6fc96b9e59e">
        <segment
          trans_unit_id="123">
          <SegmentId>8ae9a76b-c506-45d3-8773-28bfcc5902a8</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="123"
            trans_unit_id="123-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="8a1c5d20-8615-4dea-8443-a0c013e94ec4"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="8a1c5d20-8615-4dea-8443-a0c013e94ec4">
        <Lines>
          <MarkdownLine>
            <LineId>e4cf0fd3-43fd-4aed-a35c-26e73584552b</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="124">
                <SegmentId>1e2ef729-cfe8-4c96-959d-fcad7dec8203</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="124"
                  trans_unit_id="124-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Smart Cache</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="124">
            <SegmentId>1e2ef729-cfe8-4c96-959d-fcad7dec8203</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="124"
              trans_unit_id="124-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Smart Cache</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="c73c4213-33ed-4f99-9daf-832eda1d8c1c"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="c73c4213-33ed-4f99-9daf-832eda1d8c1c">
        <Lines>
          <MarkdownLine>
            <LineId>9e73bac8-e4c3-47b1-a81b-408cc2e193cc</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="125">
                <SegmentId>6c550845-3d6f-448f-af06-bdf89738cad7</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="125"
                  trans_unit_id="125-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Distributed Networks and Graphs</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-distributed-networks-and-graphs.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="125">
            <SegmentId>6c550845-3d6f-448f-af06-bdf89738cad7</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="125"
              trans_unit_id="125-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Distributed Networks and Graphs</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-distributed-networks-and-graphs.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="e0763c64-f20f-4601-8676-b017afd533e6"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="e0763c64-f20f-4601-8676-b017afd533e6">
        <Lines>
          <MarkdownLine>
            <LineId>f080fea9-dd87-4839-96c4-9c8ebad573ed</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="126">
                <SegmentId>565464d4-9d85-4d58-8eda-31f4be848d4e</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="126"
                  trans_unit_id="126-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Resource Governance</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="126">
            <SegmentId>565464d4-9d85-4d58-8eda-31f4be848d4e</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="126"
              trans_unit_id="126-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Resource Governance</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="e6e5abff-6d7c-4a82-b4e2-e1d70f4bec69"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="e6e5abff-6d7c-4a82-b4e2-e1d70f4bec69">
        <Lines>
          <MarkdownLine>
            <LineId>8d9fca93-ac59-41a2-9e72-bcdf8bca256e</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="127">
                <SegmentId>ad6c01c8-9b80-488b-a072-73dc14530150</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="127"
                  trans_unit_id="127-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="127">
            <SegmentId>ad6c01c8-9b80-488b-a072-73dc14530150</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="127"
              trans_unit_id="127-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="24727b39-ff42-429e-9d95-2aa451b255a1"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="24727b39-ff42-429e-9d95-2aa451b255a1">
        <Lines>
          <MarkdownLine>
            <LineId>6e4b9584-16d8-4bf8-b670-d21586942d5d</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="128">
                <SegmentId>c7f490de-994f-4416-a53a-93d44b20d981</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="128"
                  trans_unit_id="128-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Internet of Things</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="128">
            <SegmentId>c7f490de-994f-4416-a53a-93d44b20d981</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="128"
              trans_unit_id="128-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Internet of Things</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="9d4c7ba8-dd2f-49da-b5b4-30681c475cea"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="9d4c7ba8-dd2f-49da-b5b4-30681c475cea">
        <Lines>
          <MarkdownLine>
            <LineId>46b18db5-5d4f-43d7-b264-9b7ec5244f20</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="129">
                <SegmentId>0194ac05-cc50-41f3-8263-d13f1e6a0293</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="129"
                  trans_unit_id="129-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Some Anti-patterns</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="129">
            <SegmentId>0194ac05-cc50-41f3-8263-d13f1e6a0293</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="129"
              trans_unit_id="129-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Some Anti-patterns</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="ee521486-b2f9-45e0-b7ee-2f5c4ea11ce3"
        item_type="NormalParagraph"
        item_footer="&#xA;&#xA;"
        trans_unit_id="ee521486-b2f9-45e0-b7ee-2f5c4ea11ce3">
        <Lines>
          <MarkdownLine>
            <LineId>33e84ff0-a35f-4261-9d96-b5d2b97f156c</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="130">
                <SegmentId>05c1fdf4-040f-47c1-90c8-33678d5bba80</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="130"
                  trans_unit_id="130-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="130">
            <SegmentId>05c1fdf4-040f-47c1-90c8-33678d5bba80</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="130"
              trans_unit_id="130-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
    </ArrayOfMarkdownBlockBase>
  </block_element>
  <references>
    <ArrayOfMarkdownLinkedReference xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownLinkedReference
        item_id="d8dd83cb-024f-4984-b237-c111424ab376"
        item_type="LinkedReference"
        item_footer="footer_not_set"
        trans_unit_id="d8dd83cb-024f-4984-b237-c111424ab376">
        <link_id>1</link_id>
        <link_uri>./media/service-fabric-reliable-actors-pattern-distributed-computation/distributed-computation-1.png</link_uri>
        <link_title />
      </MarkdownLinkedReference>
    </ArrayOfMarkdownLinkedReference>
  </references>
</markdown_skeleton_root>