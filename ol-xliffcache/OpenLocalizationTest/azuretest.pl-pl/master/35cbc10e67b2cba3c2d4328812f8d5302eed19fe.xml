<markdown_skeleton_root>
  <block_element>
    <ArrayOfMarkdownBlockBase xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownBlockBase
        xsi:type="MarkdownAzureMetadataBlock"
        item_id="6e71a75d-2097-424e-bdf9-cc0bd62e4345"
        item_type="AzureMetadata"
        item_footer="footer_not_set"
        trans_unit_id="6e71a75d-2097-424e-bdf9-cc0bd62e4345">
        <LocalizeItemList>
          <MarkdownInternalXmlItem
            internal_item_id="10dd76b7-29ff-464c-91b0-538027248d16"
            trans_unit_id="101"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
          <MarkdownInternalXmlItem
            internal_item_id="ded1dcc3-e98d-4dfb-a868-7f4a7d29acde"
            trans_unit_id="102"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
        </LocalizeItemList>
        <ItemValue>&lt;properties 
    title="Multi-tenant applications with elastic database tools and row-level security" 
    pageTitle="10dd76b7-29ff-464c-91b0-538027248d16" 
    description="ded1dcc3-e98d-4dfb-a868-7f4a7d29acde" 
    metaKeywords="azure sql database elastic tools multi tenant row level security rls" 
    services="sql-database" documentationCenter=""  
    manager="jeffreyg" 
    authors="tmullaney"/&gt;

&lt;tags 
    ms.service="sql-database" 
    ms.workload="sql-database" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="08/19/2015" 
    ms.author="thmullan;torsteng;sidneyh" /&gt;

</ItemValue>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="eae0a71a-01b5-4de6-b666-5f0ba1cbd4ee"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="eae0a71a-01b5-4de6-b666-5f0ba1cbd4ee">
        <segment
          trans_unit_id="103">
          <SegmentId>544e7a65-dca0-4ba9-b399-18d2d5d57f7b</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="103"
            trans_unit_id="103-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>1</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="32d082df-9623-41a3-b576-ae40da8e82e2"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="32d082df-9623-41a3-b576-ae40da8e82e2">
        <Lines>
          <MarkdownLine>
            <LineId>e62c9ddc-ee66-48b9-9aec-59fc2326293a</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="104">
                <SegmentId>75a047e3-2bd6-4f1c-b3bb-17f5d773138d</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="104"
                  trans_unit_id="104-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Elastic database tools</internal_link_text>
                  <internal_link_url>sql-database-elastic-scale-get-started.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="2"
                  internal_item_parent_id="104"
                  trans_unit_id="104-2"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="3"
                  internal_item_parent_id="104"
                  trans_unit_id="104-3"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>row-level security (RLS)</internal_link_text>
                  <internal_link_url>https://msdn.microsoft.com/library/dn765131</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="4"
                  internal_item_parent_id="104"
                  trans_unit_id="104-4"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="105">
                <SegmentId>6fe02435-f572-4f81-88ee-472eb87efd24</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="105"
                  trans_unit_id="105-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <MarkdownInternalBoldItem
                  internal_item_id="2"
                  internal_item_parent_id="105"
                  trans_unit_id="105-2"
                  internal_item_type="Bold">
                  <internal_items />
                  <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                </MarkdownInternalBoldItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="105"
                  trans_unit_id="105-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <MarkdownInternalBoldItem
                  internal_item_id="4"
                  internal_item_parent_id="105"
                  trans_unit_id="105-4"
                  internal_item_type="Bold">
                  <internal_items />
                  <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                </MarkdownInternalBoldItem>
                <InternalNormalItem
                  internal_item_id="5"
                  internal_item_parent_id="105"
                  trans_unit_id="105-5"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="104">
            <SegmentId>75a047e3-2bd6-4f1c-b3bb-17f5d773138d</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="104"
              trans_unit_id="104-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Elastic database tools</internal_link_text>
              <internal_link_url>sql-database-elastic-scale-get-started.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="2"
              internal_item_parent_id="104"
              trans_unit_id="104-2"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="3"
              internal_item_parent_id="104"
              trans_unit_id="104-3"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>row-level security (RLS)</internal_link_text>
              <internal_link_url>https://msdn.microsoft.com/library/dn765131</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="4"
              internal_item_parent_id="104"
              trans_unit_id="104-4"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="105">
            <SegmentId>6fe02435-f572-4f81-88ee-472eb87efd24</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="105"
              trans_unit_id="105-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <MarkdownInternalBoldItem
              internal_item_id="2"
              internal_item_parent_id="105"
              trans_unit_id="105-2"
              internal_item_type="Bold">
              <internal_items />
              <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
            </MarkdownInternalBoldItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="105"
              trans_unit_id="105-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <MarkdownInternalBoldItem
              internal_item_id="4"
              internal_item_parent_id="105"
              trans_unit_id="105-4"
              internal_item_type="Bold">
              <internal_items />
              <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
            </MarkdownInternalBoldItem>
            <InternalNormalItem
              internal_item_id="5"
              internal_item_parent_id="105"
              trans_unit_id="105-5"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="082fc570-777b-4967-bf5e-8ee73ba070f5"
        item_type="List"
        item_footer=""
        trans_unit_id="082fc570-777b-4967-bf5e-8ee73ba070f5">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="085863f2-5093-4851-9381-6a9a50ad70f0"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="085863f2-5093-4851-9381-6a9a50ad70f0">
              <Lines>
                <MarkdownLine>
                  <LineId>aa81fef9-ac29-420b-9542-c6b638bff8e3</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="106">
                      <SegmentId>8271bea0-e040-4888-85c6-15c701fe118e</SegmentId>
                      <MarkdownInternalBoldItem
                        internal_item_id="1"
                        internal_item_parent_id="106"
                        trans_unit_id="106-1"
                        internal_item_type="Bold">
                        <internal_items />
                        <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                      </MarkdownInternalBoldItem>
                      <InternalNormalItem
                        internal_item_id="2"
                        internal_item_parent_id="106"
                        trans_unit_id="106-2"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                    <MarkdownSegment
                      trans_unit_id="107">
                      <SegmentId>8a3bef58-3b07-4e5a-8c38-23d4f8f01a45</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="107"
                        trans_unit_id="107-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="106">
                  <SegmentId>8271bea0-e040-4888-85c6-15c701fe118e</SegmentId>
                  <MarkdownInternalBoldItem
                    internal_item_id="1"
                    internal_item_parent_id="106"
                    trans_unit_id="106-1"
                    internal_item_type="Bold">
                    <internal_items />
                    <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                  </MarkdownInternalBoldItem>
                  <InternalNormalItem
                    internal_item_id="2"
                    internal_item_parent_id="106"
                    trans_unit_id="106-2"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
                <MarkdownSegment
                  trans_unit_id="107">
                  <SegmentId>8a3bef58-3b07-4e5a-8c38-23d4f8f01a45</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="107"
                    trans_unit_id="107-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="1d068103-b46c-4b96-94c3-4c35e3508ccc"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="1d068103-b46c-4b96-94c3-4c35e3508ccc">
              <Lines>
                <MarkdownLine>
                  <LineId>0d678c58-333c-415f-bd83-3f04aebea3a3</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="108">
                      <SegmentId>1c045fdd-7351-47b6-908c-fbdcf375e541</SegmentId>
                      <MarkdownInternalBoldItem
                        internal_item_id="1"
                        internal_item_parent_id="108"
                        trans_unit_id="108-1"
                        internal_item_type="Bold">
                        <internal_items />
                        <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                      </MarkdownInternalBoldItem>
                      <InternalNormalItem
                        internal_item_id="2"
                        internal_item_parent_id="108"
                        trans_unit_id="108-2"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                    <MarkdownSegment
                      trans_unit_id="109">
                      <SegmentId>50f8c989-0213-45d0-b66b-f3ecd7592bdb</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="109"
                        trans_unit_id="109-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                    <MarkdownSegment
                      trans_unit_id="110">
                      <SegmentId>b647f002-8ad2-46a1-920f-d34289e5b2e6</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="110"
                        trans_unit_id="110-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                      <LinkItem
                        internal_item_id="2"
                        internal_item_parent_id="110"
                        trans_unit_id="110-2"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Azure SQL Database update (V12)</internal_link_text>
                        <internal_link_url>sql-database-preview-whats-new.md</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                      <InternalNormalItem
                        internal_item_id="3"
                        internal_item_parent_id="110"
                        trans_unit_id="110-3"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="108">
                  <SegmentId>1c045fdd-7351-47b6-908c-fbdcf375e541</SegmentId>
                  <MarkdownInternalBoldItem
                    internal_item_id="1"
                    internal_item_parent_id="108"
                    trans_unit_id="108-1"
                    internal_item_type="Bold">
                    <internal_items />
                    <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                  </MarkdownInternalBoldItem>
                  <InternalNormalItem
                    internal_item_id="2"
                    internal_item_parent_id="108"
                    trans_unit_id="108-2"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
                <MarkdownSegment
                  trans_unit_id="109">
                  <SegmentId>50f8c989-0213-45d0-b66b-f3ecd7592bdb</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="109"
                    trans_unit_id="109-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
                <MarkdownSegment
                  trans_unit_id="110">
                  <SegmentId>b647f002-8ad2-46a1-920f-d34289e5b2e6</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="110"
                    trans_unit_id="110-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                  <LinkItem
                    internal_item_id="2"
                    internal_item_parent_id="110"
                    trans_unit_id="110-2"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Azure SQL Database update (V12)</internal_link_text>
                    <internal_link_url>sql-database-preview-whats-new.md</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                  <InternalNormalItem
                    internal_item_id="3"
                    internal_item_parent_id="110"
                    trans_unit_id="110-3"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="f5c6993e-6a71-4abc-b9cd-ab3fadd1bc29"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="f5c6993e-6a71-4abc-b9cd-ab3fadd1bc29">
        <Lines>
          <MarkdownLine>
            <LineId>76d1d522-6e81-48d3-98f9-2233cca24def</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="111">
                <SegmentId>5f125aa0-a231-4be8-8682-d78406b37d95</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="111"
                  trans_unit_id="111-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="112">
                <SegmentId>7c0f77dd-85e2-41a7-a8f8-4296cdffa2b4</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="112"
                  trans_unit_id="112-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="111">
            <SegmentId>5f125aa0-a231-4be8-8682-d78406b37d95</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="111"
              trans_unit_id="111-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="112">
            <SegmentId>7c0f77dd-85e2-41a7-a8f8-4296cdffa2b4</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="112"
              trans_unit_id="112-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="d2414894-c229-4bea-b8e3-03325e76793e"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="d2414894-c229-4bea-b8e3-03325e76793e">
        <Lines>
          <MarkdownLine>
            <LineId>69e0ce04-5249-45a6-84c8-b2e3edf56337</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="113">
                <SegmentId>ea4a2355-c656-4ccc-bd62-4f8dd65a4174</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="113"
                  trans_unit_id="113-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="113"
                  trans_unit_id="113-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>data dependent routing</internal_link_text>
                  <internal_link_url>sql-database-elastic-scale-data-dependent-routing.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="113"
                  trans_unit_id="113-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="114">
                <SegmentId>e1d58f17-2b7d-4968-91c6-bd540cbf06e8</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="114"
                  trans_unit_id="114-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="115">
                <SegmentId>afc52b73-60ee-4b36-9095-6154e496e2f4</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="115"
                  trans_unit_id="115-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="113">
            <SegmentId>ea4a2355-c656-4ccc-bd62-4f8dd65a4174</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="113"
              trans_unit_id="113-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="113"
              trans_unit_id="113-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>data dependent routing</internal_link_text>
              <internal_link_url>sql-database-elastic-scale-data-dependent-routing.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="113"
              trans_unit_id="113-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="114">
            <SegmentId>e1d58f17-2b7d-4968-91c6-bd540cbf06e8</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="114"
              trans_unit_id="114-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="115">
            <SegmentId>afc52b73-60ee-4b36-9095-6154e496e2f4</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="115"
              trans_unit_id="115-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="c9928920-22b0-4363-bdc3-99ce58ebb9a7"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="c9928920-22b0-4363-bdc3-99ce58ebb9a7">
        <Lines>
          <MarkdownLine>
            <LineId>4bbc2e4b-abc7-4c66-90e0-9fd91b02a63b</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="116">
                <SegmentId>30878bff-dff3-4187-a041-c1da953c24ab</SegmentId>
                <ImageItem
                  internal_item_id="1"
                  internal_item_parent_id="116"
                  trans_unit_id="116-1"
                  internal_item_type="Image">
                  <internal_items />
                  <internal_Image_type>Reference</internal_Image_type>
                  <internal_link_text>Blogging app architecture</internal_link_text>
                  <internal_link_id>1</internal_link_id>
                </ImageItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="116">
            <SegmentId>30878bff-dff3-4187-a041-c1da953c24ab</SegmentId>
            <ImageItem
              internal_item_id="1"
              internal_item_parent_id="116"
              trans_unit_id="116-1"
              internal_item_type="Image">
              <internal_items />
              <internal_Image_type>Reference</internal_Image_type>
              <internal_link_text>Blogging app architecture</internal_link_text>
              <internal_link_id>1</internal_link_id>
            </ImageItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="a4728fd1-62c7-4b5b-b4d7-70b44158380e"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="a4728fd1-62c7-4b5b-b4d7-70b44158380e">
        <segment
          trans_unit_id="117">
          <SegmentId>3ceb6ead-d372-428e-955d-5b931a62c148</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="117"
            trans_unit_id="117-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="0f1e15a1-10fa-4262-985e-18b4382e470a"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="0f1e15a1-10fa-4262-985e-18b4382e470a">
        <segment
          trans_unit_id="118">
          <SegmentId>18ebd4a5-b169-40f6-9d69-6d4addbddcbe</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="118"
            trans_unit_id="118-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="f52e3753-3d88-4b59-8a85-1b58be8ccf68"
        item_type="List"
        item_footer=""
        trans_unit_id="f52e3753-3d88-4b59-8a85-1b58be8ccf68">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="a4ed2dd1-8900-4bce-b58d-84fdfcf49996"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="a4ed2dd1-8900-4bce-b58d-84fdfcf49996">
              <Lines>
                <MarkdownLine>
                  <LineId>ce507fcf-b642-4054-b0f6-c9aa3a3cc378</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="119">
                      <SegmentId>c09283f3-902c-4253-a038-6c7a373771ce</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="119"
                        trans_unit_id="119-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="119">
                  <SegmentId>c09283f3-902c-4253-a038-6c7a373771ce</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="119"
                    trans_unit_id="119-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="cddab7ed-739e-4541-ab67-377bea9a4cf5"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="cddab7ed-739e-4541-ab67-377bea9a4cf5">
              <Lines>
                <MarkdownLine>
                  <LineId>2e09bb3b-4c52-4e33-8961-3a6f7d54f282</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="120">
                      <SegmentId>6636a1f1-c16d-4e17-a5ac-6b2f04c99afa</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="120"
                        trans_unit_id="120-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="120">
                  <SegmentId>6636a1f1-c16d-4e17-a5ac-6b2f04c99afa</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="120"
                    trans_unit_id="120-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="22513ad2-fa00-4333-8958-ba17820280ee"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="22513ad2-fa00-4333-8958-ba17820280ee">
              <Lines>
                <MarkdownLine>
                  <LineId>2ac4d20a-1b8e-4e93-8fbc-80bf70d6b2a0</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="121">
                      <SegmentId>f0e2e283-4d06-4680-a0c8-f2922576cce9</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="121"
                        trans_unit_id="121-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                      <LinkItem
                        internal_item_id="2"
                        internal_item_parent_id="121"
                        trans_unit_id="121-2"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Elastic DB Tools for Azure SQL - Multi-Tenant Shards</internal_link_text>
                        <internal_link_url>http://go.microsoft.com/?linkid=9888163</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="121">
                  <SegmentId>f0e2e283-4d06-4680-a0c8-f2922576cce9</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="121"
                    trans_unit_id="121-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                  <LinkItem
                    internal_item_id="2"
                    internal_item_parent_id="121"
                    trans_unit_id="121-2"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Elastic DB Tools for Azure SQL - Multi-Tenant Shards</internal_link_text>
                    <internal_link_url>http://go.microsoft.com/?linkid=9888163</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <MarkdownListBlock
              item_id="3195bacf-ec3e-40d8-8371-f960142cfe10"
              item_type="List"
              item_footer="footer_not_set"
              trans_unit_id="3195bacf-ec3e-40d8-8371-f960142cfe10">
              <inner_list_items>
                <ListItem>
                  <MarkdownParagraphBlock
                    item_id="e7af706c-8f94-4df7-8799-f68247774985"
                    item_type="NormalParagraph"
                    item_footer="footer_not_set"
                    trans_unit_id="e7af706c-8f94-4df7-8799-f68247774985">
                    <Lines>
                      <MarkdownLine>
                        <LineId>831c61c4-e200-47ae-b803-654341dcd7af</LineId>
                        <paragraph_segments>
                          <MarkdownSegment
                            trans_unit_id="122">
                            <SegmentId>98bcbb1d-7360-44bd-8c12-2e9ba4c82ae8</SegmentId>
                            <InternalNormalItem
                              internal_item_id="1"
                              internal_item_parent_id="122"
                              trans_unit_id="122-1"
                              internal_item_type="Normal">
                              <internal_items />
                            </InternalNormalItem>
                            <MarkdownInternalBoldItem
                              internal_item_id="2"
                              internal_item_parent_id="122"
                              trans_unit_id="122-2"
                              internal_item_type="Bold">
                              <internal_items />
                              <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                            </MarkdownInternalBoldItem>
                          </MarkdownSegment>
                        </paragraph_segments>
                        <PrefixWSLength>1</PrefixWSLength>
                        <SuffixWSLength>0</SuffixWSLength>
                      </MarkdownLine>
                    </Lines>
                    <paragraph_segments>
                      <MarkdownSegment
                        trans_unit_id="122">
                        <SegmentId>98bcbb1d-7360-44bd-8c12-2e9ba4c82ae8</SegmentId>
                        <InternalNormalItem
                          internal_item_id="1"
                          internal_item_parent_id="122"
                          trans_unit_id="122-1"
                          internal_item_type="Normal">
                          <internal_items />
                        </InternalNormalItem>
                        <MarkdownInternalBoldItem
                          internal_item_id="2"
                          internal_item_parent_id="122"
                          trans_unit_id="122-2"
                          internal_item_type="Bold">
                          <internal_items />
                          <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                        </MarkdownInternalBoldItem>
                      </MarkdownSegment>
                    </paragraph_segments>
                  </MarkdownParagraphBlock>
                  <Identifier>*</Identifier>
                  <IndentsLength>
                    <int>0</int>
                  </IndentsLength>
                </ListItem>
              </inner_list_items>
              <ListType>Charactor</ListType>
            </MarkdownListBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
              <int>2</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="26c758e9-b431-4776-b783-e1f2c10fa99c"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="26c758e9-b431-4776-b783-e1f2c10fa99c">
        <Lines>
          <MarkdownLine>
            <LineId>30b1ed12-f150-4644-9218-896a16f09ea2</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="123">
                <SegmentId>9d1a2ce2-f6f8-4ea7-a300-69118e18646e</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="123"
                  trans_unit_id="123-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="123"
                  trans_unit_id="123-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Elastic DB Tools for Azure SQL - Entity Framework Integration</internal_link_text>
                  <internal_link_url>sql-database-elastic-scale-use-entity-framework-applications-visual-studio.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="123"
                  trans_unit_id="123-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="124">
                <SegmentId>8ac9788c-ab3e-450f-8712-cfa50b72e0b1</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="124"
                  trans_unit_id="124-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="123">
            <SegmentId>9d1a2ce2-f6f8-4ea7-a300-69118e18646e</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="123"
              trans_unit_id="123-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="123"
              trans_unit_id="123-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Elastic DB Tools for Azure SQL - Entity Framework Integration</internal_link_text>
              <internal_link_url>sql-database-elastic-scale-use-entity-framework-applications-visual-studio.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="123"
              trans_unit_id="123-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="124">
            <SegmentId>8ac9788c-ab3e-450f-8712-cfa50b72e0b1</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="124"
              trans_unit_id="124-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="f8028946-6be9-450e-98f8-2150ec78e451"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="f8028946-6be9-450e-98f8-2150ec78e451">
        <Lines>
          <MarkdownLine>
            <LineId>429763b7-5adb-471b-a4ef-76411b5b393a</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="125">
                <SegmentId>1a0db178-49c4-4004-b51f-98e679430606</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="125"
                  trans_unit_id="125-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="126">
                <SegmentId>f1057f18-0a39-4f14-9976-c69536ab012b</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="126"
                  trans_unit_id="126-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="125">
            <SegmentId>1a0db178-49c4-4004-b51f-98e679430606</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="125"
              trans_unit_id="125-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="126">
            <SegmentId>f1057f18-0a39-4f14-9976-c69536ab012b</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="126"
              trans_unit_id="126-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="f85eee34-907e-47e8-97b3-05f2efb8e616"
        item_type="List"
        item_footer=""
        trans_unit_id="f85eee34-907e-47e8-97b3-05f2efb8e616">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="f623e9f6-dfdf-4141-8efa-804fe299454d"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="f623e9f6-dfdf-4141-8efa-804fe299454d">
              <Lines>
                <MarkdownLine>
                  <LineId>0cce22e2-4e95-47e1-a668-51aea8d3fabd</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="127">
                      <SegmentId>ca1022a2-c3a6-4348-886e-2c2942cda965</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="127"
                        trans_unit_id="127-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="127">
                  <SegmentId>ca1022a2-c3a6-4348-886e-2c2942cda965</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="127"
                    trans_unit_id="127-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>1.</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="496cda32-1da2-46b1-8f58-e2a1f88dea34"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="496cda32-1da2-46b1-8f58-e2a1f88dea34">
              <Lines>
                <MarkdownLine>
                  <LineId>43d17e29-8179-4bce-8777-6dc8d42650d7</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="128">
                      <SegmentId>7369965b-ac8a-49ad-befa-023b14330005</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="128"
                        trans_unit_id="128-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="128">
                  <SegmentId>7369965b-ac8a-49ad-befa-023b14330005</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="128"
                    trans_unit_id="128-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>2.</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="32d688ef-37d5-4b67-b809-52578a4e68ae"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="32d688ef-37d5-4b67-b809-52578a4e68ae">
              <Lines>
                <MarkdownLine>
                  <LineId>162a4805-ccd1-493d-a050-0fbedd2de552</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="129">
                      <SegmentId>83bae902-d369-4771-a208-857658b62f74</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="129"
                        trans_unit_id="129-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="129">
                  <SegmentId>83bae902-d369-4771-a208-857658b62f74</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="129"
                    trans_unit_id="129-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>3.</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Number</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="400c2533-dd7d-477a-ab3b-e61460f293db"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="400c2533-dd7d-477a-ab3b-e61460f293db">
        <Lines>
          <MarkdownLine>
            <LineId>2c2397de-035f-4472-a812-dcee4680e290</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="130">
                <SegmentId>54927165-4932-4970-a2f9-1d5e831e7d45</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="130"
                  trans_unit_id="130-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="131">
                <SegmentId>4f014763-74a9-4fe7-ac24-83393bf34e6e</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="131"
                  trans_unit_id="131-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="132">
                <SegmentId>2c16879c-b0cf-4b4a-b0d9-83f29deca2a9</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="132"
                  trans_unit_id="132-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="130">
            <SegmentId>54927165-4932-4970-a2f9-1d5e831e7d45</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="130"
              trans_unit_id="130-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="131">
            <SegmentId>4f014763-74a9-4fe7-ac24-83393bf34e6e</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="131"
              trans_unit_id="131-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="132">
            <SegmentId>2c16879c-b0cf-4b4a-b0d9-83f29deca2a9</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="132"
              trans_unit_id="132-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="f46b102b-d23c-4ba3-853d-ceef9d29f883"
        item_type="List"
        item_footer="&#xA;"
        trans_unit_id="f46b102b-d23c-4ba3-853d-ceef9d29f883">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="7d222a62-4f10-4dff-a36a-74f4bfa45c95"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="7d222a62-4f10-4dff-a36a-74f4bfa45c95">
              <Lines>
                <MarkdownLine>
                  <LineId>2149a472-71ab-4f34-abaf-4042fb6d1ccf</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="133">
                      <SegmentId>ba871f1f-9147-4e60-8d70-fa84f8cb31ad</SegmentId>
                      <MarkdownInternalBoldItem
                        internal_item_id="1"
                        internal_item_parent_id="133"
                        trans_unit_id="133-1"
                        internal_item_type="Bold">
                        <internal_items />
                        <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                      </MarkdownInternalBoldItem>
                      <InternalNormalItem
                        internal_item_id="2"
                        internal_item_parent_id="133"
                        trans_unit_id="133-2"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                    <MarkdownSegment
                      trans_unit_id="134">
                      <SegmentId>0d31bb7f-d2f2-4345-a0e3-7aeedfdbc2d1</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="134"
                        trans_unit_id="134-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="133">
                  <SegmentId>ba871f1f-9147-4e60-8d70-fa84f8cb31ad</SegmentId>
                  <MarkdownInternalBoldItem
                    internal_item_id="1"
                    internal_item_parent_id="133"
                    trans_unit_id="133-1"
                    internal_item_type="Bold">
                    <internal_items />
                    <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                  </MarkdownInternalBoldItem>
                  <InternalNormalItem
                    internal_item_id="2"
                    internal_item_parent_id="133"
                    trans_unit_id="133-2"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
                <MarkdownSegment
                  trans_unit_id="134">
                  <SegmentId>0d31bb7f-d2f2-4345-a0e3-7aeedfdbc2d1</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="134"
                    trans_unit_id="134-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>1.</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="4e7c5332-45c8-4c94-afb8-c35f0b99cb13"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="4e7c5332-45c8-4c94-afb8-c35f0b99cb13">
              <Lines>
                <MarkdownLine>
                  <LineId>396e8c20-9f67-49c5-a460-d6de0caef567</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="135">
                      <SegmentId>b4dee1a4-ee4a-4b46-a6fd-f5bb40784576</SegmentId>
                      <MarkdownInternalBoldItem
                        internal_item_id="1"
                        internal_item_parent_id="135"
                        trans_unit_id="135-1"
                        internal_item_type="Bold">
                        <internal_items />
                        <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                      </MarkdownInternalBoldItem>
                      <InternalNormalItem
                        internal_item_id="2"
                        internal_item_parent_id="135"
                        trans_unit_id="135-2"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                    <MarkdownSegment
                      trans_unit_id="136">
                      <SegmentId>dfdfaba4-cd69-4092-b20a-673792277b4d</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="136"
                        trans_unit_id="136-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="135">
                  <SegmentId>b4dee1a4-ee4a-4b46-a6fd-f5bb40784576</SegmentId>
                  <MarkdownInternalBoldItem
                    internal_item_id="1"
                    internal_item_parent_id="135"
                    trans_unit_id="135-1"
                    internal_item_type="Bold">
                    <internal_items />
                    <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                  </MarkdownInternalBoldItem>
                  <InternalNormalItem
                    internal_item_id="2"
                    internal_item_parent_id="135"
                    trans_unit_id="135-2"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
                <MarkdownSegment
                  trans_unit_id="136">
                  <SegmentId>dfdfaba4-cd69-4092-b20a-673792277b4d</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="136"
                    trans_unit_id="136-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>2.</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Number</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="e9a17587-50e1-478c-a081-4d2675da9fd7"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="e9a17587-50e1-478c-a081-4d2675da9fd7">
        <segment
          trans_unit_id="137">
          <SegmentId>be7f38a9-bb53-4d06-a0b7-c926e0734a79</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="137"
            trans_unit_id="137-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="5c158f4f-f035-495d-aa6a-0eb88422e985"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="5c158f4f-f035-495d-aa6a-0eb88422e985">
        <Lines>
          <MarkdownLine>
            <LineId>b291f826-36c7-4090-afee-bb270217cb89</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="138">
                <SegmentId>f65298fd-4657-4b46-be63-f92198ba4d75</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="138"
                  trans_unit_id="138-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="139">
                <SegmentId>2dfc1c78-0745-44f5-88ce-5ab5e2492626</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="139"
                  trans_unit_id="139-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="139"
                  trans_unit_id="139-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>CONTEXT_INFO</internal_link_text>
                  <internal_link_url>https://msdn.microsoft.com/library/ms180125</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="139"
                  trans_unit_id="139-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="140">
                <SegmentId>87cfbd33-90e3-4450-bc99-5ed59953b48a</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="140"
                  trans_unit_id="140-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <ItalicsItem
                  internal_item_id="2"
                  internal_item_parent_id="140"
                  trans_unit_id="140-2"
                  internal_item_type="Italics">
                  <internal_items />
                  <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                </ItalicsItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="140"
                  trans_unit_id="140-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="138">
            <SegmentId>f65298fd-4657-4b46-be63-f92198ba4d75</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="138"
              trans_unit_id="138-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="139">
            <SegmentId>2dfc1c78-0745-44f5-88ce-5ab5e2492626</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="139"
              trans_unit_id="139-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="139"
              trans_unit_id="139-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>CONTEXT_INFO</internal_link_text>
              <internal_link_url>https://msdn.microsoft.com/library/ms180125</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="139"
              trans_unit_id="139-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="140">
            <SegmentId>87cfbd33-90e3-4450-bc99-5ed59953b48a</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="140"
              trans_unit_id="140-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <ItalicsItem
              internal_item_id="2"
              internal_item_parent_id="140"
              trans_unit_id="140-2"
              internal_item_type="Italics">
              <internal_items />
              <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
            </ItalicsItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="140"
              trans_unit_id="140-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="5876fb35-a433-4d94-922a-51a59be584a6"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="5876fb35-a433-4d94-922a-51a59be584a6">
        <segment
          trans_unit_id="141">
          <SegmentId>4fb3b0f6-fb5b-4e01-ace5-a6d974c2f8aa</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="141"
            trans_unit_id="141-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="200bbcac-d6b6-49b4-87f3-7ee0fd3b81d7"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="200bbcac-d6b6-49b4-87f3-7ee0fd3b81d7">
        <Lines>
          <MarkdownLine>
            <LineId>8089e916-c718-49fa-a238-ee5a19e473db</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="142">
                <SegmentId>2f8713c1-68dc-4986-aac4-0abd3678124e</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="142"
                  trans_unit_id="142-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="142"
                  trans_unit_id="142-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Data Dependent Routing using EF DbContext</internal_link_text>
                  <internal_link_url>sql-database-elastic-scale-use-entity-framework-applications-visual-studio.md/#data-dependent-routing-using-ef-dbcontext</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="142"
                  trans_unit_id="142-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="143">
                <SegmentId>c43e78f9-f1a0-4535-ab5f-d54ff662aa3d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="143"
                  trans_unit_id="143-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="144">
                <SegmentId>c32fca4a-4469-4166-a921-385f15f55250</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="144"
                  trans_unit_id="144-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="142">
            <SegmentId>2f8713c1-68dc-4986-aac4-0abd3678124e</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="142"
              trans_unit_id="142-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="142"
              trans_unit_id="142-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Data Dependent Routing using EF DbContext</internal_link_text>
              <internal_link_url>sql-database-elastic-scale-use-entity-framework-applications-visual-studio.md/#data-dependent-routing-using-ef-dbcontext</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="142"
              trans_unit_id="142-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="143">
            <SegmentId>c43e78f9-f1a0-4535-ab5f-d54ff662aa3d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="143"
              trans_unit_id="143-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="144">
            <SegmentId>c32fca4a-4469-4166-a921-385f15f55250</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="144"
              trans_unit_id="144-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="9e0c5ea1-1e6a-4e0f-88f5-b4baa1076101"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="9e0c5ea1-1e6a-4e0f-88f5-b4baa1076101">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// ElasticScaleContext.cs 
// ... 
// C'tor for data dependent routing. This call will open a validated connection routed to the proper 
// shard by the shard map manager. Note that the base class c'tor call will fail for an open connection 
// if migrations need to be done and SQL credentials are used. This is the reason for the  
// separation of c'tors into the DDR case (this c'tor) and the internal c'tor for new shards. 
public ElasticScaleContext(ShardMap shardMap, T shardingKey, string connectionStr)
    : base(OpenDDRConnection(shardMap, shardingKey, connectionStr), true /* contextOwnsConnection */)
{
}

public static SqlConnection OpenDDRConnection(ShardMap shardMap, T shardingKey, string connectionStr)
{
    // No initialization
    Database.SetInitializer&lt;ElasticScaleContext&lt;T&gt;&gt;(null);

    // Ask shard map to broker a validated connection for the given key
    SqlConnection conn = null;
    try
    {
        conn = shardMap.OpenConnectionForKey(shardingKey, connectionStr, ConnectionOptions.Validate);

        // Set CONTEXT_INFO to shardingKey to enable Row-Level Security filtering
        SqlCommand cmd = conn.CreateCommand();
        cmd.CommandText = @"SET CONTEXT_INFO @shardingKey";
        cmd.Parameters.AddWithValue("@shardingKey", shardingKey);
        cmd.ExecuteNonQuery();

        return conn;
    }
    catch (Exception)
    {
        if (conn != null)
        {
            conn.Dispose();
        }

        throw;
    }
} 
// ... </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="d3db43d8-af5a-4a24-a5d2-85c09bd8a7f6"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="d3db43d8-af5a-4a24-a5d2-85c09bd8a7f6">
        <Lines>
          <MarkdownLine>
            <LineId>50a2c3c0-ee98-4962-bf80-81d3a1b45cf6</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="145">
                <SegmentId>07d8173d-fa1c-4ce1-86da-8941e1669a4d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="145"
                  trans_unit_id="145-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="145">
            <SegmentId>07d8173d-fa1c-4ce1-86da-8941e1669a4d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="145"
              trans_unit_id="145-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="f4e32da0-9cdb-44a4-a359-08554c362e12"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="f4e32da0-9cdb-44a4-a359-08554c362e12">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Program.cs 
SqlDatabaseUtils.SqlRetryPolicy.ExecuteAction(() =&gt; 
{   
    using (var db = new ElasticScaleContext&lt;int&gt;(sharding.ShardMap, tenantId, connStrBldr.ConnectionString))   
    {     
        var query = from b in db.Blogs
                    orderby b.Name
                    select b;

        Console.WriteLine("All blogs for TenantId {0}:", tenantId);     
        foreach (var item in query)     
        {       
            Console.WriteLine(item.Name);     
        }   
    } 
}); </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="18ae9b90-7521-496d-b845-ab75692cc9d9"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="18ae9b90-7521-496d-b845-ab75692cc9d9">
        <segment
          trans_unit_id="146">
          <SegmentId>5a651299-d433-4154-93de-0c667f9ec10c</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="146"
            trans_unit_id="146-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="39261a29-e3be-4bd0-a41c-af5a5eaadeff"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="39261a29-e3be-4bd0-a41c-af5a5eaadeff">
        <Lines>
          <MarkdownLine>
            <LineId>4318a268-deb0-4fde-9712-0b906c698278</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="147">
                <SegmentId>993d83dd-1036-48a4-842a-835e881fbd0d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="147"
                  trans_unit_id="147-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="148">
                <SegmentId>a03f472c-ebf6-4dd0-9544-8bdf6480f871</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="148"
                  trans_unit_id="148-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="147">
            <SegmentId>993d83dd-1036-48a4-842a-835e881fbd0d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="147"
              trans_unit_id="147-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="148">
            <SegmentId>a03f472c-ebf6-4dd0-9544-8bdf6480f871</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="148"
              trans_unit_id="148-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="e8137b25-3965-408f-be68-b685b88ad6f6"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="e8137b25-3965-408f-be68-b685b88ad6f6">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Program.cs
// ...

// Wrapper function for ShardMap.OpenConnectionForKey() that automatically sets CONTEXT_INFO to the correct
// tenantId before returning a connection. As a best practice, you should only open connections using this 
// method to ensure that CONTEXT_INFO is always set before executing a query.
public static SqlConnection OpenConnectionForTenant(ShardMap shardMap, int tenantId, string connectionStr)
{
    SqlConnection conn = null;
    try
    {
        // Ask shard map to broker a validated connection for the given key
        conn = shardMap.OpenConnectionForKey(tenantId, connectionStr, ConnectionOptions.Validate);

        // Set CONTEXT_INFO to shardingKey to enable Row-Level Security filtering
        SqlCommand cmd = conn.CreateCommand();
        cmd.CommandText = @"SET CONTEXT_INFO @shardingKey";
        cmd.Parameters.AddWithValue("@shardingKey", tenantId);
        cmd.ExecuteNonQuery();

        return conn;
    }
    catch (Exception)
    {
        if (conn != null)
        {
            conn.Dispose();
        }

        throw;
    }
}

// ...

// Example query via ADO.NET SqlClient
// If row-level security is enabled, only Tenant 4's blogs will be listed
SqlDatabaseUtils.SqlRetryPolicy.ExecuteAction(() =&gt;
{
    using (SqlConnection conn = OpenConnectionForTenant(sharding.ShardMap, tenantId4, connStrBldr.ConnectionString))
    {
        SqlCommand cmd = conn.CreateCommand();
        cmd.CommandText = @"SELECT * FROM Blogs";

        Console.WriteLine("--\nAll blogs for TenantId {0} (using ADO.NET SqlClient):", tenantId4);
        SqlDataReader reader = cmd.ExecuteReader();
        while (reader.Read())
        {
            Console.WriteLine("{0}", reader["Name"]);
        }
    }
});
</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="df0678e8-4078-4640-9521-b48b243897bd"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="df0678e8-4078-4640-9521-b48b243897bd">
        <segment
          trans_unit_id="149">
          <SegmentId>a8f221ca-4b59-418f-ad30-570b4af2e9c0</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="149"
            trans_unit_id="149-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="305dd108-a943-4db3-8dfe-5436c852aa7e"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="305dd108-a943-4db3-8dfe-5436c852aa7e">
        <segment
          trans_unit_id="150">
          <SegmentId>cfeb4edb-6fb7-4e28-a19b-fb490b71dde1</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="150"
            trans_unit_id="150-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="5c1416a1-01f9-402f-a56b-f59d6051f5ce"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="5c1416a1-01f9-402f-a56b-f59d6051f5ce">
        <Lines>
          <MarkdownLine>
            <LineId>e37e3fd5-b184-4157-9424-4f3d7918d3d0</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="151">
                <SegmentId>6a321080-ca33-40bf-a9c2-9f1868cdd53c</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="151"
                  trans_unit_id="151-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="151">
            <SegmentId>6a321080-ca33-40bf-a9c2-9f1868cdd53c</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="151"
              trans_unit_id="151-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="a021fdd9-1737-4a4d-8383-6f5bb10e6a0b"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="a021fdd9-1737-4a4d-8383-6f5bb10e6a0b">
        <Lines>
          <MarkdownLine>
            <LineId>dd6875f1-fa25-42b7-8bbf-e245caf1111c</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="152">
                <SegmentId>481d92ce-c245-461e-8ea5-0f90593785a8</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="152"
                  trans_unit_id="152-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="153">
                <SegmentId>54b5793f-f17c-42bc-a9ed-d343b7b8b5f6</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="153"
                  trans_unit_id="153-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="154">
                <SegmentId>d7cbd1e4-ecad-4f23-809c-9ec0729bc6d9</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="154"
                  trans_unit_id="154-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="155">
                <SegmentId>c01ef78b-6130-4263-b25a-d2664f6d659a</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="155"
                  trans_unit_id="155-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="152">
            <SegmentId>481d92ce-c245-461e-8ea5-0f90593785a8</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="152"
              trans_unit_id="152-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="153">
            <SegmentId>54b5793f-f17c-42bc-a9ed-d343b7b8b5f6</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="153"
              trans_unit_id="153-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="154">
            <SegmentId>d7cbd1e4-ecad-4f23-809c-9ec0729bc6d9</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="154"
              trans_unit_id="154-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="155">
            <SegmentId>c01ef78b-6130-4263-b25a-d2664f6d659a</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="155"
              trans_unit_id="155-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="e59b49f7-764d-4767-85b8-6f42cd40aeaa"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="e59b49f7-764d-4767-85b8-6f42cd40aeaa">
        <Lines>
          <MarkdownLine>
            <LineId>c42e1087-4e98-4810-8f4b-8e9f6943a8b4</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="156">
                <SegmentId>bac3358b-18de-47a0-a293-ebe547192d0d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="156"
                  trans_unit_id="156-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="156"
                  trans_unit_id="156-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Elastic Database Jobs</internal_link_text>
                  <internal_link_url>sql-database-elastic-jobs-overview.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="156"
                  trans_unit_id="156-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="156">
            <SegmentId>bac3358b-18de-47a0-a293-ebe547192d0d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="156"
              trans_unit_id="156-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="156"
              trans_unit_id="156-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Elastic Database Jobs</internal_link_text>
              <internal_link_url>sql-database-elastic-jobs-overview.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="156"
              trans_unit_id="156-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="56b522ec-c661-488f-a9e2-59af68d92684"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="56b522ec-c661-488f-a9e2-59af68d92684">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>CREATE SCHEMA rls -- separate schema to organize RLS objects 
GO

CREATE FUNCTION rls.fn_tenantAccessPredicate(@TenantId int)     
    RETURNS TABLE     
    WITH SCHEMABINDING
AS
    RETURN SELECT 1 AS fn_accessResult          
        WHERE DATABASE_PRINCIPAL_ID() = DATABASE_PRINCIPAL_ID('dbo') -- the user in your application’s connection string (dbo is only for demo purposes!)         
        AND CONVERT(int, CONVERT(varbinary(4), CONTEXT_INFO())) = @TenantId -- @TenantId (int) is 4 bytes 
GO

CREATE SECURITY POLICY rls.tenantAccessPolicy
    ADD FILTER PREDICATE rls.fn_tenantAccessPredicate(TenantId) ON dbo.Blogs,
    ADD FILTER PREDICATE rls.fn_tenantAccessPredicate(TenantId) ON dbo.Posts
GO </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownNoteBlock"
        item_id="6d4522fd-f2b2-443e-9ee2-2584445534ac"
        item_type="Note"
        item_footer=""
        trans_unit_id="6d4522fd-f2b2-443e-9ee2-2584445534ac">
        <Lines>
          <MarkdownLine>
            <LineId>5902c8c4-1225-43dc-a480-5d247f361e3f</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="157">
                <SegmentId>de67eac2-702b-434f-8507-1df44685d2fa</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="157"
                  trans_unit_id="157-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="158">
                <SegmentId>f35ac134-976f-4316-8c75-0c0807108f66</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="158"
                  trans_unit_id="158-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="158"
                  trans_unit_id="158-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Apply Row-Level Security to all tables – helper script (blog)</internal_link_text>
                  <internal_link_url>http://blogs.msdn.com/b/sqlsecurity/archive/2015/03/31/apply-row-level-security-to-all-tables-helper-script</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="158"
                  trans_unit_id="158-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>2</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <NoteSign>&gt; [AZURE.TIP] </NoteSign>
        <Prefixes>
          <string />
        </Prefixes>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="157">
            <SegmentId>de67eac2-702b-434f-8507-1df44685d2fa</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="157"
              trans_unit_id="157-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="158">
            <SegmentId>f35ac134-976f-4316-8c75-0c0807108f66</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="158"
              trans_unit_id="158-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="158"
              trans_unit_id="158-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Apply Row-Level Security to all tables – helper script (blog)</internal_link_text>
              <internal_link_url>http://blogs.msdn.com/b/sqlsecurity/archive/2015/03/31/apply-row-level-security-to-all-tables-helper-script</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="158"
              trans_unit_id="158-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="05a9016b-bd3e-4436-ab1e-6951faf6e6ea"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="05a9016b-bd3e-4436-ab1e-6951faf6e6ea">
        <Lines>
          <MarkdownLine>
            <LineId>39c1de43-f017-43e2-bc0c-dce7ec81e7bf</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="159">
                <SegmentId>be040cc8-c8bf-47d3-b25b-9e304006f1d4</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="159"
                  trans_unit_id="159-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="159">
            <SegmentId>be040cc8-c8bf-47d3-b25b-9e304006f1d4</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="159"
              trans_unit_id="159-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="a33a583a-8f60-4dfe-88fb-4b049cd06ce6"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="a33a583a-8f60-4dfe-88fb-4b049cd06ce6">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>ALTER SECURITY POLICY rls.tenantAccessPolicy     
    ADD FILTER PREDICATE rls.fn_tenantAccessPredicate(TenantId) ON dbo.MyNewTable 
GO </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="b0712030-3e23-4afd-91e7-6440a83b3ab9"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="b0712030-3e23-4afd-91e7-6440a83b3ab9">
        <Lines>
          <MarkdownLine>
            <LineId>363df403-a27d-4892-a751-cbee8241b16d</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="160">
                <SegmentId>9081faff-4052-4cce-836b-e6578c79c9d1</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="160"
                  trans_unit_id="160-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="160">
            <SegmentId>9081faff-4052-4cce-836b-e6578c79c9d1</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="160"
              trans_unit_id="160-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="497414f3-5311-4654-a5b6-f9930677af3e"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="497414f3-5311-4654-a5b6-f9930677af3e">
        <segment
          trans_unit_id="161">
          <SegmentId>2d86a9d0-628c-4771-8ba2-defec5019fa2</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="161"
            trans_unit_id="161-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="010c858a-0965-4774-922a-1304f06ceadd"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="010c858a-0965-4774-922a-1304f06ceadd">
        <Lines>
          <MarkdownLine>
            <LineId>4b61123d-6afa-4c30-b3fc-7ed48199bd69</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="162">
                <SegmentId>c713d891-6871-4363-84bd-3a269d223ec3</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="162"
                  trans_unit_id="162-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="163">
                <SegmentId>6046ebb3-08c1-497e-948a-1acca9fe9d78</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="163"
                  trans_unit_id="163-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="164">
                <SegmentId>3b121df9-3f42-4420-8bd9-d3773a7c54ea</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="164"
                  trans_unit_id="164-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="165">
                <SegmentId>a083a594-787b-456b-836a-02df03e01fdf</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="165"
                  trans_unit_id="165-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="165"
                  trans_unit_id="165-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Row-Level Security: Blocking unauthorized INSERTs (blog)</internal_link_text>
                  <internal_link_url>http://blogs.msdn.com/b/sqlsecurity/archive/2015/03/23/row-level-security-blocking-unauthorized-inserts</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="165"
                  trans_unit_id="165-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="162">
            <SegmentId>c713d891-6871-4363-84bd-3a269d223ec3</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="162"
              trans_unit_id="162-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="163">
            <SegmentId>6046ebb3-08c1-497e-948a-1acca9fe9d78</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="163"
              trans_unit_id="163-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="164">
            <SegmentId>3b121df9-3f42-4420-8bd9-d3773a7c54ea</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="164"
              trans_unit_id="164-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="165">
            <SegmentId>a083a594-787b-456b-836a-02df03e01fdf</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="165"
              trans_unit_id="165-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="165"
              trans_unit_id="165-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Row-Level Security: Blocking unauthorized INSERTs (blog)</internal_link_text>
              <internal_link_url>http://blogs.msdn.com/b/sqlsecurity/archive/2015/03/23/row-level-security-blocking-unauthorized-inserts</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="165"
              trans_unit_id="165-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="6209e26e-e17a-4ca0-b219-60c4678f3d83"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="6209e26e-e17a-4ca0-b219-60c4678f3d83">
        <Lines>
          <MarkdownLine>
            <LineId>356d89cf-44e1-4dd2-9c18-63b1f5f60c15</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="166">
                <SegmentId>64db67e4-57a2-48ab-a558-641421c2a3db</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="166"
                  trans_unit_id="166-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="166">
            <SegmentId>64db67e4-57a2-48ab-a558-641421c2a3db</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="166"
              trans_unit_id="166-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="1fcf7a57-4f77-4c0e-bba1-8ffc68115005"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="1fcf7a57-4f77-4c0e-bba1-8ffc68115005">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>-- Create a scalar version of the predicate function for use in check constraints 
CREATE FUNCTION rls.fn_tenantAccessPredicateScalar(@TenantId int)     
    RETURNS bit 
AS     
    BEGIN     
        IF EXISTS( SELECT 1 FROM rls.fn_tenantAccessPredicate(@TenantId) )         
            RETURN 1     
        RETURN 0 
    END 
GO 

-- Add the function as a check constraint on all sharded tables 
ALTER TABLE Blogs     
    WITH NOCHECK -- don't check data already in table     
    ADD CONSTRAINT chk_blocking_Blogs -- needs a unique name     
    CHECK( rls.fn_tenantAccessPredicateScalar(TenantId) = 1 ) 
GO

ALTER TABLE Posts     
    WITH NOCHECK     
    ADD CONSTRAINT chk_blocking_Posts     
    CHECK( rls.fn_tenantAccessPredicateScalar(TenantId) = 1 ) 
GO </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="7edccc0c-e1fd-439c-be92-88bbd482c4cc"
        item_type="NormalParagraph"
        item_footer="&#xA;"
        trans_unit_id="7edccc0c-e1fd-439c-be92-88bbd482c4cc">
        <Lines>
          <MarkdownLine>
            <LineId>21e370e9-8677-4a52-9420-ce3d66c8c166</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="167">
                <SegmentId>f3a0666d-2f64-4a37-9504-aa1abfdaee84</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="167"
                  trans_unit_id="167-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="168">
                <SegmentId>c6cd35e1-d83f-485e-ad20-a2e059d8b6c4</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="168"
                  trans_unit_id="168-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="169">
                <SegmentId>e2eabc2b-a0b3-45a5-b006-8f648dfce095</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="169"
                  trans_unit_id="169-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="167">
            <SegmentId>f3a0666d-2f64-4a37-9504-aa1abfdaee84</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="167"
              trans_unit_id="167-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="168">
            <SegmentId>c6cd35e1-d83f-485e-ad20-a2e059d8b6c4</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="168"
              trans_unit_id="168-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="169">
            <SegmentId>e2eabc2b-a0b3-45a5-b006-8f648dfce095</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="169"
              trans_unit_id="169-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="3bed906d-38b6-4c53-8899-1857613dcdef"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="3bed906d-38b6-4c53-8899-1857613dcdef">
        <segment
          trans_unit_id="170">
          <SegmentId>99c5b3cf-a638-4239-9ce1-cb1154ef6bae</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="170"
            trans_unit_id="170-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="afe06598-9827-4f38-a179-8ab43648bbb2"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="afe06598-9827-4f38-a179-8ab43648bbb2">
        <Lines>
          <MarkdownLine>
            <LineId>81f08a0e-2f95-4f82-aa89-ec3708c62af1</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="171">
                <SegmentId>9f0238f1-1ab0-438b-ace9-dd95c5810e5b</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="171"
                  trans_unit_id="171-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="172">
                <SegmentId>607f93a2-1585-4e0f-86a4-e1f5bd9cf52f</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="172"
                  trans_unit_id="172-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="171">
            <SegmentId>9f0238f1-1ab0-438b-ace9-dd95c5810e5b</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="171"
              trans_unit_id="171-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="172">
            <SegmentId>607f93a2-1585-4e0f-86a4-e1f5bd9cf52f</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="172"
              trans_unit_id="172-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="f44a90d0-f4d5-4791-828b-30aa06400b7f"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="f44a90d0-f4d5-4791-828b-30aa06400b7f">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>-- Create default constraints to auto-populate TenantId with the value of CONTEXT_INFO for inserts 
ALTER TABLE Blogs     
    ADD CONSTRAINT df_TenantId_Blogs      
    DEFAULT CONVERT(int, CONVERT(varbinary(4), CONTEXT_INFO())) FOR TenantId 
GO

ALTER TABLE Posts     
    ADD CONSTRAINT df_TenantId_Posts      
    DEFAULT CONVERT(int, CONVERT(varbinary(4), CONTEXT_INFO())) FOR TenantId 
GO </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="6f6b08c0-50c2-4afc-a424-ecbc06a826ee"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="6f6b08c0-50c2-4afc-a424-ecbc06a826ee">
        <Lines>
          <MarkdownLine>
            <LineId>5717be1d-56bb-4fe4-beb6-b348fa3c617f</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="173">
                <SegmentId>e6ea5ee2-e25d-4259-bc35-d18e4536197e</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="173"
                  trans_unit_id="173-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="173">
            <SegmentId>e6ea5ee2-e25d-4259-bc35-d18e4536197e</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="173"
              trans_unit_id="173-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="52569ca9-7861-4f31-a4ff-6308591209ba"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="52569ca9-7861-4f31-a4ff-6308591209ba">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>SqlDatabaseUtils.SqlRetryPolicy.ExecuteAction(() =&gt; 
{   
    using (var db = new ElasticScaleContext&lt;int&gt;(sharding.ShardMap, tenantId, connStrBldr.ConnectionString))
    {
        var blog = new Blog { Name = name }; // default constraint sets TenantId automatically     
        db.Blogs.Add(blog);     
        db.SaveChanges();   
    } 
}); </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownNoteBlock"
        item_id="8fa2e3f4-ba84-429a-ac08-59c1b6818473"
        item_type="Note"
        item_footer=""
        trans_unit_id="8fa2e3f4-ba84-429a-ac08-59c1b6818473">
        <Lines>
          <MarkdownLine>
            <LineId>730449bd-e277-47d1-8b0a-79c06fa72e2b</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="174">
                <SegmentId>30789980-01a7-47c6-90e1-7851cc319d37</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="174"
                  trans_unit_id="174-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="175">
                <SegmentId>a74be475-4c8d-4032-91ea-a0b9608029b4</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="175"
                  trans_unit_id="175-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="176">
                <SegmentId>1ed6503c-578c-4bb5-98ba-68688a1a2b49</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="176"
                  trans_unit_id="176-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="177">
                <SegmentId>a9b19580-e2b1-4c15-bf02-8834199854ed</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="177"
                  trans_unit_id="177-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>1</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <NoteSign>&gt; [AZURE.NOTE] </NoteSign>
        <Prefixes>
          <string />
        </Prefixes>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="174">
            <SegmentId>30789980-01a7-47c6-90e1-7851cc319d37</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="174"
              trans_unit_id="174-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="175">
            <SegmentId>a74be475-4c8d-4032-91ea-a0b9608029b4</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="175"
              trans_unit_id="175-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="176">
            <SegmentId>1ed6503c-578c-4bb5-98ba-68688a1a2b49</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="176"
              trans_unit_id="176-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="177">
            <SegmentId>a9b19580-e2b1-4c15-bf02-8834199854ed</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="177"
              trans_unit_id="177-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="f8bff352-97c6-4db1-976e-67dd7df729c5"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="f8bff352-97c6-4db1-976e-67dd7df729c5">
        <segment
          trans_unit_id="178">
          <SegmentId>2c382c65-8dc1-4164-9b42-caad214e3e2c</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="178"
            trans_unit_id="178-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="e91069c0-0778-43a7-b98d-edccf3ef6f72"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="e91069c0-0778-43a7-b98d-edccf3ef6f72">
        <Lines>
          <MarkdownLine>
            <LineId>3f2e04fe-2fae-4c7c-bd3c-8b3fe5c8afaf</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="179">
                <SegmentId>ad47efdb-b8b5-47cf-b557-b86f6a2a1f11</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="179"
                  trans_unit_id="179-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="180">
                <SegmentId>a94af6d8-9530-4c1b-98c0-bf0ec41b0762</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="180"
                  trans_unit_id="180-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="181">
                <SegmentId>f891fec8-5cdd-428b-aa31-3eddca055914</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="181"
                  trans_unit_id="181-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="179">
            <SegmentId>ad47efdb-b8b5-47cf-b557-b86f6a2a1f11</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="179"
              trans_unit_id="179-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="180">
            <SegmentId>a94af6d8-9530-4c1b-98c0-bf0ec41b0762</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="180"
              trans_unit_id="180-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="181">
            <SegmentId>f891fec8-5cdd-428b-aa31-3eddca055914</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="181"
              trans_unit_id="181-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="da8b5cfb-8f2a-41ac-a04d-b0d3c155d561"
        item_type="FencedCodeBlock"
        item_footer="&#xA;"
        trans_unit_id="da8b5cfb-8f2a-41ac-a04d-b0d3c155d561">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>-- New predicate function that adds superuser logic
CREATE FUNCTION rls.fn_tenantAccessPredicateWithSuperUser(@TenantId int)
    RETURNS TABLE
    WITH SCHEMABINDING
AS
    RETURN SELECT 1 AS fn_accessResult 
        WHERE 
        (
            DATABASE_PRINCIPAL_ID() = DATABASE_PRINCIPAL_ID('dbo') -- note, should not be dbo!
            AND CONVERT(int, CONVERT(varbinary(4), CONTEXT_INFO())) = @TenantId
        ) 
        OR
        (
            DATABASE_PRINCIPAL_ID() = DATABASE_PRINCIPAL_ID('superuser')
        )
GO

-- Atomically swap in the new predicate function on each table
ALTER SECURITY POLICY rls.tenantAccessPolicy
    ALTER FILTER PREDICATE rls.fn_tenantAccessPredicateWithSuperUser(TenantId) ON dbo.Blogs,
    ALTER FILTER PREDICATE rls.fn_tenantAccessPredicateWithSuperUser(TenantId) ON dbo.Posts
GO</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="5c2f7c66-517b-4969-9790-00b98d6f4ae3"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="5c2f7c66-517b-4969-9790-00b98d6f4ae3">
        <segment
          trans_unit_id="182">
          <SegmentId>a4680fa3-c3a4-4216-811e-a86d9e64acaa</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="182"
            trans_unit_id="182-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="f7636932-b5e8-4d89-b637-980df7aba701"
        item_type="List"
        item_footer="&#xA;"
        trans_unit_id="f7636932-b5e8-4d89-b637-980df7aba701">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="5577a266-3261-4fe1-bc4e-a6fcff874f50"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="5577a266-3261-4fe1-bc4e-a6fcff874f50">
              <Lines>
                <MarkdownLine>
                  <LineId>f658664a-9bc3-42b4-b58a-0038560643fa</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="183">
                      <SegmentId>3475e70e-1ded-4dac-bf58-b5b84b5bad2a</SegmentId>
                      <MarkdownInternalBoldItem
                        internal_item_id="1"
                        internal_item_parent_id="183"
                        trans_unit_id="183-1"
                        internal_item_type="Bold">
                        <internal_items />
                        <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                      </MarkdownInternalBoldItem>
                      <InternalNormalItem
                        internal_item_id="2"
                        internal_item_parent_id="183"
                        trans_unit_id="183-2"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="183">
                  <SegmentId>3475e70e-1ded-4dac-bf58-b5b84b5bad2a</SegmentId>
                  <MarkdownInternalBoldItem
                    internal_item_id="1"
                    internal_item_parent_id="183"
                    trans_unit_id="183-1"
                    internal_item_type="Bold">
                    <internal_items />
                    <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                  </MarkdownInternalBoldItem>
                  <InternalNormalItem
                    internal_item_id="2"
                    internal_item_parent_id="183"
                    trans_unit_id="183-2"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="fff5c05b-d306-42f9-aead-96d37c214dad"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="fff5c05b-d306-42f9-aead-96d37c214dad">
              <Lines>
                <MarkdownLine>
                  <LineId>6f70307d-ea4d-4b67-abe9-5ff94f46b06a</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="184">
                      <SegmentId>b16492ff-272d-44ba-acd2-facd5f85aa6b</SegmentId>
                      <MarkdownInternalBoldItem
                        internal_item_id="1"
                        internal_item_parent_id="184"
                        trans_unit_id="184-1"
                        internal_item_type="Bold">
                        <internal_items />
                        <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                      </MarkdownInternalBoldItem>
                      <InternalNormalItem
                        internal_item_id="2"
                        internal_item_parent_id="184"
                        trans_unit_id="184-2"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                    <MarkdownSegment
                      trans_unit_id="185">
                      <SegmentId>161ae1d1-77c2-4df7-b8e4-a5ea1d6910e8</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="185"
                        trans_unit_id="185-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                      <LinkItem
                        internal_item_id="2"
                        internal_item_parent_id="185"
                        trans_unit_id="185-2"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Apply Row-Level Security automatically to newly created tables (blog)</internal_link_text>
                        <internal_link_url>http://blogs.msdn.com/b/sqlsecurity/archive/2015/05/22/apply-row-level-security-automatically-to-newly-created-tables.aspx</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                      <InternalNormalItem
                        internal_item_id="3"
                        internal_item_parent_id="185"
                        trans_unit_id="185-3"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="184">
                  <SegmentId>b16492ff-272d-44ba-acd2-facd5f85aa6b</SegmentId>
                  <MarkdownInternalBoldItem
                    internal_item_id="1"
                    internal_item_parent_id="184"
                    trans_unit_id="184-1"
                    internal_item_type="Bold">
                    <internal_items />
                    <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                  </MarkdownInternalBoldItem>
                  <InternalNormalItem
                    internal_item_id="2"
                    internal_item_parent_id="184"
                    trans_unit_id="184-2"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
                <MarkdownSegment
                  trans_unit_id="185">
                  <SegmentId>161ae1d1-77c2-4df7-b8e4-a5ea1d6910e8</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="185"
                    trans_unit_id="185-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                  <LinkItem
                    internal_item_id="2"
                    internal_item_parent_id="185"
                    trans_unit_id="185-2"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Apply Row-Level Security automatically to newly created tables (blog)</internal_link_text>
                    <internal_link_url>http://blogs.msdn.com/b/sqlsecurity/archive/2015/05/22/apply-row-level-security-automatically-to-newly-created-tables.aspx</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                  <InternalNormalItem
                    internal_item_id="3"
                    internal_item_parent_id="185"
                    trans_unit_id="185-3"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="eed3620c-a868-4d43-af53-bf92388772f3"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="eed3620c-a868-4d43-af53-bf92388772f3">
        <segment
          trans_unit_id="186">
          <SegmentId>a97fef2b-4f25-4902-a89b-aa58f9798148</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="186"
            trans_unit_id="186-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="cafcc7d5-1ba7-43fa-913c-9517fe211550"
        item_type="NormalParagraph"
        item_footer="&#xA;"
        trans_unit_id="cafcc7d5-1ba7-43fa-913c-9517fe211550">
        <Lines>
          <MarkdownLine>
            <LineId>201b41c1-25b3-4ffd-a12d-30f547e98665</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="187">
                <SegmentId>34921044-7295-4a70-b54c-4086eb7919da</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="187"
                  trans_unit_id="187-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="188">
                <SegmentId>fd569c6b-3838-4c19-99a9-cedb2fe93b10</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="188"
                  trans_unit_id="188-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="189">
                <SegmentId>64d38097-720d-43c1-a073-5e67ccf99dfa</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="189"
                  trans_unit_id="189-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="189"
                  trans_unit_id="189-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Elastic Database Tools Documentation Map</internal_link_text>
                  <internal_link_url>sql-database-elastic-scale-documentation-map.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="189"
                  trans_unit_id="189-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="4"
                  internal_item_parent_id="189"
                  trans_unit_id="189-4"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Row-Level Security reference</internal_link_text>
                  <internal_link_url>https://msdn.microsoft.com/library/dn765131</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="5"
                  internal_item_parent_id="189"
                  trans_unit_id="189-5"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="187">
            <SegmentId>34921044-7295-4a70-b54c-4086eb7919da</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="187"
              trans_unit_id="187-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="188">
            <SegmentId>fd569c6b-3838-4c19-99a9-cedb2fe93b10</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="188"
              trans_unit_id="188-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="189">
            <SegmentId>64d38097-720d-43c1-a073-5e67ccf99dfa</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="189"
              trans_unit_id="189-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="189"
              trans_unit_id="189-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Elastic Database Tools Documentation Map</internal_link_text>
              <internal_link_url>sql-database-elastic-scale-documentation-map.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="189"
              trans_unit_id="189-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="4"
              internal_item_parent_id="189"
              trans_unit_id="189-4"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Row-Level Security reference</internal_link_text>
              <internal_link_url>https://msdn.microsoft.com/library/dn765131</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="5"
              internal_item_parent_id="189"
              trans_unit_id="189-5"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="604f8cab-a9fc-4040-aed4-9ff92568661a"
        item_type="NormalParagraph"
        item_footer="&#xA;&#xA;&#xA;&#xA;&#xA;&#xA;&#xA;"
        trans_unit_id="604f8cab-a9fc-4040-aed4-9ff92568661a">
        <Lines>
          <MarkdownLine>
            <LineId>63b52d18-d3bb-4337-988b-4f37da222eee</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="190">
                <SegmentId>73d004dc-3dc2-429c-8786-0dfa7e09f033</SegmentId>
                <MarkdownInternalTokenItem
                  internal_item_id="1"
                  internal_item_parent_id="190"
                  trans_unit_id="190-1"
                  internal_item_type="Token">
                  <internal_items />
                  <TokenPrefix>AZURE.INCLUDE </TokenPrefix>
                  <TokenShortName>elastic-scale-include</TokenShortName>
                  <TokenHyperLink>../../includes/elastic-scale-include.md</TokenHyperLink>
                </MarkdownInternalTokenItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="190">
            <SegmentId>73d004dc-3dc2-429c-8786-0dfa7e09f033</SegmentId>
            <MarkdownInternalTokenItem
              internal_item_id="1"
              internal_item_parent_id="190"
              trans_unit_id="190-1"
              internal_item_type="Token">
              <internal_items />
              <TokenPrefix>AZURE.INCLUDE </TokenPrefix>
              <TokenShortName>elastic-scale-include</TokenShortName>
              <TokenHyperLink>../../includes/elastic-scale-include.md</TokenHyperLink>
            </MarkdownInternalTokenItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
    </ArrayOfMarkdownBlockBase>
  </block_element>
  <references>
    <ArrayOfMarkdownLinkedReference xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownLinkedReference
        item_id="af3fc832-b62c-448e-9f57-77eafa403d59"
        item_type="LinkedReference"
        item_footer="footer_not_set"
        trans_unit_id="af3fc832-b62c-448e-9f57-77eafa403d59">
        <link_id>1</link_id>
        <link_uri>./media/sql-database-elastic-tools-multi-tenant-row-level-security/blogging-app.png</link_uri>
        <link_title />
      </MarkdownLinkedReference>
    </ArrayOfMarkdownLinkedReference>
  </references>
</markdown_skeleton_root>