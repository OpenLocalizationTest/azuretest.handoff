<markdown_skeleton_root>
  <block_element>
    <ArrayOfMarkdownBlockBase xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownBlockBase
        xsi:type="MarkdownAzureMetadataBlock"
        item_id="c3e28900-6b61-474e-9a17-ca4e51b39854"
        item_type="AzureMetadata"
        item_footer="footer_not_set"
        trans_unit_id="c3e28900-6b61-474e-9a17-ca4e51b39854">
        <LocalizeItemList>
          <MarkdownInternalXmlItem
            internal_item_id="65e22717-2b2c-40b5-9485-cad7ff8e77f2"
            trans_unit_id="101"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
          <MarkdownInternalXmlItem
            internal_item_id="95e7f266-5a7c-4e7e-b61c-ee1d7d2279c8"
            trans_unit_id="102"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
        </LocalizeItemList>
        <ItemValue>&lt;properties
   pageTitle="65e22717-2b2c-40b5-9485-cad7ff8e77f2"
   description="95e7f266-5a7c-4e7e-b61c-ee1d7d2279c8"
   services="service-fabric"
   documentationCenter=".net"
   authors="jessebenson"
   manager="timlt"
   editor=""/&gt;

&lt;tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="08/11/2015"
   ms.author="claudioc"/&gt;

</ItemValue>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="66222f1d-b838-4219-af7f-18449038fef9"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="66222f1d-b838-4219-af7f-18449038fef9">
        <segment
          trans_unit_id="103">
          <SegmentId>d7108bc1-3a3d-4429-9558-e18ce050e38f</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="103"
            trans_unit_id="103-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>1</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="3ad416e7-7037-4c9b-b712-61f61aac32f6"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="3ad416e7-7037-4c9b-b712-61f61aac32f6">
        <Lines>
          <MarkdownLine>
            <LineId>2a8bf431-a28b-4ef8-a050-0f5d9c5228de</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="104">
                <SegmentId>e5cd4ff9-d599-4319-ab65-a31850efa989</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="104"
                  trans_unit_id="104-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="104">
            <SegmentId>e5cd4ff9-d599-4319-ab65-a31850efa989</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="104"
              trans_unit_id="104-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="0040cf65-21a0-4d80-98ed-0e83ef596eee"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="0040cf65-21a0-4d80-98ed-0e83ef596eee">
        <Lines>
          <MarkdownLine>
            <LineId>ba222720-60de-4891-9e72-12d8d5b7f0a5</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="105">
                <SegmentId>65d35760-05d8-485e-b519-f703d8f89338</SegmentId>
                <ImageItem
                  internal_item_id="1"
                  internal_item_parent_id="105"
                  trans_unit_id="105-1"
                  internal_item_type="Image">
                  <internal_items />
                  <internal_Image_type>Reference</internal_Image_type>
                  <internal_link_text />
                  <internal_link_id>1</internal_link_id>
                </ImageItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="105">
            <SegmentId>65d35760-05d8-485e-b519-f703d8f89338</SegmentId>
            <ImageItem
              internal_item_id="1"
              internal_item_parent_id="105"
              trans_unit_id="105-1"
              internal_item_type="Image">
              <internal_items />
              <internal_Image_type>Reference</internal_Image_type>
              <internal_link_text />
              <internal_link_id>1</internal_link_id>
            </ImageItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="f73d0446-a723-4d32-a90b-0c50df87d14d"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="f73d0446-a723-4d32-a90b-0c50df87d14d">
        <Lines>
          <MarkdownLine>
            <LineId>1ae79d2c-ab2f-41f6-93f0-520c6782780d</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="106">
                <SegmentId>85f9bf3f-8255-4e31-884c-22ccdeddee48</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="106"
                  trans_unit_id="106-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="107">
                <SegmentId>5bf72616-55dd-4def-82c5-a7c8109fa511</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="107"
                  trans_unit_id="107-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>d395fd76-8c92-4bd8-b5f1-1ea7fffea917</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="108">
                <SegmentId>534d9b1a-267a-45d2-8bb3-6bb60950ff60</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="108"
                  trans_unit_id="108-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="109">
                <SegmentId>d2495603-1e73-439d-885e-32bbf0d4eb38</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="109"
                  trans_unit_id="109-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="106">
            <SegmentId>85f9bf3f-8255-4e31-884c-22ccdeddee48</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="106"
              trans_unit_id="106-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="107">
            <SegmentId>5bf72616-55dd-4def-82c5-a7c8109fa511</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="107"
              trans_unit_id="107-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="108">
            <SegmentId>534d9b1a-267a-45d2-8bb3-6bb60950ff60</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="108"
              trans_unit_id="108-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="109">
            <SegmentId>d2495603-1e73-439d-885e-32bbf0d4eb38</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="109"
              trans_unit_id="109-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="16aa9dbd-e755-425f-be07-537411d2f6e0"
        item_type="NormalParagraph"
        item_footer="&#xA;"
        trans_unit_id="16aa9dbd-e755-425f-be07-537411d2f6e0">
        <Lines>
          <MarkdownLine>
            <LineId>634ef17d-ea4d-4276-ae18-7b3c0f8c3aa2</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="110">
                <SegmentId>1c758402-bb39-432e-85ce-d9b0eaddf535</SegmentId>
                <ImageItem
                  internal_item_id="1"
                  internal_item_parent_id="110"
                  trans_unit_id="110-1"
                  internal_item_type="Image">
                  <internal_items />
                  <internal_Image_type>Reference</internal_Image_type>
                  <internal_link_text />
                  <internal_link_id>2</internal_link_id>
                </ImageItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="110">
            <SegmentId>1c758402-bb39-432e-85ce-d9b0eaddf535</SegmentId>
            <ImageItem
              internal_item_id="1"
              internal_item_parent_id="110"
              trans_unit_id="110-1"
              internal_item_type="Image">
              <internal_items />
              <internal_Image_type>Reference</internal_Image_type>
              <internal_link_text />
              <internal_link_id>2</internal_link_id>
            </ImageItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="6c91dde7-0f0e-4d66-ba0a-6b16d3981453"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="6c91dde7-0f0e-4d66-ba0a-6b16d3981453">
        <segment
          trans_unit_id="111">
          <SegmentId>d48b8001-b974-4726-b9e7-7294232c7126</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="111"
            trans_unit_id="111-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="5843a1e4-35de-4a99-a558-f507d381f103"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="5843a1e4-35de-4a99-a558-f507d381f103">
        <Lines>
          <MarkdownLine>
            <LineId>687a1341-2d7c-4b8f-8893-25b91790c3ea</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="112">
                <SegmentId>e1c23092-2615-4a1a-bfca-d07890f9ab23</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="112"
                  trans_unit_id="112-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="112">
            <SegmentId>e1c23092-2615-4a1a-bfca-d07890f9ab23</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="112"
              trans_unit_id="112-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="0c858086-f7b1-4dae-9cae-e6e98ba32706"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="0c858086-f7b1-4dae-9cae-e6e98ba32706">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface ISocialPerson : IActor
{
    Task AddFriend(long person);
    Task RemoveFriend(long person);
    Task&lt;List&lt;SocialStatus&gt;&gt; GetFriendsFeed();
    Task&lt;SocialStatus&gt; GetStatus();
    Task&lt;List&lt;SocialStatus&gt;&gt; GetMyFeed();
    Task UpdateStatus(string status);
    Task UpdateFriendFeedAsync(SocialStatus status);
}

[DataContract]
Public class SocialPersonState
{
    [DataMember]
    public string _name; // my name
    [DataMember]
    public List&lt;long&gt; _friends; // list of my friends' IDs
    [DataMember]
    public List&lt;SocialStatus&gt; _friendsFeed; // my friends feeds
    [DataMember]
    public List&lt;SocialStatus&gt; _myFeed; // this is my feed, all my status updates
    [DataMember]
    public SocialStatus _lastStatus; // this is my last update
}

public class SocialPerson : Actor, ISocialPerson
{
    public override Task ActivateAsync()
    {
        CreateOrRestoreState();
        return base.ActivateAsync();
    }

    public Task AddFriend(long person)
    {
        State._friends.Add(person);
        return TaskDone.Done;
    }

    public Task RemoveFriend(long person)
    {
        State._friends.Remove(person);
        return TaskDone.Done;
    }

    public Task&lt;List&lt;SocialStatus&gt;&gt; GetFriendsFeed()
    {
        return Task.FromResult(State._friendsFeed);
    }

    public Task UpdateStatus(string status)
    {
        State._lastStatus = new SocialStatus()
        {
            Name = _name,
            Status = status,
            Timestamp = DateTime.UtcNow
        };
        State._myFeed.Add(_lastStatus);

        var taskList = new List&lt;Task&gt;();

        foreach(var friendId in _friends)
        {
            var friend = ActorProxy.Create&lt;ISocialPerson&gt;(friendId);
            taskList.Add(friend.UpdateFriendFeedAsync(_lastStatus));
        }

        return Task.WhenAll(taskList);
    }

    public Task UpdateFriendFeed(SocialStatus status)
    {
        State._friendsFeed.Add(status);

        return TaskDone.Done;
    }

    public Task&lt;SocialStatus&gt; GetStatus()
    {
        return Task.FromResult(State._lastStatus);
    }

    public Task&lt;List&lt;SocialStatus&gt;&gt; GetMyFeed()
    {
        return Task.FromResult(State._myFeed);
    }
}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="1ce1cab0-d398-45b7-85aa-648aaefcc51c"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="1ce1cab0-d398-45b7-85aa-648aaefcc51c">
        <Lines>
          <MarkdownLine>
            <LineId>5a44f2b3-1ea2-4d77-a5fe-a1a180c1d5db</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="113">
                <SegmentId>f4ab7387-96e5-4a21-ada4-eaef964c647c</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="113"
                  trans_unit_id="113-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="114">
                <SegmentId>f5fdf99d-1096-4064-80d0-79e84a578bc4</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="114"
                  trans_unit_id="114-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="115">
                <SegmentId>41d3acac-b1ef-4139-916a-d518b3681923</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="115"
                  trans_unit_id="115-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>dc5a45cb-f38a-463c-bc7a-8ecafdf9c534</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="116">
                <SegmentId>f53dbde8-cd49-4915-a1ff-d7751e43499a</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="116"
                  trans_unit_id="116-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="117">
                <SegmentId>5c41680f-cefa-4146-ad57-fa86bf3bd065</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="117"
                  trans_unit_id="117-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>4279f0a4-3354-45d3-ae3e-2bfe0227a768</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="118">
                <SegmentId>f1c2e5a7-228c-458b-9651-95a3b2c1ef8d</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="118"
                  trans_unit_id="118-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="119">
                <SegmentId>7d2e3896-ca5f-4c36-9c11-e731856685ea</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="119"
                  trans_unit_id="119-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>c4caeebe-2fb7-4c00-bfba-d40df471721e</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="120">
                <SegmentId>83116856-495d-4a7c-8b36-b173067d79dd</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="120"
                  trans_unit_id="120-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="113">
            <SegmentId>f4ab7387-96e5-4a21-ada4-eaef964c647c</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="113"
              trans_unit_id="113-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="114">
            <SegmentId>f5fdf99d-1096-4064-80d0-79e84a578bc4</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="114"
              trans_unit_id="114-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="115">
            <SegmentId>41d3acac-b1ef-4139-916a-d518b3681923</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="115"
              trans_unit_id="115-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="116">
            <SegmentId>f53dbde8-cd49-4915-a1ff-d7751e43499a</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="116"
              trans_unit_id="116-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="117">
            <SegmentId>5c41680f-cefa-4146-ad57-fa86bf3bd065</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="117"
              trans_unit_id="117-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="118">
            <SegmentId>f1c2e5a7-228c-458b-9651-95a3b2c1ef8d</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="118"
              trans_unit_id="118-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="119">
            <SegmentId>7d2e3896-ca5f-4c36-9c11-e731856685ea</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="119"
              trans_unit_id="119-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="120">
            <SegmentId>83116856-495d-4a7c-8b36-b173067d79dd</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="120"
              trans_unit_id="120-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="f62ec3c6-40a4-46bf-9a45-fe6f538cedfe"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="f62ec3c6-40a4-46bf-9a45-fe6f538cedfe">
        <segment
          trans_unit_id="121">
          <SegmentId>1a2036da-5cf5-4917-9977-0ffa4fe0fd44</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="121"
            trans_unit_id="121-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="a30f9744-4c8f-4b8f-ac4a-fc00d13504b2"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="a30f9744-4c8f-4b8f-ac4a-fc00d13504b2">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface IGroupChat : IActor
{
    Task PublishMessageAsync(long participantId, string message);
    Task&lt;List&lt;GroupChatMessage&gt;&gt; GetMessagesAsync();
    Task AddParticipantAsync(long participantId);
    Task RemoveParticipantAsync(long partitipantId);
}

[DataContract]
public class GroupChatParticipantState
{
    [DataMember]
    Public long _groupChatId;
    [DataMember]
    public List&lt;GroupChatMessage&gt; _messages;
}

public class GroupChatParticipant : Actor&lt;GroupChatParticipantState&gt;, IGroupParticipant
{
    public Task SendMessageAsync(string message)
    {
        if (State._groupChatId != -1)
        {
            var groupChat = ActorProxy.Create&lt;IGroupChat&gt;(State._groupChatId);
            return groupChat.PublishMessageAsync(this.Id, message);
        }

        return TaskDone.Done;
    }

    ...
}

[DataContract]
public class GroupChatState
{
    [DataMember]
    Public List&lt;long&gt; _participants;
    [DataMember]
    Public List&lt;GroupChatMessage&gt; _messages;
}


public class GroupChat : Actor&lt;GroupChatState&gt;, IGroupChat
{

public Task PublishMessageAsync(long participantId, string message)
{
    var chatMessage = new GroupChatMessage()
    {
        ParticipantId = participantId,
        Message = message,
        Timestamp = DateTime.Now
    };

    State._messages.Add(chatMessage);

    var taskList = new List&lt;Task&gt;();

    foreach(var id in State._participants)
    {
        if (id != participantId)
        {
            var participant = ActorProxy.Create&lt;IGroupParticipant&gt;.Create(id);
            taskList.Add(participant.ReceiveMessageAsync(chatMessage));
        }
    }
    return Task.WhenAll(taskList);
}

...

}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="a716ada1-11c9-48e6-a784-65b5f5dfb095"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="a716ada1-11c9-48e6-a784-65b5f5dfb095">
        <Lines>
          <MarkdownLine>
            <LineId>a368eeb9-e42d-48a3-a2fd-b0982a260a8e</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="122">
                <SegmentId>e4cc3858-4313-4f43-9cd9-b52e555d656a</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="122"
                  trans_unit_id="122-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="122">
            <SegmentId>e4cc3858-4313-4f43-9cd9-b52e555d656a</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="122"
              trans_unit_id="122-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="cd2c286f-b536-46ea-b8c8-43d6d4a64184"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="cd2c286f-b536-46ea-b8c8-43d6d4a64184">
        <segment
          trans_unit_id="123">
          <SegmentId>a9c31f7c-11fa-4aee-8692-a5ae2bf983c3</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="123"
            trans_unit_id="123-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="647e9bcb-ec57-4294-adc5-2f91088c3813"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="647e9bcb-ec57-4294-adc5-2f91088c3813">
        <Lines>
          <MarkdownLine>
            <LineId>b4bfa3fe-3370-41b4-8d3d-2fce089f166c</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="124">
                <SegmentId>375cb4cc-efdc-44ad-8137-a8eaad456276</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="124"
                  trans_unit_id="124-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Smart Cache</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="124">
            <SegmentId>375cb4cc-efdc-44ad-8137-a8eaad456276</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="124"
              trans_unit_id="124-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Smart Cache</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="b316cebd-5d8e-4188-87f2-4add33c343c5"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="b316cebd-5d8e-4188-87f2-4add33c343c5">
        <Lines>
          <MarkdownLine>
            <LineId>2b6d3237-93ad-47a3-b35d-45ebc71773f9</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="125">
                <SegmentId>b184efa2-44b2-4654-b92c-1f07ab0252fa</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="125"
                  trans_unit_id="125-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Resource Governance</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="125">
            <SegmentId>b184efa2-44b2-4654-b92c-1f07ab0252fa</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="125"
              trans_unit_id="125-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Resource Governance</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="ee8a6394-62e1-43ae-ab06-81d5bf695091"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="ee8a6394-62e1-43ae-ab06-81d5bf695091">
        <Lines>
          <MarkdownLine>
            <LineId>a4586e5f-617b-40d6-acee-12512e324d94</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="126">
                <SegmentId>cbcbfbb2-590b-4162-977b-cf3803dcba8a</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="126"
                  trans_unit_id="126-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="126">
            <SegmentId>cbcbfbb2-590b-4162-977b-cf3803dcba8a</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="126"
              trans_unit_id="126-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="95b3943b-6a6d-439a-916a-4d37b3760366"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="95b3943b-6a6d-439a-916a-4d37b3760366">
        <Lines>
          <MarkdownLine>
            <LineId>cda09fca-297f-4895-af8d-7d80fa134625</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="127">
                <SegmentId>bb755b6c-96b0-4518-9fd8-8a1011fae0f4</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="127"
                  trans_unit_id="127-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Internet of Things</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="127">
            <SegmentId>bb755b6c-96b0-4518-9fd8-8a1011fae0f4</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="127"
              trans_unit_id="127-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Internet of Things</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="7d66787d-53ab-4c70-8ebd-eced74ba4d86"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="7d66787d-53ab-4c70-8ebd-eced74ba4d86">
        <Lines>
          <MarkdownLine>
            <LineId>3917128c-3a02-4b2b-a5b5-15a86a751781</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="128">
                <SegmentId>ad742c55-0c5e-4f77-a530-160f563df2ab</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="128"
                  trans_unit_id="128-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Distributed Computation</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-distributed-computation.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="128">
            <SegmentId>ad742c55-0c5e-4f77-a530-160f563df2ab</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="128"
              trans_unit_id="128-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Distributed Computation</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-distributed-computation.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="26ef96b6-1898-4dd5-8b1a-8a6465109fb0"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="26ef96b6-1898-4dd5-8b1a-8a6465109fb0">
        <Lines>
          <MarkdownLine>
            <LineId>68fbb563-cdf9-4b05-805d-3b47af631047</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="129">
                <SegmentId>477c5052-174e-4c08-885f-5789b854ad00</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="129"
                  trans_unit_id="129-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Some Anti-patterns</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="129">
            <SegmentId>477c5052-174e-4c08-885f-5789b854ad00</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="129"
              trans_unit_id="129-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Some Anti-patterns</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="426936ba-9212-4d67-be4e-f29252d5cccd"
        item_type="NormalParagraph"
        item_footer="&#xA;&#xA;"
        trans_unit_id="426936ba-9212-4d67-be4e-f29252d5cccd">
        <Lines>
          <MarkdownLine>
            <LineId>589457b1-e07c-4c5d-b356-17c70f9b23c2</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="130">
                <SegmentId>6fc99e16-487d-46aa-b694-3ef9e44d9aa7</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="130"
                  trans_unit_id="130-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="130">
            <SegmentId>6fc99e16-487d-46aa-b694-3ef9e44d9aa7</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="130"
              trans_unit_id="130-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
    </ArrayOfMarkdownBlockBase>
  </block_element>
  <references>
    <ArrayOfMarkdownLinkedReference xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownLinkedReference
        item_id="80377f8f-9a44-4102-87f3-148c5e86db67"
        item_type="LinkedReference"
        item_footer="footer_not_set"
        trans_unit_id="80377f8f-9a44-4102-87f3-148c5e86db67">
        <link_id>1</link_id>
        <link_uri>./media/service-fabric-reliable-actors-pattern-distributed-networks-and-graphs/distributedNetworks_arch1.png</link_uri>
        <link_title />
      </MarkdownLinkedReference>
      <MarkdownLinkedReference
        item_id="d31ea808-7cad-4de2-9c0a-d8ea5c986bfd"
        item_type="LinkedReference"
        item_footer="footer_not_set"
        trans_unit_id="d31ea808-7cad-4de2-9c0a-d8ea5c986bfd">
        <link_id>2</link_id>
        <link_uri>./media/service-fabric-reliable-actors-pattern-distributed-networks-and-graphs/distributedNetworks_arch2.png</link_uri>
        <link_title />
      </MarkdownLinkedReference>
    </ArrayOfMarkdownLinkedReference>
  </references>
</markdown_skeleton_root>