<properties
   pageTitle="Content Delivery Network (CDN) guidance | Microsoft Azure"
   description="Guidance on Content Delivery Network (CDN) to deliver high bandwidth content hosted in Azure."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="masimms"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="04/28/2015"
   ms.author="masashin"/>

# コンテンツ配信ネットワーク (CDN) ガイダンス

![](media/best-practices-cdn/pnp-logo.png)

## 概要

Azure コンテンツ配信ネットワーク (CDN) は、Azure でホストされている高帯域幅コンテンツの配信に対するグローバル ソリューションを開発者に提供します。Azure のブロブ ストレージから読み込まれて公開されているオブジェクトに、CDN キャッシュまたはでアプリケーション フォルダー配置された戦略的に提供するための最大帯域幅を提供するために場所がユーザーへのコンテンツ。通常、画像、スタイル シート、ドキュメント、ファイル、クライアント側スクリプト、および HTML ページなどの静的コンテンツを提供するために使用されます。

CDN を使用する主な利点は、低遅延、データ センター、アプリケーションがホストされていると、アプリケーション自体への負荷の低減処理の安心していられるためにアクセスし、コンテンツを配信する必要に関連して彼らの地理的な場所に関係なくユーザーにコンテンツの高速配信。この負荷の軽減はパフォーマンスと特定レベルのパフォーマンスと可用性を達成するために必要な処理リソースを減らすことによってホスティング コストを最小限に抑えることと同様に、アプリケーションのスケーラビリティを向上させるのに役立ちます。

によって実装されていない Azure アプリケーションで Azure CDN があなたのニーズを満たしていない場合他のコンテンツ配信ネットワーク システムを使用することができます。また、Azure ストレージまたは Azure コンピューティング インスタンスに静的コンテンツを公開することによって、他のプロバイダーとホストされているアプリケーションに Azure CDN を使用することができます。  
![](media/best-practices-cdn/CDN.png)

## CDN を使用する方法と理由

CDN の一般的な用途があります。  

- Web サイトから多くの場合、クライアント アプリケーションに静的なリソースを提供します。これらは、画像、スタイル シート、ドキュメント、ファイル、クライアント側スクリプト、HTML ページ、HTML フラグメント、またはサーバーが要求ごとに変更する必要はありませんその他のコンテンツをすることができます。アプリケーションは実行時にアイテムを作成でき、使用できるように CDN に (例えば、によって現在のニュースの見出しのリストを作成する) が、それは要求ごとにそうをしません。

- 携帯電話やアプリケーション自体が web サービス クライアントに API を提供するタブレット コンピューターなどのデバイスにパブリックの静的および共有コンテンツを提供します。サーバーは要求ごとに変更する必要はありませんその他のコンテンツに加え、CDN は-おそらくクライアント UI を生成するために使用するクライアントの静的なデータセットを提供できます。たとえば、JSON または XML ドキュメントを配信するは使用可能性があります。

- 料理全体の web サイト専用のいずれかを必要とすることがなくクライアントにのみパブリック静的コンテンツから成るコンピューティング ・ リソース。

- オンデマンドでクライアントにストリーミング ビデオ ファイル。ビデオ低遅延と信頼性の高い接続 CDN 接続を提供して世界中に配置のデータ センターから利用可能な恩恵を受ける。

- 一般的に、特にレイテンシを苦しむことになるそれ以外の場合はアプリケーションのデータ センターの場所から遠くに位置しているユーザーの経験を改善します。Web アプリケーション内のコンテンツの合計サイズの大きい割合は静的、頻繁で、CDN を使用して複数のデータ センターにアプリケーションを配置するための要件を排除しながらパフォーマンスと全体的なユーザー エクスペリエンスを維持するために助けることができます。

- そのサービス モバイル デバイスや固定デバイス Internet of things (IoT) に含まれるアプリケーションの成長の負荷に対処。そのようなデバイスや家電製品の膨大な数は、ブロードキャスト メッセージを処理し、ファームウェアの更新プログラムの配布を直接管理する必要がある場合、アプリケーションを簡単に圧倒でした。

- ピークへの対処やサージ電流需要に対し、アプリケーションを必要とせずランニング コスト増加を回避します。たとえば、ルーターの機種などのハードウェア デバイス、スマート テレビなどのコンシューマー デバイスのオペレーティング システムに更新プログラムをリリースするときがあります巨大なピーク需要の短い期間で数百万のユーザーとデバイスによってダウンロードしました。  

- 次の表は、さまざまな地理的な場所から最初のバイト期間中央値の例を示します。ターゲットの web ロールは、Azure 西米国に展開されます。CDN のために大きな後押しと CDN ノードへの近さの間の強い相関関係があります。Azure CDN ノードの場所の一覧は、 [Azure コンテンツ配信ネットワーク (CDN) 節点位置](http://msdn.microsoft.com/library/azure/gg680302.aspx).  

<table xmlns:xlink="http://www.w3.org/1999/xlink"><tr><th><a name="_MailEndCompose" href="#"><span /></a><br /></th><th><p>Time to First Byte (Origin)</p></th><th><p>Time to First Byte (CDN)</p></th><th><p>% faster for CDN</p></th></tr><tr><td><p>* San Jose, CA</p></td><td><p>47.5</p></td><td><p>46.5</p></td><td><p>2 %</p></td></tr><tr><td><p>** Dulles, VA</p></td><td><p>109</p></td><td><p>40.5</p></td><td><p>169 %</p></td></tr><tr><td><p>Buenos Aires, AR</p></td><td><p>210</p></td><td><p>151</p></td><td><p>39 %</p></td></tr><tr><td><p>* London, UK</p></td><td><p>195</p></td><td><p>44</p></td><td><p>343 %</p></td></tr><tr><td><p>Shanghai, CN</p></td><td><p>242</p></td><td><p>206</p></td><td><p>17 %</p></td></tr><tr><td><p>* Singapore</p></td><td><p>214</p></td><td><p>74</p></td><td><p>189%</p></td></tr><tr><td><p>* Tokyo, JP</p></td><td><p>163</p></td><td><p>48</p></td><td><p>240 %</p></td></tr><tr><td><p>Seoul, KR</p></td><td><p>190</p></td><td><p>190</p></td><td><p>0 %</p></td></tr></table>* Has an Azure CDN node in the same city.  
* Has an Azure CDN node in a neighboring city.  


## 課題  

CDN を使用する場合を考慮するいくつかの課題があります。  

- **展開** (CDN がコンテンツをフェッチが原点) から cdn コンテンツをロードして 1 つ以上のストレージ ・ システムのコンテンツを展開する必要があるかどうかを決定する必要があります (など、CDN と別の場所に)。

- アプリケーションの配備メカニズムは ASPX ページなどアプリケーションファイルの展開し同様に、アカウント展開する静的なコンテンツとリソースに取る必要があります。たとえば、それは Azure のブロブ ストレージにコンテンツをロードする別の手順を必要があります。

- **バージョン管理とキャッシュ制御** 静的なコンテンツを更新し、新しいバージョンを配置する方法を検討する必要があります。CDN は、現在、新しいバージョンが利用可能なコンテンツをフラッシュするためのメカニズムを提供しません。これキャッシュ、web ブラウザーのようなクライアント側の管理に類似した課題です。

- **テスト** それは開発およびローカルまたはステージング環境でアプリケーションをテストするとき、CDN 設定をローカルでテストを実行することは困難することができます。

- **SEO** 彼らの CDN は、このコンテンツの SEO 上の効果があるを使用するとき、画像やドキュメントなどのコンテンツは、別のドメインから提供しています。

- **セキュリティ** 現在、Azure CDN など多くの CDN サービスでは、コンテンツのアクセス制御のすべての種類を提供していません。

- **弾力性** CDN は、アプリケーションが失敗した潜在的な一点です。それはより低い可用性 SLA blob ストレージ (これを使用して、コンテンツを直接配信することができます) のでよりも重要なコンテンツのフォールバック メカニズムの実装を検討する必要があります。

- クライアントは、CDN でリソースへのアクセスを許可しない環境から接続する場合があります。これは、既知のソースまたはページ起源以外のものからのリソースの読み込みを防ぐことができます 1 つのセットのみにアクセスを制限するセキュリティ制約のある環境可能性があります。したがって、フォールバックの実装が必要になります。

- CDN を通してコンテンツの可用性を監視するためのメカニズムを実装する必要があります。

CDN が少ない有用なインクルードをする可能性がありますのシナリオ:  

- 内容はヒット率が低いなど、回、または生存時間の有効期間中に一度だけ、いくつかのアクセスがあります。初めてアイテムをダウンロード 2 つのトランザクション料金 (、CDN に由来し、顧客に CDN から) が発生します。

- ときデータはプライベートでなど、大企業のサプライ チェーンの生態系です。


## 一般的なガイドラインと優良事例

CDN を使用しては、あなたのアプリケーションの負荷を最小限に抑え、可用性とパフォーマンスを最大化する良い方法です。あなたは適切なコンテンツとアプリケーションが使用するリソースのすべてのこれを検討してください。CDN を使用する戦略を設計するときは、次の点を考慮してください。  

- **起源 ** CDN でコンテンツを展開する単に CDN サービスがアクセスし、コンテンツをキャッシュに使う HTTP (ポート 80) エンドポイントを指定することが必要です。+ エンドポイントは、CDN を提供する静的なコンテンツを保持する Azure のブロブ ストレージ コンテナーを指定できます。コンテナーは、public としてマークする必要があります。CDN を介してパブリック読み取りアクセス権を持つパブリック コンテナー内の blob だけになります。

- エンドポイントがという名前のフォルダーを指定することができます。 **cdn** 1 つのアプリケーションのルート レイヤー (web ロール仮想マシンなど) を計算します。ASPX ページなどの動的リソースを含むリソースに対する要求からの結果が CDN でキャッシュされます。キャッシュの最小期間は 300 秒です。任意の短い期間、コンテンツが CDN に配置されるを防止 (参照してください"<a href="#cachecontrol" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">キャッシュ制御</a>"の詳細については)。

- Azure の Web サイトを使用する場合、エンドポイントは CDN のインスタンスを作成するときにサイトを選択することでサイトのルート フォルダーに設定されます。すべてのサイトのコンテンツは CDN を通じて利用できるでしょう。

- 柔軟性と制御ほとんどを提供、アプリケーションのコンピューティング レイヤーのいずれかのフォルダーで、CDN エンドポイントを指します。例えば、それ現在および将来のルーティング要件を管理し、画像のサムネイルなどの静的コンテンツを動的に生成する方が簡単になります。

- コンテンツが ASPX ページなどの動的なソースから配信されるときに、キャッシュ内のオブジェクトを区別するために、クエリ文字列を使用することができます。ただし、この動作については、管理ポータルの設定によって無効にすることができます CDN エンドポイントを指定するとき。Blob ストレージからコンテンツを提供する、各種のクエリ文字列が同じ名前を持つ 2 つの項目は、CDN で別のアイテムとして格納されます、クエリ文字列が文字列リテラルとして扱われます。

- URL 書き換えスクリプトなどのリソースとファイルを CDN 起源フォルダーに移動を避けるためにその他のコンテンツを利用できます。

- CDN のコンテンツを保持する Azure ストレージ blob を使用して、blob 内のリソースの URL がコンテナーと blob 名の大文字と小文字です。

- Azure の Web サイトを使用する場合は、リソースへのリンクの CDN インスタンスへのパスを指定します。たとえば、次のイメージ ファイルを指定します、 **画像** CDN を通じて配信されるサイトのフォルダー:

  ```
  <img src="http://[your-cdn-instance].vo.msecnd.net/Images/image.jpg" />
  ```

- **展開** 静的なコンテンツは、プロビジョニングし、個別に展開、アプリケーションからアプリケーションの展開パッケージまたはプロセスには含めない場合必要があります。これは、バージョン管理に影響を与える方法を検討してくださいアプリケーション コンポーネントおよび静的リソースのコンテンツの管理に使用する方法。

- (1 つのファイルに複数のファイルを結合) をバンドルや縮小など (ホワイト スペースなどの不要な文字、改行文字、コメント、およびその他の文字を削除する) スクリプトと CSS ファイルのための処理方法を検討してください。これらは一般的に使用される技術が減らすことができますは、クライアントのロード時間、CDN を通してコンテンツを配信すると互換性が。詳細については、次を参照してください。 [バンドルや縮小など](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification).

- 別の場所にコンテンツを配置する必要があります、これは余分なステップを展開プロセスになります。アプリケーションは、CDN のコンテンツを更新する場合おそらく、定期的またはイベントへの応答で格納しなければなりません更新されたコンテンツ エンドポイントと同様に、任意の追加の場所で CDN のため。

- Azure ステージング、または Visual Studio のローカル Azure ファブリックにデプロイされたアプリケーションのための CDN エンドポイントを設定することはできません。単体テスト、機能テスト、および最終展開前のテストに影響します。別のメカニズムを実装することによってこれを許可する必要があります。たとえば、事前に一時カスタム アプリケーションまたはユーティリティを使用して CDN コンテンツを展開でき、キャッシュされている期間中にテストを実行します。また、アプリケーションがリソースをロードを制御するのにコンパイル ディレクティブまたはグローバル定数を使用します。たとえば、それをデバッグ モードで実行されている可能性がありますローカル フォルダーからクライアント側スクリプト バンドルなどのリソースとその他のコンテンツを読み込むし、リリース モードで実行するときに、CDN を使用します。

- CDN は、任意のネイティブの圧縮機能をサポートしていません。ただし、zip および gzip ファイルなど、すでに圧縮されているコンテンツを配信します。CDN エンドポイントとしてアプリケーション フォルダーを使用する場合、web ブラウザーまたはその他の種類のクライアントに直接配信するときサーバーと同じ方法で既定でいくつかのコンテンツを圧縮可能性があります。これに依存、 **受け入れる-エンコード** クライアントから送信される値。Azure で CPU 使用率が 50% を下回るときにコンテンツを自動的に圧縮されます。設定を変更して、アプリケーションをホストするクラウド サービスを使用している場合、IIS で動的出力の圧縮を有効にするスタートアップ タスクを使用する必要があります。参照してください。 [Web ロールを通じて Azure CDN に gzip 圧縮を有効にします。](http://blogs.msdn.com/b/avkashchauhan/archive/2012/03/05/enableing-gzip-compression-with-windows-azure-cdn-through-web-role.aspx) 詳細については。

- **ルーティングとバージョン管理** CDN の異なるインスタンスを使用する必要があります。たとえば、アプリケーションの新しいバージョンを展開する場合は、別の CDN を使用します。コンテンツの起源として Azure のブロブ ストレージを使用する場合だけ別のストレージ アカウントまたは別のコンテナーを作成し、CDN エンドポイントを指すできます。使用するかどうかは、 **cdn** URL 書き換えの技術を使用して、直接 CDN エンドポイントとしてアプリケーション内のルート フォルダーを別のフォルダーに要求します。

- クエリ文字列がリソース名 (blob 名) の一部である Azure のブロブ ストレージからコンテンツを描画する際に CDN 上のリソースへのリンクのアプリケーションの異なるバージョンを示すためには、クエリ文字列を使わない。クライアントがリソースをキャッシュする方法にも影響することができます。

- 以前のリソースが CDN でキャッシュされる場合、アプリケーションを更新するときに、静的なコンテンツの新しいバージョンを配置するは挑戦できます。詳細については、のセクションを参照してください"<a href="#cachecontrol" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">キャッシュ制御</a>".

<a name="cachecontrol" href="#" xmlns:xlink="http://www.w3.org/1999/xlink"><span /></a>**キャッシュ制御**+ キャッシュを管理する方法を検討してください、アプリケーションのどのような層。たとえば、CDN の起源としてフォルダーを使用する場合特定のフォルダー内のコンテンツ、およびすべてのリソースのコンテンツの有効期限を生成するページのキャッシュの設定を指定できます。CDN、および標準の HTTP ヘッダーを使用してクライアントにも、キャッシュのプロパティを指定できます。ただし、サーバーにキャッシュする必要があります既に管理と CDN を使用して、クライアントがコンテンツをキャッシュすると、どのようによりわかっているようにするのに役立ちます。

- 原点 (blob コンテナーまたはアプリケーションからそれらを削除することができますオブジェクトが CDN で利用されるを防ぐために **cdn** ルート フォルダー)、CDN エンドポイントを削除したり、削除または、blob ストレージの場合 — コンテナーまたは blob 専用。ただし、その存続時間 (TTL) の期限が切れる場合にのみ、CDN からアイテムが削除されます。

- (コンテンツが blob ストレージから読み込まれるとき) などキャッシュ有効期限の期間を指定しない場合は、72 時間までの CDN でキャッシュされます。

- Web アプリケーションで使用してキャッシュとすべてのコンテンツの有効期限を設定することができます、 **clientCache** 要素で、 **system.webServer/staticContent** web.config ファイルのセクション。そのフォルダー内のファイルおよびすべてのサブフォルダー内のファイルに影響を与えるので、任意のフォルダーに web.config ファイルを配置できます。

- CDN のコンテンツを作成する ASP.NET など動的な手法を使用する場合は、指定するように、 **Cache.SetExpires** 各ページのプロパティ。CDN では、パブリックの既定のキャッシュの設定を使用してページからの出力はキャッシュされます。 キャッシュの有効期間をコンテンツはありません破棄され、非常に短い間隔でアプリケーションから再読み込みことを確保するための適切な値に設定します。  

- **セキュリティ** CDN コンテンツを配信できる HTTPS (SSL) を介して、CDN から提供される証明書を使用して、それがまた HTTP 経由もあります。CDN 内のアイテムへの HTTP アクセスをブロックすることはできません。HTTPS を使用して、混合コンテンツに関するブラウザーの警告を回避する (ショッピングカート) など HTTPS を介してロードされたページに表示される静的コンテンツを要求する必要があります。

- 現在、Azure CDN など、多くの CDN サービスでは、アクセス制御、コンテンツへのアクセスをセキュリティで保護するための機能を提供していません。共有アクセス署名 (SAS) は、CDN で使用できません。

- これらのスクリプトを使用する場合に、問題が発生、CDN を使用してクライアント側のスクリプトを配信する場合、 **XMLHttpRequest** 別のドメインのデータ、イメージ、またはフォントなどの他のリソースに対する HTTP 要求をするを呼び出します。多くの web ブラウザーは、クロス オリジン リソース共有 (CORS) 適切な応答ヘッダーを設定するのには、web サーバーを構成しない限り、防ぐ。CORS の詳細については、セクション ガイドの「脅威の緩和」を参照してください。 <span class="highlight" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp">API セキュリティに関する考慮事項</span>.CORS をサポートする CDN を構成することができます: + あなたを追加することができますコンテンツを配信する起源が Azure のブロブ ストレージの場合、 **CorsRule** サービスのプロパティ。ルールは、ルール (クライアントがオリジナルのコンテンツをロードした後リンク先のリソースを要求する必要があります期間) を秒単位で CORS 要求、許可取得、等および最大年齢の許可された起源を指定できます。詳細については、次を参照してください。 [クロス オリジン リソース共有 (CORS) Azure ストレージ サービス支援](http://msdn.microsoft.com/library/azure/dn535601.aspx).

- あなたがコンテンツを提供している原点は、アプリケーション内のフォルダーなど、 **cdn** ルート フォルダーを設定するアプリケーション構成ファイルで送信の規則を構成できます、 **アクセス コントロール許可原点** すべての応答のヘッダー。書き換えルールの使用の詳細については、次を参照してください。 [URL リライト モジュール](http://www.iis.net/learn/extensions/url-rewrite-module).Azure の Web サイトを使用する場合、この技法が可能なないことに注意してください。

- **カスタム ドメイン**+ ほとんどの Cdn は、カスタム ドメイン名を指定し、それを使用して CDN を介してリソースにアクセスすることができます Azure CDN を含みます。使用してカスタム サブドメイン名を設定することも、 **CNAME** あなたの DNS に記録します。このアプローチを使用すると、抽象化と制御の追加の層が提供できます。

- 使用するかどうかは、 **CNAME**、(このガイドの執筆時点) でことはできません CDN は、独自の単一の SSL の証明書を使用して、このカスタム ドメイン/サブドメイン名は一致しませんので、SSL を使用しても。

- **CDN フォールバック** アプリケーション、障害または一時的な使用不可の CDN に対処する方法を検討してください。クライアント アプリケーションは以前の要求中に、ローカル (クライアント) にキャッシュされたリソースのコピーを使用できる場合がありますまたは障害を検出し、代わりに (アプリケーション フォルダーまたはリソースを保持する Azure blob コンテナー) の原点からリソースを要求するコードを使用することができます CDN を利用できない場合。

- **SEO** SEO は、あなたのアプリケーションで重要な考慮事項は場合、確認する: + 含める、 **Rel** 各ページまたはリソースに標準ヘッダーは。

- 使用、 **CNAME** サブドメインを記録し、この名前を使用してリソースにアクセスします。

- 国またはアプリケーション自体と異なる地域に CDN の IP アドレスがあるかもしれないという事実の影響を検討してください。

- 起源として Azure のブロブ ストレージを使用する場合は、アプリケーション フォルダーのように CDN 上のリソースに対して同じファイル構造を維持します。


- **監視 & ログ** アプリケーション監視の検出および障害を計測する戦略の一環として、CDN を含める、または遅延の発生を拡張します。

- CDN のログの記録を有効にして、日常業務の一部として含めること。

- **費用の含意** CDN は、アプリケーションからデータを読み込むときは、CDN から両方の送信データ転送およびストレージ トランザクションが課金されます。新鮮さを確保するためコンテンツがアプリケーションからのコンテンツの繰り返しの再ロードを生じるに関しては短いのため、現実的なキャッシュ有効期間を設定するか、CDN をストレージの blob。非常に長い有効期限を有効期限まで待つ必要がありますので、CDN からアイテムを削除するより困難に作る。

- ダウンロードされるほとんどの項目がサーバーの負荷の大幅な減少を提供することがなく 2 つのトランザクション料金が発生します。  



## コード例
このセクションには、コードと CDN を操作するための技術のいくつかの例が含まれています。  


## URL の書き換え
ホストされたクラウド サービス アプリケーションのルートの Web.config ファイルから次を除いては、CDN を使用するとき、URL の書き換えを実行する方法を示します。キャッシュ コンテンツを CDN からの要求は、(スクリプトや画像) などのリソースの種類に基づいて、アプリケーション ルート内の特定のフォルダーにリダイレクトされます。  

```XML
<system.webServer>
  ...
  <rewrite>
    <rules>
      <rule name="VersionedResource" stopProcessing="false">
        <match url="(.*)_v(.*)\.(.*)" ignoreCase="true" />
        <action type="Rewrite" url="{R:1}.{R:3}" appendQueryString="true" />
      </rule>
      <rule name="CdnImages" stopProcessing="true">
        <match url="cdn/Images/(.*)" ignoreCase="true" />
        <action type="Rewrite" url="/Images/{R:1}" appendQueryString="true" />
      </rule>
      <rule name="CdnContent" stopProcessing="true">
        <match url="cdn/Content/(.*)" ignoreCase="true" />
        <action type="Rewrite" url="/Content/{R:1}" appendQueryString="true" />
      </rule>
      <rule name="CdnScript" stopProcessing="true">
        <match url="cdn/Scripts/(.*)" ignoreCase="true" />
        <action type="Rewrite" url="/Scripts/{R:1}" appendQueryString="true" />
      </rule>
      <rule name="CdnScriptBundles" stopProcessing="true">
        <match url="cdn/bundles/(.*)" ignoreCase="true" />
        <action type="Rewrite" url="/bundles/{R:1}" appendQueryString="true" />
      </rule>
    </rules>
  </rewrite>
  ...
</system.webServer>
```

書き換えルールの追加は、次のリダイレクトを実行します。  

- 最初のルールは無視されますし、リソースのファイル名にバージョンを埋め込むことができます。たとえば、 **ファイル名_v123.jpg **として書き換えられます **Filename.jpg**.

- 次の 4 つのルールという名前のフォルダーにリソースを格納したくない場合は、要求をリダイレクトする方法を示しています **cdn** web ロールのルート。規則をマップします **cdn/画像**, **cdn/コンテンツ**, **cdn/スクリプト**、と **cdn/バンドル** Web ロールにそれぞれのルート フォルダーの Url です。
URL 書き換えを使用してリソースのバンドルをいくつか変更する必要があります。  


## バンドルや縮小など ##

バンドルや縮小などは、ASP.NET によって処理することができます。MVC プロジェクトでのあなたのバンドルを定義します。 **BundleConfig.cs**.呼び出しによって縮小スクリプト バンドルへの参照を作成します **Script.Render** 通常ビュー クラスのコード内のメソッドです。このリファレンスには、バンドルの内容に基づくハッシュが含まれているクエリ文字列が含まれています。バンドルの内容を変更すると、生成されるハッシュも変更されます。  
既定では、Azure CDN のインスタンスが持っている、 **クエリ文字列の状態** 設定を無効にします。CDN で正しく処理する更新されたスクリプト バンドルの順序で有効にする必要があります、 **クエリ文字列の状態** CDN インスタンスの設定。CDN を作成する前に 1 時間以上があります効果は、設定を変更するに注意してください。  


## 詳細については
+ [Azure CDN](http://azure.microsoft.com/services/cdn/)
+ [Azure コンテンツ配信ネットワーク (CDN) の概要](http://msdn.microsoft.com/library/azure/ff919703.aspx)
+ [Web アプリケーションでの Azure CDN からコンテンツを提供します。](cdn-serve-content-from-cdn-in-your-web-application.md)
+ [Azure CDN とクラウド サービスを統合します。](cdn-cloud-service-with-cdn.md)
+ [Azure コンテンツ配信ネットワークのベスト プラクティス](http://azure.microsoft.com/blog/2011/03/18/best-practices-for-the-windows-azure-content-delivery-network/)
