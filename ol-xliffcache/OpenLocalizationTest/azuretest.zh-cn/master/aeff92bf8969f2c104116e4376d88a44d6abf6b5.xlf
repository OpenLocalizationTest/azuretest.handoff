<?xml version="1.0" encoding="utf-8"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:oasis:names:tc:xliff:document:1.2 xliff-core-1.2-transitional.xsd">
  <file datatype="xml" source-language="en-us" target-language="zh-cn" original="2/18/2016 5:34:22 PM" tool-id="MarkdownTransformer" product-name="N/A" product-version="N/A" build-num="1">
    <header>
      <xliffext:olfilehash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">aeff92bf8969f2c104116e4376d88a44d6abf6b5</xliffext:olfilehash>
      <tool tool-id="MarkdownTransformer" tool-name="MarkdownToXliff" tool-version="1.0" tool-company="Microsoft" />
    </header>
    <body>
      <group extype="content">
        <group id="101">
          <trans-unit id="101" xml:space="preserve">
            <source>Redis Cluster Resource Manager Template</source>
            <target state="new">Redis Cluster Resource Manager Template</target>
          </trans-unit>
          <trans-unit id="102" xml:space="preserve">
            <source>Learn to easily deploy a new Redis cluster on Ubuntu VMs using Azure PowerShell or the Azure CLI and a Resource Manager template</source>
            <target state="new">Learn to easily deploy a new Redis cluster on Ubuntu VMs using Azure PowerShell or the Azure CLI and a Resource Manager template</target>
          </trans-unit>
          <trans-unit id="103" xml:space="preserve">
            <source>Redis cluster with a Resource Manager template</source>
            <target state="new">Redis cluster with a Resource Manager template</target>
          </trans-unit>
          <trans-unit id="104" xml:space="preserve">
            <source>Redis is an open-source key-value cache and store, where keys can contain data structures such as strings, hashes, lists, sets and sorted sets.</source>
            <target state="new">Redis is an open-source key-value cache and store, where keys can contain data structures such as strings, hashes, lists, sets and sorted sets.</target>
          </trans-unit>
          <trans-unit id="105" xml:space="preserve">
            <source>Redis supports a set of atomic operations on these data types.</source>
            <target state="new">Redis supports a set of atomic operations on these data types.</target>
          </trans-unit>
          <trans-unit id="106" xml:space="preserve">
            <source>With the release of Redis version 3.0, Redis Cluster is now available in the latest stable version of Redis.</source>
            <target state="new">With the release of Redis version 3.0, Redis Cluster is now available in the latest stable version of Redis.</target>
          </trans-unit>
          <trans-unit id="107" xml:space="preserve">
            <source>Redis Cluster is a distributed implementation of Redis where data is automatically sharded across multiple Redis nodes, with the ability to continue operations when a subset of nodes is experiencing failures.</source>
            <target state="new">Redis Cluster is a distributed implementation of Redis where data is automatically sharded across multiple Redis nodes, with the ability to continue operations when a subset of nodes is experiencing failures.</target>
          </trans-unit>
          <trans-unit id="108" xml:space="preserve">
            <source>Microsoft Azure Redis Cache is a dedicated Redis cache service, managed by Microsoft, but not all Microsoft Azure customers want to use Azure Redis Cache.</source>
            <target state="new">Microsoft Azure Redis Cache is a dedicated Redis cache service, managed by Microsoft, but not all Microsoft Azure customers want to use Azure Redis Cache.</target>
          </trans-unit>
          <trans-unit id="109" xml:space="preserve">
            <source>Some want to keep their Redis cache behind a subnet within their own Azure deployments, while others are more comfortable hosting their own Redis servers on Linux virtual machines in order to fully take advantage of all Redis features.</source>
            <target state="new">Some want to keep their Redis cache behind a subnet within their own Azure deployments, while others are more comfortable hosting their own Redis servers on Linux virtual machines in order to fully take advantage of all Redis features.</target>
          </trans-unit>
          <trans-unit id="110" xml:space="preserve">
            <source>This tutorial will walk through using a sample Azure Resource Manager  template to deploy a Redis cluster on Ubuntu VMs within a subnet in a resource group in Microsoft Azure.</source>
            <target state="new">This tutorial will walk through using a sample Azure Resource Manager  template to deploy a Redis cluster on Ubuntu VMs within a subnet in a resource group in Microsoft Azure.</target>
          </trans-unit>
          <trans-unit id="111" xml:space="preserve">
            <source>In addition to Redis 3.0 Cluster, this template also supports deploying Redis 2.8 with Redis Sentinel.</source>
            <target state="new">In addition to Redis 3.0 Cluster, this template also supports deploying Redis 2.8 with Redis Sentinel.</target>
          </trans-unit>
          <trans-unit id="112" xml:space="preserve">
            <source>Note that this tutorial will focus on the Redis 3.0 Cluster implementation.</source>
            <target state="new">Note that this tutorial will focus on the Redis 3.0 Cluster implementation.</target>
          </trans-unit>
          <trans-unit id="113" xml:space="preserve">
            <source>The Redis cluster is created behind a subnet, so there is no public IP access to the Redis cluster.</source>
            <target state="new">The Redis cluster is created behind a subnet, so there is no public IP access to the Redis cluster.</target>
          </trans-unit>
          <trans-unit id="114" xml:space="preserve">
            <source>As part of the deployment, an optional “jump box” can be deployed.</source>
            <target state="new">As part of the deployment, an optional “jump box” can be deployed.</target>
          </trans-unit>
          <trans-unit id="115" xml:space="preserve">
            <source>This “jump box” is an Ubuntu VM deployed in the subnet as well, but it <bpt id="2">&lt;em&gt;</bpt>does<ept id="2">&lt;/em&gt;</ept> expose a public IP address with an open SSH port that you can SSH to.</source>
            <target state="new">This “jump box” is an Ubuntu VM deployed in the subnet as well, but it <bpt id="2">&lt;em&gt;</bpt>does<ept id="2">&lt;/em&gt;</ept> expose a public IP address with an open SSH port that you can SSH to.</target>
          </trans-unit>
          <trans-unit id="116" xml:space="preserve">
            <source>Then from the “jump box”, you can SSH to all the Redis VMs in the subnet.</source>
            <target state="new">Then from the “jump box”, you can SSH to all the Redis VMs in the subnet.</target>
          </trans-unit>
          <trans-unit id="117" xml:space="preserve">
            <source>This template utilizes a “t-shirt size” concept in order to specify a “Small”, “Medium”, or “Large” Redis Cluster setup.</source>
            <target state="new">This template utilizes a “t-shirt size” concept in order to specify a “Small”, “Medium”, or “Large” Redis Cluster setup.</target>
          </trans-unit>
          <trans-unit id="118" xml:space="preserve">
            <source>When the Azure Resource Manager template language supports more dynamic template sizing, this could be changed to specify the number of Redis Cluster master nodes, slave nodes, VM size, etc.  For now, you can see the VM size and the number of masters and slaves defined in the file azuredeploy.json in the variables <bpt id="2">&lt;code&gt;</bpt>tshirtSizeSmall<ept id="2">&lt;/code&gt;</ept>, <bpt id="4">&lt;code&gt;</bpt>tshirtSizeMedium<ept id="4">&lt;/code&gt;</ept>, and <bpt id="6">&lt;code&gt;</bpt>tshirtSizeLarge<ept id="6">&lt;/code&gt;</ept>.</source>
            <target state="new">When the Azure Resource Manager template language supports more dynamic template sizing, this could be changed to specify the number of Redis Cluster master nodes, slave nodes, VM size, etc.  For now, you can see the VM size and the number of masters and slaves defined in the file azuredeploy.json in the variables <bpt id="2">&lt;code&gt;</bpt>tshirtSizeSmall<ept id="2">&lt;/code&gt;</ept>, <bpt id="4">&lt;code&gt;</bpt>tshirtSizeMedium<ept id="4">&lt;/code&gt;</ept>, and <bpt id="6">&lt;code&gt;</bpt>tshirtSizeLarge<ept id="6">&lt;/code&gt;</ept>.</target>
          </trans-unit>
          <trans-unit id="119" xml:space="preserve">
            <source>The Redis Cluster template for the “Medium” t-shirt size creates this configuration:</source>
            <target state="new">The Redis Cluster template for the “Medium” t-shirt size creates this configuration:</target>
          </trans-unit>
          <trans-unit id="120" xml:space="preserve">
            <source><bpt id="1">&lt;linkText&gt;</bpt>cluster-architecture<ept id="1">&lt;/linkText&gt;</ept></source>
            <target state="new"><bpt id="1">&lt;linkText&gt;</bpt>cluster-architecture<ept id="1">&lt;/linkText&gt;</ept></target>
          </trans-unit>
          <trans-unit id="121" xml:space="preserve">
            <source>Before diving into more details related to Azure Resource Manager and the template we will use for this deployment, make sure you have Azure PowerShell or the Azure CLI configured correctly.</source>
            <target state="new">Before diving into more details related to Azure Resource Manager and the template we will use for this deployment, make sure you have Azure PowerShell or the Azure CLI configured correctly.</target>
          </trans-unit>
          <trans-unit id="122" xml:space="preserve">
            <source><ph id="1">&lt;token href="../../includes/arm-getting-setup-powershell.md"/&gt;</ph></source>
            <target state="new"><ph id="1">&lt;token href="../../includes/arm-getting-setup-powershell.md"/&gt;</ph></target>
          </trans-unit>
          <trans-unit id="123" xml:space="preserve">
            <source><ph id="1">&lt;token href="../../includes/xplat-getting-set-up-arm.md"/&gt;</ph></source>
            <target state="new"><ph id="1">&lt;token href="../../includes/xplat-getting-set-up-arm.md"/&gt;</ph></target>
          </trans-unit>
          <trans-unit id="124" xml:space="preserve">
            <source>Deploy a Redis cluster by using a Resource Manager template</source>
            <target state="new">Deploy a Redis cluster by using a Resource Manager template</target>
          </trans-unit>
          <trans-unit id="125" xml:space="preserve">
            <source>Follow these steps to create a Redis cluster by using a Resource Manager template from the GitHub template repository.</source>
            <target state="new">Follow these steps to create a Redis cluster by using a Resource Manager template from the GitHub template repository.</target>
          </trans-unit>
          <trans-unit id="126" xml:space="preserve">
            <source>Each step will include directions for both Azure PowerShell and the Azure CLI.</source>
            <target state="new">Each step will include directions for both Azure PowerShell and the Azure CLI.</target>
          </trans-unit>
          <trans-unit id="127" xml:space="preserve">
            <source>Step 1-a: Download the template files by using Azure PowerShell</source>
            <target state="new">Step 1-a: Download the template files by using Azure PowerShell</target>
          </trans-unit>
          <trans-unit id="128" xml:space="preserve">
            <source>Create a local folder for the JSON template and other associated files (for example, C:\Azure\Templates\RedisCluster).</source>
            <target state="new">Create a local folder for the JSON template and other associated files (for example, C:\Azure\Templates\RedisCluster).</target>
          </trans-unit>
          <trans-unit id="129" xml:space="preserve">
            <source>Substitute in the folder name of your local folder and run these commands:</source>
            <target state="new">Substitute in the folder name of your local folder and run these commands:</target>
          </trans-unit>
          <trans-unit id="130" xml:space="preserve">
            <source>Step 1-b: Download the template files by using the Azure CLI</source>
            <target state="new">Step 1-b: Download the template files by using the Azure CLI</target>
          </trans-unit>
          <trans-unit id="131" xml:space="preserve">
            <source>Clone the entire template repository by using a Git client of your choice, for example:</source>
            <target state="new">Clone the entire template repository by using a Git client of your choice, for example:</target>
          </trans-unit>
          <trans-unit id="132" xml:space="preserve">
            <source>When the cloning is completed, look for the <bpt id="2">&lt;strong&gt;</bpt>redis-high-availability<ept id="2">&lt;/strong&gt;</ept> folder in your C:\Azure\Templates directory.</source>
            <target state="new">When the cloning is completed, look for the <bpt id="2">&lt;strong&gt;</bpt>redis-high-availability<ept id="2">&lt;/strong&gt;</ept> folder in your C:\Azure\Templates directory.</target>
          </trans-unit>
          <trans-unit id="133" xml:space="preserve">
            <source>Step 2: (optional) Understand the template parameters</source>
            <target state="new">Step 2: (optional) Understand the template parameters</target>
          </trans-unit>
          <trans-unit id="134" xml:space="preserve">
            <source>When you create a Redis cluster by using a template, you must specify a set of configuration parameters.</source>
            <target state="new">When you create a Redis cluster by using a template, you must specify a set of configuration parameters.</target>
          </trans-unit>
          <trans-unit id="135" xml:space="preserve">
            <source>To see the parameters that you need to specify for the template in a local JSON file before running the command to create the Redis cluster, open the JSON file in a tool or text editor of your choice.</source>
            <target state="new">To see the parameters that you need to specify for the template in a local JSON file before running the command to create the Redis cluster, open the JSON file in a tool or text editor of your choice.</target>
          </trans-unit>
          <trans-unit id="136" xml:space="preserve">
            <source>Look for the "parameters" section at the top of the file, which lists the set of parameters that are needed by the template to configure the Redis cluster.</source>
            <target state="new">Look for the "parameters" section at the top of the file, which lists the set of parameters that are needed by the template to configure the Redis cluster.</target>
          </trans-unit>
          <trans-unit id="137" xml:space="preserve">
            <source>Here is the "parameters" section for the azuredeploy.json template:</source>
            <target state="new">Here is the "parameters" section for the azuredeploy.json template:</target>
          </trans-unit>
          <trans-unit id="138" xml:space="preserve">
            <source>Each parameter has details such as data type and allowed values.</source>
            <target state="new">Each parameter has details such as data type and allowed values.</target>
          </trans-unit>
          <trans-unit id="139" xml:space="preserve">
            <source>This allows for validation of parameters passed during template execution in an interactive mode (e.g., Azure PowerShell or Azure CLI), as well as a self-discovery UI that could be dynamically built by parsing the list of required parameters and their descriptions.</source>
            <target state="new">This allows for validation of parameters passed during template execution in an interactive mode (e.g., Azure PowerShell or Azure CLI), as well as a self-discovery UI that could be dynamically built by parsing the list of required parameters and their descriptions.</target>
          </trans-unit>
          <trans-unit id="140" xml:space="preserve">
            <source>Step 3-a: Deploy a Redis cluster by using a template via Azure PowerShell</source>
            <target state="new">Step 3-a: Deploy a Redis cluster by using a template via Azure PowerShell</target>
          </trans-unit>
          <trans-unit id="141" xml:space="preserve">
            <source>Prepare a parameters file for your deployment by creating a JSON file containing runtime values for all parameters.</source>
            <target state="new">Prepare a parameters file for your deployment by creating a JSON file containing runtime values for all parameters.</target>
          </trans-unit>
          <trans-unit id="142" xml:space="preserve">
            <source>This file will then be passed as a single entity to the deployment command.</source>
            <target state="new">This file will then be passed as a single entity to the deployment command.</target>
          </trans-unit>
          <trans-unit id="143" xml:space="preserve">
            <source>If you do not include a parameters file, Azure PowerShell will use any default values specified in the template, and then prompt you to fill in the remaining values.</source>
            <target state="new">If you do not include a parameters file, Azure PowerShell will use any default values specified in the template, and then prompt you to fill in the remaining values.</target>
          </trans-unit>
          <trans-unit id="144" xml:space="preserve">
            <source>Here is an example you can find in the azuredeploy-parameters.json file.</source>
            <target state="new">Here is an example you can find in the azuredeploy-parameters.json file.</target>
          </trans-unit>
          <trans-unit id="145" xml:space="preserve">
            <source>Note that you will need to provide valid values for the parameters <bpt id="2">&lt;code&gt;</bpt>storageAccountName<ept id="2">&lt;/code&gt;</ept>, <bpt id="4">&lt;code&gt;</bpt>adminUsername<ept id="4">&lt;/code&gt;</ept>, and <bpt id="6">&lt;code&gt;</bpt>adminPassword<ept id="6">&lt;/code&gt;</ept>, plus any customizations to the other parameters:</source>
            <target state="new">Note that you will need to provide valid values for the parameters <bpt id="2">&lt;code&gt;</bpt>storageAccountName<ept id="2">&lt;/code&gt;</ept>, <bpt id="4">&lt;code&gt;</bpt>adminUsername<ept id="4">&lt;/code&gt;</ept>, and <bpt id="6">&lt;code&gt;</bpt>adminPassword<ept id="6">&lt;/code&gt;</ept>, plus any customizations to the other parameters:</target>
          </trans-unit>
          <trans-unit id="146" xml:space="preserve">
            <source>The parameter <bpt id="2">&lt;code&gt;</bpt>storageAccountName<ept id="2">&lt;/code&gt;</ept> must be a non-existent, unique Storage account name that satisfies the naming requirements for a Microsoft Azure Storage account (lowercase letters and numbers only).</source>
            <target state="new">The parameter <bpt id="2">&lt;code&gt;</bpt>storageAccountName<ept id="2">&lt;/code&gt;</ept> must be a non-existent, unique Storage account name that satisfies the naming requirements for a Microsoft Azure Storage account (lowercase letters and numbers only).</target>
          </trans-unit>
          <trans-unit id="147" xml:space="preserve">
            <source>This Storage account will be created as part of the deployment process.</source>
            <target state="new">This Storage account will be created as part of the deployment process.</target>
          </trans-unit>
          <trans-unit id="148" xml:space="preserve">
            <source>Fill in an Azure deployment name, resource group name, Azure location, and the folder of your saved JSON files.</source>
            <target state="new">Fill in an Azure deployment name, resource group name, Azure location, and the folder of your saved JSON files.</target>
          </trans-unit>
          <trans-unit id="149" xml:space="preserve">
            <source>Then run these commands:</source>
            <target state="new">Then run these commands:</target>
          </trans-unit>
          <trans-unit id="150" xml:space="preserve">
            <source><bpt id="1">&lt;code&gt;</bpt>$RGName<ept id="1">&lt;/code&gt;</ept> must be unique within your subscription.</source>
            <target state="new"><bpt id="1">&lt;code&gt;</bpt>$RGName<ept id="1">&lt;/code&gt;</ept> must be unique within your subscription.</target>
          </trans-unit>
          <trans-unit id="151" xml:space="preserve">
            <source>When you run the <bpt id="2">&lt;strong&gt;</bpt>New-AzureResourceGroupDeployment<ept id="2">&lt;/strong&gt;</ept> command, this will extract parameter values from the parameters JSON file (azuredeploy-parameters.json), and will start executing the template accordingly.</source>
            <target state="new">When you run the <bpt id="2">&lt;strong&gt;</bpt>New-AzureResourceGroupDeployment<ept id="2">&lt;/strong&gt;</ept> command, this will extract parameter values from the parameters JSON file (azuredeploy-parameters.json), and will start executing the template accordingly.</target>
          </trans-unit>
          <trans-unit id="152" xml:space="preserve">
            <source>Defining and using multiple parameter files with your different environments (test, production, etc.)</source>
            <target state="new">Defining and using multiple parameter files with your different environments (test, production, etc.)</target>
          </trans-unit>
          <trans-unit id="153" xml:space="preserve">
            <source>will promote template reuse and simplify complex multi-environment solutions.</source>
            <target state="new">will promote template reuse and simplify complex multi-environment solutions.</target>
          </trans-unit>
          <trans-unit id="154" xml:space="preserve">
            <source>When deploying, please keep in mind that a new Azure Storage account needs to be created, so the name you provide as the Storage account parameter must be unique and meet all requirements for an Azure Storage account (lowercase letters and numbers only).</source>
            <target state="new">When deploying, please keep in mind that a new Azure Storage account needs to be created, so the name you provide as the Storage account parameter must be unique and meet all requirements for an Azure Storage account (lowercase letters and numbers only).</target>
          </trans-unit>
          <trans-unit id="155" xml:space="preserve">
            <source>During the deployment, you will see something like this:</source>
            <target state="new">During the deployment, you will see something like this:</target>
          </trans-unit>
          <trans-unit id="156" xml:space="preserve">
            <source>During and after deployment, you can check all the requests that were made during provisioning, including any errors that occurred.</source>
            <target state="new">During and after deployment, you can check all the requests that were made during provisioning, including any errors that occurred.</target>
          </trans-unit>
          <trans-unit id="157" xml:space="preserve">
            <source>To do that, go to the <bpt id="2CapsExtId1">&lt;link&gt;</bpt><bpt id="2CapsExtId2">&lt;linkText&gt;</bpt>Azure portal<ept id="2CapsExtId2">&lt;/linkText&gt;</ept><bpt id="2CapsExtId3">&lt;title&gt;</bpt><ept id="2CapsExtId3">&lt;/title&gt;</ept><ept id="2CapsExtId1">&lt;/link&gt;</ept>, and do the following:</source>
            <target state="new">To do that, go to the <bpt id="2CapsExtId1">&lt;link&gt;</bpt><bpt id="2CapsExtId2">&lt;linkText&gt;</bpt>Azure portal<ept id="2CapsExtId2">&lt;/linkText&gt;</ept><bpt id="2CapsExtId3">&lt;title&gt;</bpt><ept id="2CapsExtId3">&lt;/title&gt;</ept><ept id="2CapsExtId1">&lt;/link&gt;</ept>, and do the following:</target>
          </trans-unit>
          <trans-unit id="158" xml:space="preserve">
            <source>In the left-hand navigation bar, click <bpt id="2">&lt;strong&gt;</bpt>Browse<ept id="2">&lt;/strong&gt;</ept>, and then scroll down and click <bpt id="4">&lt;strong&gt;</bpt>Resource Groups<ept id="4">&lt;/strong&gt;</ept>.</source>
            <target state="new">In the left-hand navigation bar, click <bpt id="2">&lt;strong&gt;</bpt>Browse<ept id="2">&lt;/strong&gt;</ept>, and then scroll down and click <bpt id="4">&lt;strong&gt;</bpt>Resource Groups<ept id="4">&lt;/strong&gt;</ept>.</target>
          </trans-unit>
          <trans-unit id="159" xml:space="preserve">
            <source>Select the resource group that you just created, to bring up the “Resource Group” blade.</source>
            <target state="new">Select the resource group that you just created, to bring up the “Resource Group” blade.</target>
          </trans-unit>
          <trans-unit id="160" xml:space="preserve">
            <source>In the <bpt id="2">&lt;strong&gt;</bpt>Monitoring<ept id="2">&lt;/strong&gt;</ept> section, select the “Events” bar graph.</source>
            <target state="new">In the <bpt id="2">&lt;strong&gt;</bpt>Monitoring<ept id="2">&lt;/strong&gt;</ept> section, select the “Events” bar graph.</target>
          </trans-unit>
          <trans-unit id="161" xml:space="preserve">
            <source>This will display the events for your deployment.</source>
            <target state="new">This will display the events for your deployment.</target>
          </trans-unit>
          <trans-unit id="162" xml:space="preserve">
            <source>By clicking individual events, you can drill further down into the details of each operation made on behalf of the template.</source>
            <target state="new">By clicking individual events, you can drill further down into the details of each operation made on behalf of the template.</target>
          </trans-unit>
          <trans-unit id="163" xml:space="preserve">
            <source>If you need to remove this resource group and all of its resources (the Storage account, virtual machine, and virtual network) after testing, use this command:</source>
            <target state="new">If you need to remove this resource group and all of its resources (the Storage account, virtual machine, and virtual network) after testing, use this command:</target>
          </trans-unit>
          <trans-unit id="164" xml:space="preserve">
            <source>Step 3-b: Deploy a Redis cluster by using a template via the Azure CLI</source>
            <target state="new">Step 3-b: Deploy a Redis cluster by using a template via the Azure CLI</target>
          </trans-unit>
          <trans-unit id="165" xml:space="preserve">
            <source>To deploy a Redis cluster via the Azure CLI, first create a resource group by specifying a name and a location:</source>
            <target state="new">To deploy a Redis cluster via the Azure CLI, first create a resource group by specifying a name and a location:</target>
          </trans-unit>
          <trans-unit id="166" xml:space="preserve">
            <source>Pass this resource group name, the location of the JSON template file, and the location of the parameters file (see the above Azure PowerShell section for details) into the following command:</source>
            <target state="new">Pass this resource group name, the location of the JSON template file, and the location of the parameters file (see the above Azure PowerShell section for details) into the following command:</target>
          </trans-unit>
          <trans-unit id="167" xml:space="preserve">
            <source>You can check the status of individual resource deployments by using the following command:</source>
            <target state="new">You can check the status of individual resource deployments by using the following command:</target>
          </trans-unit>
          <trans-unit id="168" xml:space="preserve">
            <source>A tour of the Redis cluster template structure and file organization</source>
            <target state="new">A tour of the Redis cluster template structure and file organization</target>
          </trans-unit>
          <trans-unit id="169" xml:space="preserve">
            <source>In order to create a robust and reusable approach to Resource Manager template design, additional thinking is required to organize the series of complex and interrelated tasks required during deployment of a complex solution like Redis Cluster.</source>
            <target state="new">In order to create a robust and reusable approach to Resource Manager template design, additional thinking is required to organize the series of complex and interrelated tasks required during deployment of a complex solution like Redis Cluster.</target>
          </trans-unit>
          <trans-unit id="170" xml:space="preserve">
            <source>By leveraging Resource Manager template linking capabilities, resource looping, and script execution through related extensions, it’s possible to implement a modular approach that can be reused with virtually any complex template-based deployment.</source>
            <target state="new">By leveraging Resource Manager template linking capabilities, resource looping, and script execution through related extensions, it’s possible to implement a modular approach that can be reused with virtually any complex template-based deployment.</target>
          </trans-unit>
          <trans-unit id="171" xml:space="preserve">
            <source>This diagram describes the relationships between all files downloaded from GitHub for this deployment:</source>
            <target state="new">This diagram describes the relationships between all files downloaded from GitHub for this deployment:</target>
          </trans-unit>
          <trans-unit id="172" xml:space="preserve">
            <source><bpt id="1">&lt;linkText&gt;</bpt>redis-files<ept id="1">&lt;/linkText&gt;</ept></source>
            <target state="new"><bpt id="1">&lt;linkText&gt;</bpt>redis-files<ept id="1">&lt;/linkText&gt;</ept></target>
          </trans-unit>
          <trans-unit id="173" xml:space="preserve">
            <source>This section steps you through the structure of the azuredeploy.json template for the Redis cluster.</source>
            <target state="new">This section steps you through the structure of the azuredeploy.json template for the Redis cluster.</target>
          </trans-unit>
          <trans-unit id="174" xml:space="preserve">
            <source>If you have not downloaded a copy of the template file, designate a local folder as the location for the file and create it (for example, C:\Azure\Templates\RedisCluster).</source>
            <target state="new">If you have not downloaded a copy of the template file, designate a local folder as the location for the file and create it (for example, C:\Azure\Templates\RedisCluster).</target>
          </trans-unit>
          <trans-unit id="175" xml:space="preserve">
            <source>Fill in the folder name and run these commands:</source>
            <target state="new">Fill in the folder name and run these commands:</target>
          </trans-unit>
          <trans-unit id="176" xml:space="preserve">
            <source>Open the azuredeploy.json template in a text editor or tool of your choice.</source>
            <target state="new">Open the azuredeploy.json template in a text editor or tool of your choice.</target>
          </trans-unit>
          <trans-unit id="177" xml:space="preserve">
            <source>The following information describes the structure of the template file and the purpose of each section.</source>
            <target state="new">The following information describes the structure of the template file and the purpose of each section.</target>
          </trans-unit>
          <trans-unit id="178" xml:space="preserve">
            <source>Alternately, you can see the contents of this template in your browser from <bpt id="2CapsExtId1">&lt;link&gt;</bpt><bpt id="2CapsExtId2">&lt;linkText&gt;</bpt>here<ept id="2CapsExtId2">&lt;/linkText&gt;</ept><bpt id="2CapsExtId3">&lt;title&gt;</bpt><ept id="2CapsExtId3">&lt;/title&gt;</ept><ept id="2CapsExtId1">&lt;/link&gt;</ept>.</source>
            <target state="new">Alternately, you can see the contents of this template in your browser from <bpt id="2CapsExtId1">&lt;link&gt;</bpt><bpt id="2CapsExtId2">&lt;linkText&gt;</bpt>here<ept id="2CapsExtId2">&lt;/linkText&gt;</ept><bpt id="2CapsExtId3">&lt;title&gt;</bpt><ept id="2CapsExtId3">&lt;/title&gt;</ept><ept id="2CapsExtId1">&lt;/link&gt;</ept>.</target>
          </trans-unit>
          <trans-unit id="179" xml:space="preserve">
            <source>"parameters" section</source>
            <target state="new">"parameters" section</target>
          </trans-unit>
          <trans-unit id="180" xml:space="preserve">
            <source>We mentioned already the role of azuredeploy-parameters.json, which will be used to pass a given set of parameter values during template execution.</source>
            <target state="new">We mentioned already the role of azuredeploy-parameters.json, which will be used to pass a given set of parameter values during template execution.</target>
          </trans-unit>
          <trans-unit id="181" xml:space="preserve">
            <source>The "parameters" section of azuredeploy.json specifies parameters that are used to input data into this template.</source>
            <target state="new">The "parameters" section of azuredeploy.json specifies parameters that are used to input data into this template.</target>
          </trans-unit>
          <trans-unit id="182" xml:space="preserve">
            <source>Here is an example of a parameter for the “t-shirt size”:</source>
            <target state="new">Here is an example of a parameter for the “t-shirt size”:</target>
          </trans-unit>
          <trans-unit id="183" xml:space="preserve">
            <source>Notice that <bpt id="2">&lt;code&gt;</bpt>defaultValue<ept id="2">&lt;/code&gt;</ept> may be specified, as well as <bpt id="4">&lt;code&gt;</bpt>allowedValues<ept id="4">&lt;/code&gt;</ept>.</source>
            <target state="new">Notice that <bpt id="2">&lt;code&gt;</bpt>defaultValue<ept id="2">&lt;/code&gt;</ept> may be specified, as well as <bpt id="4">&lt;code&gt;</bpt>allowedValues<ept id="4">&lt;/code&gt;</ept>.</target>
          </trans-unit>
          <trans-unit id="184" xml:space="preserve">
            <source>"variables" section</source>
            <target state="new">"variables" section</target>
          </trans-unit>
          <trans-unit id="185" xml:space="preserve">
            <source>The "variables" section specifies variables that can be used throughout this template.</source>
            <target state="new">The "variables" section specifies variables that can be used throughout this template.</target>
          </trans-unit>
          <trans-unit id="186" xml:space="preserve">
            <source>Basically this contains a number of fields (JSON data types or fragments) that will be set to constants or calculated values at execution time.</source>
            <target state="new">Basically this contains a number of fields (JSON data types or fragments) that will be set to constants or calculated values at execution time.</target>
          </trans-unit>
          <trans-unit id="187" xml:space="preserve">
            <source>Here are some examples that range from simple to more complex:</source>
            <target state="new">Here are some examples that range from simple to more complex:</target>
          </trans-unit>
          <trans-unit id="188" xml:space="preserve">
            <source>The <bpt id="2">&lt;code&gt;</bpt>vmStorageAccountContainerName<ept id="2">&lt;/code&gt;</ept> and <bpt id="4">&lt;code&gt;</bpt>vmStorageAccountDomain<ept id="4">&lt;/code&gt;</ept> variables are examples of simple name/value variables.</source>
            <target state="new">The <bpt id="2">&lt;code&gt;</bpt>vmStorageAccountContainerName<ept id="2">&lt;/code&gt;</ept> and <bpt id="4">&lt;code&gt;</bpt>vmStorageAccountDomain<ept id="4">&lt;/code&gt;</ept> variables are examples of simple name/value variables.</target>
          </trans-unit>
          <trans-unit id="189" xml:space="preserve">
            <source><bpt id="1">&lt;code&gt;</bpt>vnetID<ept id="1">&lt;/code&gt;</ept> is an example of a variable that is calculated at run time using the functions <bpt id="3">&lt;code&gt;</bpt>resourceId<ept id="3">&lt;/code&gt;</ept> and <bpt id="5">&lt;code&gt;</bpt>parameters<ept id="5">&lt;/code&gt;</ept>.</source>
            <target state="new"><bpt id="1">&lt;code&gt;</bpt>vnetID<ept id="1">&lt;/code&gt;</ept> is an example of a variable that is calculated at run time using the functions <bpt id="3">&lt;code&gt;</bpt>resourceId<ept id="3">&lt;/code&gt;</ept> and <bpt id="5">&lt;code&gt;</bpt>parameters<ept id="5">&lt;/code&gt;</ept>.</target>
          </trans-unit>
          <trans-unit id="190" xml:space="preserve">
            <source><bpt id="1">&lt;code&gt;</bpt>machineSettings<ept id="1">&lt;/code&gt;</ept> builds on these concepts even further by nesting the JSON object <bpt id="3">&lt;code&gt;</bpt>osImageReference<ept id="3">&lt;/code&gt;</ept> in the <bpt id="5">&lt;code&gt;</bpt>machineSettings<ept id="5">&lt;/code&gt;</ept> variable.</source>
            <target state="new"><bpt id="1">&lt;code&gt;</bpt>machineSettings<ept id="1">&lt;/code&gt;</ept> builds on these concepts even further by nesting the JSON object <bpt id="3">&lt;code&gt;</bpt>osImageReference<ept id="3">&lt;/code&gt;</ept> in the <bpt id="5">&lt;code&gt;</bpt>machineSettings<ept id="5">&lt;/code&gt;</ept> variable.</target>
          </trans-unit>
          <trans-unit id="191" xml:space="preserve">
            <source><bpt id="1">&lt;code&gt;</bpt>vmScripts<ept id="1">&lt;/code&gt;</ept> contains a JSON array, <bpt id="3">&lt;code&gt;</bpt>scriptsToDownload<ept id="3">&lt;/code&gt;</ept>, which is calculated at run time using the <bpt id="5">&lt;code&gt;</bpt>concat<ept id="5">&lt;/code&gt;</ept> and <bpt id="7">&lt;code&gt;</bpt>variables<ept id="7">&lt;/code&gt;</ept> functions.</source>
            <target state="new"><bpt id="1">&lt;code&gt;</bpt>vmScripts<ept id="1">&lt;/code&gt;</ept> contains a JSON array, <bpt id="3">&lt;code&gt;</bpt>scriptsToDownload<ept id="3">&lt;/code&gt;</ept>, which is calculated at run time using the <bpt id="5">&lt;code&gt;</bpt>concat<ept id="5">&lt;/code&gt;</ept> and <bpt id="7">&lt;code&gt;</bpt>variables<ept id="7">&lt;/code&gt;</ept> functions.</target>
          </trans-unit>
          <trans-unit id="192" xml:space="preserve">
            <source>If you want to customize the size of the Redis Cluster deployment, then you can change the properties of the variables <bpt id="2">&lt;code&gt;</bpt>tshirtSizeSmall<ept id="2">&lt;/code&gt;</ept>, <bpt id="4">&lt;code&gt;</bpt>tshirtSizeMedium<ept id="4">&lt;/code&gt;</ept>, and <bpt id="6">&lt;code&gt;</bpt>tshirtSizeLarge<ept id="6">&lt;/code&gt;</ept> in the azuredeploy.json template.</source>
            <target state="new">If you want to customize the size of the Redis Cluster deployment, then you can change the properties of the variables <bpt id="2">&lt;code&gt;</bpt>tshirtSizeSmall<ept id="2">&lt;/code&gt;</ept>, <bpt id="4">&lt;code&gt;</bpt>tshirtSizeMedium<ept id="4">&lt;/code&gt;</ept>, and <bpt id="6">&lt;code&gt;</bpt>tshirtSizeLarge<ept id="6">&lt;/code&gt;</ept> in the azuredeploy.json template.</target>
          </trans-unit>
          <trans-unit id="193" xml:space="preserve">
            <source>Note:  The <bpt id="2">&lt;code&gt;</bpt>totalMemberCountExcludingLast<ept id="2">&lt;/code&gt;</ept> and <bpt id="4">&lt;code&gt;</bpt>totalMemberCount<ept id="4">&lt;/code&gt;</ept> properties are needed because the template language currently does not have “math” operations.</source>
            <target state="new">Note:  The <bpt id="2">&lt;code&gt;</bpt>totalMemberCountExcludingLast<ept id="2">&lt;/code&gt;</ept> and <bpt id="4">&lt;code&gt;</bpt>totalMemberCount<ept id="4">&lt;/code&gt;</ept> properties are needed because the template language currently does not have “math” operations.</target>
          </trans-unit>
          <trans-unit id="194" xml:space="preserve">
            <source>More information regarding the template language can be found in MSDN at <bpt id="2CapsExtId1">&lt;link&gt;</bpt><bpt id="2CapsExtId2">&lt;linkText&gt;</bpt>Azure Resource Manager Template Language<ept id="2CapsExtId2">&lt;/linkText&gt;</ept><bpt id="2CapsExtId3">&lt;title&gt;</bpt><ept id="2CapsExtId3">&lt;/title&gt;</ept><ept id="2CapsExtId1">&lt;/link&gt;</ept>.</source>
            <target state="new">More information regarding the template language can be found in MSDN at <bpt id="2CapsExtId1">&lt;link&gt;</bpt><bpt id="2CapsExtId2">&lt;linkText&gt;</bpt>Azure Resource Manager Template Language<ept id="2CapsExtId2">&lt;/linkText&gt;</ept><bpt id="2CapsExtId3">&lt;title&gt;</bpt><ept id="2CapsExtId3">&lt;/title&gt;</ept><ept id="2CapsExtId1">&lt;/link&gt;</ept>.</target>
          </trans-unit>
          <trans-unit id="195" xml:space="preserve">
            <source>"resources" section</source>
            <target state="new">"resources" section</target>
          </trans-unit>
          <trans-unit id="196" xml:space="preserve">
            <source>The "resources" section is where most of the action happens.</source>
            <target state="new">The "resources" section is where most of the action happens.</target>
          </trans-unit>
          <trans-unit id="197" xml:space="preserve">
            <source>Looking carefully inside this section, you can immediately identify two different cases.</source>
            <target state="new">Looking carefully inside this section, you can immediately identify two different cases.</target>
          </trans-unit>
          <trans-unit id="198" xml:space="preserve">
            <source>The first is an element defined of type <bpt id="2">&lt;code&gt;</bpt>Microsoft.Resources/deployments<ept id="2">&lt;/code&gt;</ept> that essentially invokes a nested deployment within the main one.</source>
            <target state="new">The first is an element defined of type <bpt id="2">&lt;code&gt;</bpt>Microsoft.Resources/deployments<ept id="2">&lt;/code&gt;</ept> that essentially invokes a nested deployment within the main one.</target>
          </trans-unit>
          <trans-unit id="199" xml:space="preserve">
            <source>The second is the <bpt id="2">&lt;code&gt;</bpt>templateLink<ept id="2">&lt;/code&gt;</ept> property (and related <bpt id="4">&lt;code&gt;</bpt>contentVersion<ept id="4">&lt;/code&gt;</ept> property) that makes it possible specify a linked template file that will be invoked, passing a set of parameters as input.</source>
            <target state="new">The second is the <bpt id="2">&lt;code&gt;</bpt>templateLink<ept id="2">&lt;/code&gt;</ept> property (and related <bpt id="4">&lt;code&gt;</bpt>contentVersion<ept id="4">&lt;/code&gt;</ept> property) that makes it possible specify a linked template file that will be invoked, passing a set of parameters as input.</target>
          </trans-unit>
          <trans-unit id="200" xml:space="preserve">
            <source>These can be seen in this template fragment:</source>
            <target state="new">These can be seen in this template fragment:</target>
          </trans-unit>
          <trans-unit id="201" xml:space="preserve">
            <source>From this first example it is clear how azuredeploy.json in this scenario has been organized as a sort of orchestration mechanism, invoking a number of other template files.</source>
            <target state="new">From this first example it is clear how azuredeploy.json in this scenario has been organized as a sort of orchestration mechanism, invoking a number of other template files.</target>
          </trans-unit>
          <trans-unit id="202" xml:space="preserve">
            <source>Each file is responsible for part of the required deployment activities.</source>
            <target state="new">Each file is responsible for part of the required deployment activities.</target>
          </trans-unit>
          <trans-unit id="203" xml:space="preserve">
            <source>In particular, the following linked templates will be used for this deployment:</source>
            <target state="new">In particular, the following linked templates will be used for this deployment:</target>
          </trans-unit>
          <trans-unit id="204" xml:space="preserve">
            <source><bpt id="1">&lt;strong&gt;</bpt>shared-resource.json<ept id="1">&lt;/strong&gt;</ept>: contains the definition of all resources that will be shared across the deployment.</source>
            <target state="new"><bpt id="1">&lt;strong&gt;</bpt>shared-resource.json<ept id="1">&lt;/strong&gt;</ept>: contains the definition of all resources that will be shared across the deployment.</target>
          </trans-unit>
          <trans-unit id="205" xml:space="preserve">
            <source>Examples are Storage accounts used to store a VM’s OS disks, virtual networks, and availability sets.</source>
            <target state="new">Examples are Storage accounts used to store a VM’s OS disks, virtual networks, and availability sets.</target>
          </trans-unit>
          <trans-unit id="206" xml:space="preserve">
            <source><bpt id="1">&lt;strong&gt;</bpt>jumpbox-resources.json<ept id="1">&lt;/strong&gt;</ept>: deploys the “jump box” VM and all related resources, such as network interface, public IP address, and the input endpoint used to SSH into the environment.</source>
            <target state="new"><bpt id="1">&lt;strong&gt;</bpt>jumpbox-resources.json<ept id="1">&lt;/strong&gt;</ept>: deploys the “jump box” VM and all related resources, such as network interface, public IP address, and the input endpoint used to SSH into the environment.</target>
          </trans-unit>
          <trans-unit id="207" xml:space="preserve">
            <source><bpt id="1">&lt;strong&gt;</bpt>node-resources.json<ept id="1">&lt;/strong&gt;</ept>: deploys all Redis Cluster node VMs and connected resources (network adapters, private IPs, etc.).</source>
            <target state="new"><bpt id="1">&lt;strong&gt;</bpt>node-resources.json<ept id="1">&lt;/strong&gt;</ept>: deploys all Redis Cluster node VMs and connected resources (network adapters, private IPs, etc.).</target>
          </trans-unit>
          <trans-unit id="208" xml:space="preserve">
            <source>This template also deploys VM extensions (custom scripts for Linux) and invokes a bash script to physically install and set up Redis on each node.</source>
            <target state="new">This template also deploys VM extensions (custom scripts for Linux) and invokes a bash script to physically install and set up Redis on each node.</target>
          </trans-unit>
          <trans-unit id="209" xml:space="preserve">
            <source>The script to invoke is passed to this template in the <bpt id="2">&lt;code&gt;</bpt>machineSettings<ept id="2">&lt;/code&gt;</ept> parameter of the <bpt id="4">&lt;code&gt;</bpt>commandToExecute<ept id="4">&lt;/code&gt;</ept> property.</source>
            <target state="new">The script to invoke is passed to this template in the <bpt id="2">&lt;code&gt;</bpt>machineSettings<ept id="2">&lt;/code&gt;</ept> parameter of the <bpt id="4">&lt;code&gt;</bpt>commandToExecute<ept id="4">&lt;/code&gt;</ept> property.</target>
          </trans-unit>
          <trans-unit id="210" xml:space="preserve">
            <source>All but one of the Redis Cluster nodes can be deployed and scripted in parallel.</source>
            <target state="new">All but one of the Redis Cluster nodes can be deployed and scripted in parallel.</target>
          </trans-unit>
          <trans-unit id="211" xml:space="preserve">
            <source>One node needs to be saved until the end because the Redis Cluster setup can be run on only one node, and it must be done after all of the nodes are running the Redis server.</source>
            <target state="new">One node needs to be saved until the end because the Redis Cluster setup can be run on only one node, and it must be done after all of the nodes are running the Redis server.</target>
          </trans-unit>
          <trans-unit id="212" xml:space="preserve">
            <source>This is why the script to execute is passed to this template; the last node needs to run a slightly different script that will not only install the Redis server, but also set up the Redis cluster.</source>
            <target state="new">This is why the script to execute is passed to this template; the last node needs to run a slightly different script that will not only install the Redis server, but also set up the Redis cluster.</target>
          </trans-unit>
          <trans-unit id="213" xml:space="preserve">
            <source>Let’s drill down into <bpt id="2">&lt;em&gt;</bpt>how<ept id="2">&lt;/em&gt;</ept> this last template, node-resources.json, is used, as it is one of the most interesting from a template development perspective.</source>
            <target state="new">Let’s drill down into <bpt id="2">&lt;em&gt;</bpt>how<ept id="2">&lt;/em&gt;</ept> this last template, node-resources.json, is used, as it is one of the most interesting from a template development perspective.</target>
          </trans-unit>
          <trans-unit id="214" xml:space="preserve">
            <source>One important concept to highlight is how a single template file can deploy multiple copies of a single resource type, and for each instance, it can set unique values for required settings.</source>
            <target state="new">One important concept to highlight is how a single template file can deploy multiple copies of a single resource type, and for each instance, it can set unique values for required settings.</target>
          </trans-unit>
          <trans-unit id="215" xml:space="preserve">
            <source>This concept is known as <bpt id="2">&lt;strong&gt;</bpt>resource looping<ept id="2">&lt;/strong&gt;</ept>.</source>
            <target state="new">This concept is known as <bpt id="2">&lt;strong&gt;</bpt>resource looping<ept id="2">&lt;/strong&gt;</ept>.</target>
          </trans-unit>
          <trans-unit id="216" xml:space="preserve">
            <source>When node-resources.json is invoked from within the main azuredeploy.json file, it is invoked from inside a resource that uses the <bpt id="2">&lt;code&gt;</bpt>copy<ept id="2">&lt;/code&gt;</ept> element to create a loop of sorts.</source>
            <target state="new">When node-resources.json is invoked from within the main azuredeploy.json file, it is invoked from inside a resource that uses the <bpt id="2">&lt;code&gt;</bpt>copy<ept id="2">&lt;/code&gt;</ept> element to create a loop of sorts.</target>
          </trans-unit>
          <trans-unit id="217" xml:space="preserve">
            <source>A resource that uses the <bpt id="2">&lt;code&gt;</bpt>copy<ept id="2">&lt;/code&gt;</ept> element will “copy” itself for the number of times specified in the <bpt id="4">&lt;code&gt;</bpt>count<ept id="4">&lt;/code&gt;</ept> parameter of the <bpt id="6">&lt;code&gt;</bpt>copy<ept id="6">&lt;/code&gt;</ept> element.</source>
            <target state="new">A resource that uses the <bpt id="2">&lt;code&gt;</bpt>copy<ept id="2">&lt;/code&gt;</ept> element will “copy” itself for the number of times specified in the <bpt id="4">&lt;code&gt;</bpt>count<ept id="4">&lt;/code&gt;</ept> parameter of the <bpt id="6">&lt;code&gt;</bpt>copy<ept id="6">&lt;/code&gt;</ept> element.</target>
          </trans-unit>
          <trans-unit id="218" xml:space="preserve">
            <source>For all settings where it is necessary to specify unique values between different instances of the deployed resource, the <bpt id="2">&lt;strong&gt;</bpt>copyindex()<ept id="2">&lt;/strong&gt;</ept> function can be used to obtain a numeric value indicating the current index in that particular resource loop creation.</source>
            <target state="new">For all settings where it is necessary to specify unique values between different instances of the deployed resource, the <bpt id="2">&lt;strong&gt;</bpt>copyindex()<ept id="2">&lt;/strong&gt;</ept> function can be used to obtain a numeric value indicating the current index in that particular resource loop creation.</target>
          </trans-unit>
          <trans-unit id="219" xml:space="preserve">
            <source>In the following fragment from azuredeploy.json, you can see this concept applied to multiple VMs being created for the Redis Cluster nodes:</source>
            <target state="new">In the following fragment from azuredeploy.json, you can see this concept applied to multiple VMs being created for the Redis Cluster nodes:</target>
          </trans-unit>
          <trans-unit id="220" xml:space="preserve">
            <source>Another important concept in resource creation is the ability to specify dependencies and precedencies between resources, as you can see in the <bpt id="2">&lt;code&gt;</bpt>dependsOn<ept id="2">&lt;/code&gt;</ept> JSON array.</source>
            <target state="new">Another important concept in resource creation is the ability to specify dependencies and precedencies between resources, as you can see in the <bpt id="2">&lt;code&gt;</bpt>dependsOn<ept id="2">&lt;/code&gt;</ept> JSON array.</target>
          </trans-unit>
          <trans-unit id="221" xml:space="preserve">
            <source>In this particular template, you can see that the Redis Cluster nodes are dependent on the shared resources being created first.</source>
            <target state="new">In this particular template, you can see that the Redis Cluster nodes are dependent on the shared resources being created first.</target>
          </trans-unit>
          <trans-unit id="222" xml:space="preserve">
            <source>As was previously mentioned, the last node needs to wait for provisioning until all other nodes in the Redis cluster have been provisioned with the Redis server running on them.</source>
            <target state="new">As was previously mentioned, the last node needs to wait for provisioning until all other nodes in the Redis cluster have been provisioned with the Redis server running on them.</target>
          </trans-unit>
          <trans-unit id="223" xml:space="preserve">
            <source>This is accomplished in azuredeploy.json by having a resource named <bpt id="2">&lt;code&gt;</bpt>lastnode-resources<ept id="2">&lt;/code&gt;</ept> that depends on the <bpt id="4">&lt;code&gt;</bpt>copy<ept id="4">&lt;/code&gt;</ept> loop named <bpt id="6">&lt;code&gt;</bpt>memberNodesLoop<ept id="6">&lt;/code&gt;</ept> from the template snippet above.</source>
            <target state="new">This is accomplished in azuredeploy.json by having a resource named <bpt id="2">&lt;code&gt;</bpt>lastnode-resources<ept id="2">&lt;/code&gt;</ept> that depends on the <bpt id="4">&lt;code&gt;</bpt>copy<ept id="4">&lt;/code&gt;</ept> loop named <bpt id="6">&lt;code&gt;</bpt>memberNodesLoop<ept id="6">&lt;/code&gt;</ept> from the template snippet above.</target>
          </trans-unit>
          <trans-unit id="224" xml:space="preserve">
            <source>After provisioning of <bpt id="2">&lt;code&gt;</bpt>memberNodesLoop<ept id="2">&lt;/code&gt;</ept> is completed, <bpt id="4">&lt;code&gt;</bpt>lastnode-resources<ept id="4">&lt;/code&gt;</ept> can be provisioned:</source>
            <target state="new">After provisioning of <bpt id="2">&lt;code&gt;</bpt>memberNodesLoop<ept id="2">&lt;/code&gt;</ept> is completed, <bpt id="4">&lt;code&gt;</bpt>lastnode-resources<ept id="4">&lt;/code&gt;</ept> can be provisioned:</target>
          </trans-unit>
          <trans-unit id="225" xml:space="preserve">
            <source>Notice how the <bpt id="2">&lt;code&gt;</bpt>lastnode-resources<ept id="2">&lt;/code&gt;</ept> resource passes a slightly different <bpt id="4">&lt;code&gt;</bpt>machineSettings.commandToExecute<ept id="4">&lt;/code&gt;</ept> to the linked template.</source>
            <target state="new">Notice how the <bpt id="2">&lt;code&gt;</bpt>lastnode-resources<ept id="2">&lt;/code&gt;</ept> resource passes a slightly different <bpt id="4">&lt;code&gt;</bpt>machineSettings.commandToExecute<ept id="4">&lt;/code&gt;</ept> to the linked template.</target>
          </trans-unit>
          <trans-unit id="226" xml:space="preserve">
            <source>This is because for the last node, in addition to the installed Redis server, it needs to call a script to set up the Redis cluster (which must be done only once after all the Redis servers are up and running).</source>
            <target state="new">This is because for the last node, in addition to the installed Redis server, it needs to call a script to set up the Redis cluster (which must be done only once after all the Redis servers are up and running).</target>
          </trans-unit>
          <trans-unit id="227" xml:space="preserve">
            <source>Another interesting fragment to explore is the one related to the <bpt id="2">&lt;code&gt;</bpt>CustomScriptForLinux<ept id="2">&lt;/code&gt;</ept> VM extensions.</source>
            <target state="new">Another interesting fragment to explore is the one related to the <bpt id="2">&lt;code&gt;</bpt>CustomScriptForLinux<ept id="2">&lt;/code&gt;</ept> VM extensions.</target>
          </trans-unit>
          <trans-unit id="228" xml:space="preserve">
            <source>These are installed as a separate type of resource, with a dependency on each cluster node.</source>
            <target state="new">These are installed as a separate type of resource, with a dependency on each cluster node.</target>
          </trans-unit>
          <trans-unit id="229" xml:space="preserve">
            <source>In this case, this is used to install and set up Redis on each VM node.</source>
            <target state="new">In this case, this is used to install and set up Redis on each VM node.</target>
          </trans-unit>
          <trans-unit id="230" xml:space="preserve">
            <source>Let’s look at a snippet from the node-resources.json template that uses these:</source>
            <target state="new">Let’s look at a snippet from the node-resources.json template that uses these:</target>
          </trans-unit>
          <trans-unit id="231" xml:space="preserve">
            <source>You can see that this resource depends on the resource VM already being deployed (<bpt id="2">&lt;code&gt;</bpt>Microsoft.Compute/virtualMachines/vmMember&lt;X&gt;<ept id="2">&lt;/code&gt;</ept>, where <bpt id="4">&lt;code&gt;</bpt>&lt;X&gt;<ept id="4">&lt;/code&gt;</ept> is the parameter <bpt id="6">&lt;code&gt;</bpt>machineSettings.machineIndex<ept id="6">&lt;/code&gt;</ept>, which is the index of the VM that was passed to this script using the <bpt id="8">&lt;strong&gt;</bpt>copyindex()<ept id="8">&lt;/strong&gt;</ept> function).</source>
            <target state="new">You can see that this resource depends on the resource VM already being deployed (<bpt id="2">&lt;code&gt;</bpt>Microsoft.Compute/virtualMachines/vmMember&lt;X&gt;<ept id="2">&lt;/code&gt;</ept>, where <bpt id="4">&lt;code&gt;</bpt>&lt;X&gt;<ept id="4">&lt;/code&gt;</ept> is the parameter <bpt id="6">&lt;code&gt;</bpt>machineSettings.machineIndex<ept id="6">&lt;/code&gt;</ept>, which is the index of the VM that was passed to this script using the <bpt id="8">&lt;strong&gt;</bpt>copyindex()<ept id="8">&lt;/strong&gt;</ept> function).</target>
          </trans-unit>
          <trans-unit id="232" xml:space="preserve">
            <source>By familiarizing yourself with the other files included in this deployment, you will be able to understand all the details and best practices required to organize and orchestrate complex deployment strategies for multi-node solutions, based on any technology, leveraging Azure Resource Manager templates.</source>
            <target state="new">By familiarizing yourself with the other files included in this deployment, you will be able to understand all the details and best practices required to organize and orchestrate complex deployment strategies for multi-node solutions, based on any technology, leveraging Azure Resource Manager templates.</target>
          </trans-unit>
          <trans-unit id="233" xml:space="preserve">
            <source>While not mandatory, a recommended approach is to structure your template files as highlighted by the following diagram:</source>
            <target state="new">While not mandatory, a recommended approach is to structure your template files as highlighted by the following diagram:</target>
          </trans-unit>
          <trans-unit id="234" xml:space="preserve">
            <source><bpt id="1">&lt;linkText&gt;</bpt>redis-template-structure<ept id="1">&lt;/linkText&gt;</ept></source>
            <target state="new"><bpt id="1">&lt;linkText&gt;</bpt>redis-template-structure<ept id="1">&lt;/linkText&gt;</ept></target>
          </trans-unit>
          <trans-unit id="235" xml:space="preserve">
            <source>In essence, this approach suggests to:</source>
            <target state="new">In essence, this approach suggests to:</target>
          </trans-unit>
          <trans-unit id="236" xml:space="preserve">
            <source>Define your core template file as a central orchestration point for all specific deployment activities, leveraging template linking to invoke sub-template executions.</source>
            <target state="new">Define your core template file as a central orchestration point for all specific deployment activities, leveraging template linking to invoke sub-template executions.</target>
          </trans-unit>
          <trans-unit id="237" xml:space="preserve">
            <source>Create a specific template file that will deploy all resources shared across all other specific deployment tasks (Storage accounts, virtual network configuration, etc.).</source>
            <target state="new">Create a specific template file that will deploy all resources shared across all other specific deployment tasks (Storage accounts, virtual network configuration, etc.).</target>
          </trans-unit>
          <trans-unit id="238" xml:space="preserve">
            <source>This can be heavily reused between deployments that have similar requirements in terms of common infrastructure.</source>
            <target state="new">This can be heavily reused between deployments that have similar requirements in terms of common infrastructure.</target>
          </trans-unit>
          <trans-unit id="239" xml:space="preserve">
            <source>Include optional resource templates for spot requirements specific to a given resource.</source>
            <target state="new">Include optional resource templates for spot requirements specific to a given resource.</target>
          </trans-unit>
          <trans-unit id="240" xml:space="preserve">
            <source>For identical members of a group of resources (nodes in a cluster, etc.), create specific templates that leverage resource looping in order to deploy multiple instances with unique properties.</source>
            <target state="new">For identical members of a group of resources (nodes in a cluster, etc.), create specific templates that leverage resource looping in order to deploy multiple instances with unique properties.</target>
          </trans-unit>
          <trans-unit id="241" xml:space="preserve">
            <source>For all post-deployment tasks (product installation, configurations, etc.), leverage script deployment extensions and create scripts specific to each technology.</source>
            <target state="new">For all post-deployment tasks (product installation, configurations, etc.), leverage script deployment extensions and create scripts specific to each technology.</target>
          </trans-unit>
          <trans-unit id="242" xml:space="preserve">
            <source>For more information, see <bpt id="2CapsExtId1">&lt;link&gt;</bpt><bpt id="2CapsExtId2">&lt;linkText&gt;</bpt>Azure Resource Manager Template Language<ept id="2CapsExtId2">&lt;/linkText&gt;</ept><bpt id="2CapsExtId3">&lt;title&gt;</bpt><ept id="2CapsExtId3">&lt;/title&gt;</ept><ept id="2CapsExtId1">&lt;/link&gt;</ept>.</source>
            <target state="new">For more information, see <bpt id="2CapsExtId1">&lt;link&gt;</bpt><bpt id="2CapsExtId2">&lt;linkText&gt;</bpt>Azure Resource Manager Template Language<ept id="2CapsExtId2">&lt;/linkText&gt;</ept><bpt id="2CapsExtId3">&lt;title&gt;</bpt><ept id="2CapsExtId3">&lt;/title&gt;</ept><ept id="2CapsExtId1">&lt;/link&gt;</ept>.</target>
          </trans-unit>
        </group>
      </group>
    </body>
  </file>
</xliff>