<markdown_skeleton_root>
  <block_element>
    <ArrayOfMarkdownBlockBase xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <MarkdownBlockBase
        xsi:type="MarkdownAzureMetadataBlock"
        item_id="53ee928b-8f56-4fab-a0cf-d596b70e8611"
        item_type="AzureMetadata"
        item_footer="footer_not_set"
        trans_unit_id="53ee928b-8f56-4fab-a0cf-d596b70e8611">
        <LocalizeItemList>
          <MarkdownInternalXmlItem
            internal_item_id="a478c4bc-5e0a-4947-89f9-e7048984b124"
            trans_unit_id="101"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
          <MarkdownInternalXmlItem
            internal_item_id="ba9e8e70-9af8-4126-897e-c0c1c818491a"
            trans_unit_id="102"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
        </LocalizeItemList>
        <ItemValue>&lt;properties
   pageTitle="a478c4bc-5e0a-4947-89f9-e7048984b124"
   description="ba9e8e70-9af8-4126-897e-c0c1c818491a"
   services="service-fabric"
   documentationCenter=".net"
   authors="jessebenson"
   manager="timlt"
   editor=""/&gt;

&lt;tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="08/05/2015"
   ms.author="claudioc"/&gt;

</ItemValue>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="9cfcc476-ac9b-4d67-9445-38afc38ecbf3"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="9cfcc476-ac9b-4d67-9445-38afc38ecbf3">
        <segment
          trans_unit_id="103">
          <SegmentId>3336d36d-565e-45e6-8604-f82832b1f686</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="103"
            trans_unit_id="103-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>1</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="a2acaebd-1219-49dc-8d9f-63eb74c5ea90"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="a2acaebd-1219-49dc-8d9f-63eb74c5ea90">
        <Lines>
          <MarkdownLine>
            <LineId>7e4ccc24-6b2f-4fea-80ee-71ffa247c29d</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="104">
                <SegmentId>a088f05c-fc80-4215-bb0a-3a3f231d7e98</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="104"
                  trans_unit_id="104-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="104">
            <SegmentId>a088f05c-fc80-4215-bb0a-3a3f231d7e98</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="104"
              trans_unit_id="104-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="7107c3d9-a045-4d83-87f4-8858092ab606"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="7107c3d9-a045-4d83-87f4-8858092ab606">
        <Lines>
          <MarkdownLine>
            <LineId>dfd26fda-9dc3-47be-b67b-741d84dd2cab</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="105">
                <SegmentId>7ccd6e21-fe5c-4fe2-bc4d-c5d357963111</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="105"
                  trans_unit_id="105-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="105">
            <SegmentId>7ccd6e21-fe5c-4fe2-bc4d-c5d357963111</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="105"
              trans_unit_id="105-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="501961f9-c9a8-49bc-9a75-1c219641bbee"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="501961f9-c9a8-49bc-9a75-1c219641bbee">
        <Lines>
          <MarkdownLine>
            <LineId>de3bcb77-fd1b-4db8-b979-8c231e05d34d</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="106">
                <SegmentId>6522c6b8-935f-4e14-8113-4e509e44063f</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="106"
                  trans_unit_id="106-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="106">
            <SegmentId>6522c6b8-935f-4e14-8113-4e509e44063f</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="106"
              trans_unit_id="106-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="be26a384-e3e9-476d-a7de-2cf5b67d821b"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="be26a384-e3e9-476d-a7de-2cf5b67d821b">
        <Lines>
          <MarkdownLine>
            <LineId>7ae398b1-6b51-4ff8-b5d2-91db22b80b89</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="107">
                <SegmentId>616bd85f-476e-4112-85c9-2c6f37c4af73</SegmentId>
                <ImageItem
                  internal_item_id="1"
                  internal_item_parent_id="107"
                  trans_unit_id="107-1"
                  internal_item_type="Image">
                  <internal_items />
                  <internal_Image_type>Reference</internal_Image_type>
                  <internal_link_text />
                  <internal_link_id>1</internal_link_id>
                </ImageItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="107">
            <SegmentId>616bd85f-476e-4112-85c9-2c6f37c4af73</SegmentId>
            <ImageItem
              internal_item_id="1"
              internal_item_parent_id="107"
              trans_unit_id="107-1"
              internal_item_type="Image">
              <internal_items />
              <internal_Image_type>Reference</internal_Image_type>
              <internal_link_text />
              <internal_link_id>1</internal_link_id>
            </ImageItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="ff4a9a74-b036-4675-8086-4c7e0afadbc9"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="ff4a9a74-b036-4675-8086-4c7e0afadbc9">
        <Lines>
          <MarkdownLine>
            <LineId>3ef5a714-0bb8-4f95-b9d9-69e1888c7c4f</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="108">
                <SegmentId>7c8d5d27-8fde-4b4d-a319-518ed39c4dc4</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="108"
                  trans_unit_id="108-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="109">
                <SegmentId>bdf7c928-c1f1-4fed-8299-d10ffe89b92b</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="109"
                  trans_unit_id="109-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="108">
            <SegmentId>7c8d5d27-8fde-4b4d-a319-518ed39c4dc4</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="108"
              trans_unit_id="108-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="109">
            <SegmentId>bdf7c928-c1f1-4fed-8299-d10ffe89b92b</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="109"
              trans_unit_id="109-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="06a36fa9-cc69-4fb3-ab42-a2da1506cd99"
        item_type="List"
        item_footer=""
        trans_unit_id="06a36fa9-cc69-4fb3-ab42-a2da1506cd99">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="6ca5c6d0-8198-4f67-9d91-87cdf9e081a4"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="6ca5c6d0-8198-4f67-9d91-87cdf9e081a4">
              <Lines>
                <MarkdownLine>
                  <LineId>f31fea12-0f48-4a59-a36d-39fd9290ee9a</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="110">
                      <SegmentId>e41953a8-db58-4fea-941d-1000befb69f0</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="110"
                        trans_unit_id="110-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="110">
                  <SegmentId>e41953a8-db58-4fea-941d-1000befb69f0</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="110"
                    trans_unit_id="110-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="1e6ffdfa-033e-4f08-b6ac-8fc9ef6410e5"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="1e6ffdfa-033e-4f08-b6ac-8fc9ef6410e5">
              <Lines>
                <MarkdownLine>
                  <LineId>0b87fdb4-a366-4b4e-b119-c2f45c91e464</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="111">
                      <SegmentId>3d2a64dd-5ccb-4cbb-9340-164576f7f332</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="111"
                        trans_unit_id="111-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="111">
                  <SegmentId>3d2a64dd-5ccb-4cbb-9340-164576f7f332</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="111"
                    trans_unit_id="111-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="f58f64e5-1396-4515-93bc-831cff7fb262"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="f58f64e5-1396-4515-93bc-831cff7fb262">
              <Lines>
                <MarkdownLine>
                  <LineId>da6f28d4-c2d4-4b32-bf98-3ddc852e5784</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="112">
                      <SegmentId>3e7f630e-7ebf-454f-ba08-47b093bf31f3</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="112"
                        trans_unit_id="112-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="112">
                  <SegmentId>3e7f630e-7ebf-454f-ba08-47b093bf31f3</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="112"
                    trans_unit_id="112-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="de5de948-2873-4ba0-a69b-7c52249535a8"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="de5de948-2873-4ba0-a69b-7c52249535a8">
              <Lines>
                <MarkdownLine>
                  <LineId>12b9f657-cb11-4ef4-ac05-9e6526caac55</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="113">
                      <SegmentId>47bbda57-43c4-41d0-8a7c-80a9157669ab</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="113"
                        trans_unit_id="113-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="113">
                  <SegmentId>47bbda57-43c4-41d0-8a7c-80a9157669ab</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="113"
                    trans_unit_id="113-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="2506cdd7-639a-46e5-8c5c-b2106846d87b"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="2506cdd7-639a-46e5-8c5c-b2106846d87b">
        <segment
          trans_unit_id="114">
          <SegmentId>d1229c2a-e614-40c3-a7f2-9b9ed63e05f5</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="114"
            trans_unit_id="114-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="7bb100ac-5dbf-475c-b36b-213d5a48b546"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="7bb100ac-5dbf-475c-b36b-213d5a48b546">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface IProcessor : IActor
{
    Task ProcessAsync(int tries, int seed, int taskCount);
}

public class Processor : Actor, IProcessor
{
    public Task ProcessAsync(int tries, int seed, int taskCount)
    {
        var tasks = new List&lt;Task&gt;();
        for (int i = 0; i &lt; taskCount; i++)
        {
            var task = ActorProxy.Create&lt;IPooledTask&gt;(0); // stateless
            tasks.Add(task.CalculateAsync(tries, seed));
        }
        return Task.WhenAll(tasks);
    }
}

public interface IPooledTask : IActor
{
    Task CalculateAsync(int tries, int seed);
}

public class PooledTask : Actor, IPooledTask
{
    public Task CalculateAsync(int tries, int seed)
    {
        var pi = new Pi()
        {
            InCircle = 0,
            Tries = tries
        };

        var random = new Random(seed);
        double x, y;
        for (int i = 0; i &lt; tries; i++)
        {
            x = random.NextDouble();
            y = random.NextDouble();
            if (Math.Sqrt(x * x + y * y) &lt;= 1)
                pi.InCircle++;
        }

        var agg = ActorProxy.Create&lt;IAggregator&gt;(ActorId.NewId());
        return agg.AggregateAsync(pi);
    }
}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="846fc221-d838-4c96-949a-9e8d3f80b00e"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="846fc221-d838-4c96-949a-9e8d3f80b00e">
        <Lines>
          <MarkdownLine>
            <LineId>31590203-08e1-4c96-8a23-b1e407a9b87e</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="115">
                <SegmentId>41bcad03-e7a2-4a89-93ad-d732d0e8db17</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="115"
                  trans_unit_id="115-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="116">
                <SegmentId>b039e4ea-f101-4bb7-800d-758f8d2afe71</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="116"
                  trans_unit_id="116-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>676ef9da-8836-4f36-9ec7-d3d33cde3558</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="117">
                <SegmentId>2bdc9d83-9e39-44e6-8b6f-8b397ef49877</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="117"
                  trans_unit_id="117-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="115">
            <SegmentId>41bcad03-e7a2-4a89-93ad-d732d0e8db17</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="115"
              trans_unit_id="115-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="116">
            <SegmentId>b039e4ea-f101-4bb7-800d-758f8d2afe71</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="116"
              trans_unit_id="116-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="117">
            <SegmentId>2bdc9d83-9e39-44e6-8b6f-8b397ef49877</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="117"
              trans_unit_id="117-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="0c694971-917d-43da-aedf-ac3543546907"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="0c694971-917d-43da-aedf-ac3543546907">
        <segment
          trans_unit_id="118">
          <SegmentId>d76c68b7-1df9-43c0-ac0b-fd33ad2274e8</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="118"
            trans_unit_id="118-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="d48a0869-6d98-4f5a-86ec-4f3351c3396d"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="d48a0869-6d98-4f5a-86ec-4f3351c3396d">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface IAggregator : IActor
{
    Task AggregateAsync(Pi pi);
}

[DataContract]
class AggregatorState
{
    [DataMember]
    public Pi _pi;
    [DataMember]
    public bool _pending;
}

public class Aggregator : Actor&lt;AggregatorState&gt;, IAggregator
{
    public override Task OnActivateAsync()
    {
        State._pi = new Pi() { InCircle = 0, Tries = 0 };
        State._pending = false;

        this.RegisterTimer(
            ProcessAsync,
            null,
            TimeSpan.FromSeconds(5),
            TimeSpan.FromSeconds(5));

        return base.OnActivateAsync();
    }

    private async Task ProcessAsync(object obj)
    {
        if (false == _pending)
            return;

        var finaliser = ActorProxy.Create&lt;IFinaliser&gt;(0);
        await finaliser.FinaliseAsync(_pi);
        State._pending = false;
        State._pi.InCircle = 0;
        State._pi.Tries = 0;
    }

    public Task AggregateAsync(Pi pi)
    {
        State._pi.InCircle += pi.InCircle;
        State._pi.Tries += pi.Tries;
        State._pending = true;
        return TaskDone.Done;
    }
}

public interface IFinaliser : IActor
{
    Task FinaliseAsync(Pi pi);
}

[DataContract]
class FinalizerState
{
    [DataMember]
    public Pi _pi;
}

public class Finaliser : Actor&lt;FinalizerState&gt;, IFinaliser
{
    public override Task OnActivateAsync()
    {
        State._pi = new Pi()
        {
            InCircle = 0,
            Tries = 0
        };

        return base.OnActivateAsync();
    }

    public Task FinaliseAsync(Pi pi)
    {
        State._pi.InCircle += pi.InCircle;
        State._pi.Tries += pi.Tries;
        Console.WriteLine(" Pi = {0:N9}  T = {1:N0}, {2}",(double)State._pi.InCircle / (double)State._pi.Tries * 4.0, State._pi.Tries, State._pi.InCircle);

        return TaskDone.Done;
    }
}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="18951fd9-33c2-4642-aa9e-50ed887a5089"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="18951fd9-33c2-4642-aa9e-50ed887a5089">
        <Lines>
          <MarkdownLine>
            <LineId>fd089cc7-3a36-4c3a-ab20-c884b5a64f52</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="119">
                <SegmentId>ebdd0e0c-c266-4426-9ddc-674977f17cd4</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="119"
                  trans_unit_id="119-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="119">
            <SegmentId>ebdd0e0c-c266-4426-9ddc-674977f17cd4</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="119"
              trans_unit_id="119-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="54186604-5d72-4172-ae99-b9b5af4beb65"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="54186604-5d72-4172-ae99-b9b5af4beb65">
        <Lines>
          <MarkdownLine>
            <LineId>621a5c95-6585-4945-8132-f80b6c3e0f37</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="120">
                <SegmentId>45020103-5d64-4784-9632-9c55dcda08c3</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="120"
                  trans_unit_id="120-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="121">
                <SegmentId>b5b7f497-4d2e-47fe-8a54-7f189c321155</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="121"
                  trans_unit_id="121-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="122">
                <SegmentId>9eaa2a0c-08d4-4378-b732-8780ac78ddd3</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="122"
                  trans_unit_id="122-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="120">
            <SegmentId>45020103-5d64-4784-9632-9c55dcda08c3</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="120"
              trans_unit_id="120-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="121">
            <SegmentId>b5b7f497-4d2e-47fe-8a54-7f189c321155</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="121"
              trans_unit_id="121-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="122">
            <SegmentId>9eaa2a0c-08d4-4378-b732-8780ac78ddd3</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="122"
              trans_unit_id="122-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="f1420ebe-8396-47fd-8c2a-0c434460b49f"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="f1420ebe-8396-47fd-8c2a-0c434460b49f">
        <segment
          trans_unit_id="123">
          <SegmentId>3971cf72-19bb-4f1c-afa1-839dae992049</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="123"
            trans_unit_id="123-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="127e6c66-d6e0-4f16-90b0-646ad1853ecd"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="127e6c66-d6e0-4f16-90b0-646ad1853ecd">
        <Lines>
          <MarkdownLine>
            <LineId>31b7f840-cbcb-4439-86a4-08020844cb2a</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="124">
                <SegmentId>6a3e287c-aa38-4a1b-9f7c-81caca7d4256</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="124"
                  trans_unit_id="124-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Smart Cache</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="124">
            <SegmentId>6a3e287c-aa38-4a1b-9f7c-81caca7d4256</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="124"
              trans_unit_id="124-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Smart Cache</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="109e8275-e412-4c4c-a4fe-733858e34a5c"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="109e8275-e412-4c4c-a4fe-733858e34a5c">
        <Lines>
          <MarkdownLine>
            <LineId>48ea0ea2-0dbd-418a-b7da-a9cd721299c2</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="125">
                <SegmentId>8b124ab1-ac24-4b51-9ed6-3cc67d6c0f73</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="125"
                  trans_unit_id="125-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Distributed Networks and Graphs</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-distributed-networks-and-graphs.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="125">
            <SegmentId>8b124ab1-ac24-4b51-9ed6-3cc67d6c0f73</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="125"
              trans_unit_id="125-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Distributed Networks and Graphs</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-distributed-networks-and-graphs.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="95f257b7-caa6-4e27-a7f1-433dc1a56c3a"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="95f257b7-caa6-4e27-a7f1-433dc1a56c3a">
        <Lines>
          <MarkdownLine>
            <LineId>3b70ad67-46c0-4e32-a1cd-3cdb2db3866a</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="126">
                <SegmentId>390cfb6d-6b24-4c3c-ac26-7b8edce6e66b</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="126"
                  trans_unit_id="126-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Resource Governance</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="126">
            <SegmentId>390cfb6d-6b24-4c3c-ac26-7b8edce6e66b</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="126"
              trans_unit_id="126-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Resource Governance</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="b9a40c89-eddd-44d9-b83a-fcbea8229ded"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="b9a40c89-eddd-44d9-b83a-fcbea8229ded">
        <Lines>
          <MarkdownLine>
            <LineId>72241725-fdaa-4820-ad6f-7943fc8e505a</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="127">
                <SegmentId>7a796093-2e40-4cc2-bd90-6603825b7dac</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="127"
                  trans_unit_id="127-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="127">
            <SegmentId>7a796093-2e40-4cc2-bd90-6603825b7dac</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="127"
              trans_unit_id="127-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="16dd063a-6ef6-47a3-9b0a-825a06b411e3"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="16dd063a-6ef6-47a3-9b0a-825a06b411e3">
        <Lines>
          <MarkdownLine>
            <LineId>53f86f12-3c49-4a6b-af55-30dd656085ba</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="128">
                <SegmentId>ee412f47-3831-4f58-9706-940696ba7f30</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="128"
                  trans_unit_id="128-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Internet of Things</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="128">
            <SegmentId>ee412f47-3831-4f58-9706-940696ba7f30</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="128"
              trans_unit_id="128-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Internet of Things</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="0702fefb-c5a2-4c28-b008-8bfc319af3e1"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="0702fefb-c5a2-4c28-b008-8bfc319af3e1">
        <Lines>
          <MarkdownLine>
            <LineId>70bab70c-c49d-4a09-a16f-20f7f53c22da</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="129">
                <SegmentId>28ba58fa-deb9-4b20-b023-753b9bc79f59</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="129"
                  trans_unit_id="129-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Some Anti-patterns</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="129">
            <SegmentId>28ba58fa-deb9-4b20-b023-753b9bc79f59</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="129"
              trans_unit_id="129-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Some Anti-patterns</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="7d65c8d9-43e1-43ad-83b4-2ca4f1284b41"
        item_type="NormalParagraph"
        item_footer="&#xA;&#xA;"
        trans_unit_id="7d65c8d9-43e1-43ad-83b4-2ca4f1284b41">
        <Lines>
          <MarkdownLine>
            <LineId>c1db8c5d-1064-4b8e-a488-7cf4a9404d01</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="130">
                <SegmentId>f139bb21-b3de-43aa-a20e-7b2db79b7855</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="130"
                  trans_unit_id="130-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="130">
            <SegmentId>f139bb21-b3de-43aa-a20e-7b2db79b7855</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="130"
              trans_unit_id="130-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
    </ArrayOfMarkdownBlockBase>
  </block_element>
  <references>
    <ArrayOfMarkdownLinkedReference xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <MarkdownLinkedReference
        item_id="3f044ba1-0a6c-4525-8edc-673762d9554a"
        item_type="LinkedReference"
        item_footer="footer_not_set"
        trans_unit_id="3f044ba1-0a6c-4525-8edc-673762d9554a">
        <link_id>1</link_id>
        <link_uri>./media/service-fabric-reliable-actors-pattern-distributed-computation/distributed-computation-1.png</link_uri>
        <link_title />
      </MarkdownLinkedReference>
    </ArrayOfMarkdownLinkedReference>
  </references>
</markdown_skeleton_root>