<markdown_skeleton_root>
  <block_element>
    <ArrayOfMarkdownBlockBase xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownBlockBase
        xsi:type="MarkdownAzureMetadataBlock"
        item_id="3fb9f8be-fa91-4cc2-969a-7a111ba4bcb6"
        item_type="AzureMetadata"
        item_footer="footer_not_set"
        trans_unit_id="3fb9f8be-fa91-4cc2-969a-7a111ba4bcb6">
        <LocalizeItemList>
          <MarkdownInternalXmlItem
            internal_item_id="90eeaed7-7e24-4924-baa0-f0bd53438ad5"
            trans_unit_id="101"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
          <MarkdownInternalXmlItem
            internal_item_id="5f732991-2466-4919-ade7-96157faae76b"
            trans_unit_id="102"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
        </LocalizeItemList>
        <ItemValue>&lt;properties
   pageTitle="90eeaed7-7e24-4924-baa0-f0bd53438ad5"
   description="5f732991-2466-4919-ade7-96157faae76b"
   services="service-fabric"
   documentationCenter=".net"
   authors="jessebenson"
   manager="timlt"
   editor=""/&gt;

&lt;tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="08/05/2015"
   ms.author="claudioc"/&gt;

</ItemValue>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="b0050faf-5566-4968-8ac0-6c701f404879"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="b0050faf-5566-4968-8ac0-6c701f404879">
        <segment
          trans_unit_id="103">
          <SegmentId>fa2671b2-9b1c-4b44-ae13-f54ac89aadfc</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="103"
            trans_unit_id="103-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>1</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="00490450-d2f0-4b89-a457-409b9153cf85"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="00490450-d2f0-4b89-a457-409b9153cf85">
        <Lines>
          <MarkdownLine>
            <LineId>71a1e7ae-8b7c-4b1d-86dd-f138e9a5b75d</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="104">
                <SegmentId>28f596e5-2fe7-492b-90f5-90140e399d34</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="104"
                  trans_unit_id="104-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="104">
            <SegmentId>28f596e5-2fe7-492b-90f5-90140e399d34</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="104"
              trans_unit_id="104-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="098eea0f-dc92-49eb-b152-c7f302499699"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="098eea0f-dc92-49eb-b152-c7f302499699">
        <Lines>
          <MarkdownLine>
            <LineId>5e1157f8-5d50-48b8-bab9-ef7cb15b4f83</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="105">
                <SegmentId>4996a803-7fc0-4b86-b181-b61122e42f8e</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="105"
                  trans_unit_id="105-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="105">
            <SegmentId>4996a803-7fc0-4b86-b181-b61122e42f8e</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="105"
              trans_unit_id="105-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="1e5efb4e-6f0e-405e-a6b5-667df5e71392"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="1e5efb4e-6f0e-405e-a6b5-667df5e71392">
        <Lines>
          <MarkdownLine>
            <LineId>5915d57e-fbc6-4463-9e53-748a38ddec17</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="106">
                <SegmentId>a07a32b5-f638-4997-ba8d-1bf78969ad25</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="106"
                  trans_unit_id="106-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="106">
            <SegmentId>a07a32b5-f638-4997-ba8d-1bf78969ad25</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="106"
              trans_unit_id="106-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="1eef3a5a-05e4-4714-a894-4cc6b1cc5937"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="1eef3a5a-05e4-4714-a894-4cc6b1cc5937">
        <Lines>
          <MarkdownLine>
            <LineId>a946df10-2b46-4188-9425-c6ac41b720b2</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="107">
                <SegmentId>fa910b48-fc8c-482f-93fc-2074eaa962dd</SegmentId>
                <ImageItem
                  internal_item_id="1"
                  internal_item_parent_id="107"
                  trans_unit_id="107-1"
                  internal_item_type="Image">
                  <internal_items />
                  <internal_Image_type>Reference</internal_Image_type>
                  <internal_link_text />
                  <internal_link_id>1</internal_link_id>
                </ImageItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="107">
            <SegmentId>fa910b48-fc8c-482f-93fc-2074eaa962dd</SegmentId>
            <ImageItem
              internal_item_id="1"
              internal_item_parent_id="107"
              trans_unit_id="107-1"
              internal_item_type="Image">
              <internal_items />
              <internal_Image_type>Reference</internal_Image_type>
              <internal_link_text />
              <internal_link_id>1</internal_link_id>
            </ImageItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="6fa2a3b2-e15b-4b89-8fa6-1f4ac781d5d6"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="6fa2a3b2-e15b-4b89-8fa6-1f4ac781d5d6">
        <Lines>
          <MarkdownLine>
            <LineId>15c4a3ca-b5ab-450b-ab4d-6471db7ad66e</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="108">
                <SegmentId>259fa61b-f87d-43ad-b363-70a402f04f2c</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="108"
                  trans_unit_id="108-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="109">
                <SegmentId>e74e495b-b9ac-4f9c-af20-df384e050d37</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="109"
                  trans_unit_id="109-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="108">
            <SegmentId>259fa61b-f87d-43ad-b363-70a402f04f2c</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="108"
              trans_unit_id="108-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="109">
            <SegmentId>e74e495b-b9ac-4f9c-af20-df384e050d37</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="109"
              trans_unit_id="109-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="672ad178-858a-418b-9e7f-78b827c77f49"
        item_type="List"
        item_footer=""
        trans_unit_id="672ad178-858a-418b-9e7f-78b827c77f49">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="2f7fdcc3-a27d-4ae7-975a-93168774a407"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="2f7fdcc3-a27d-4ae7-975a-93168774a407">
              <Lines>
                <MarkdownLine>
                  <LineId>73ae7886-7391-4712-bb9b-971f797051ed</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="110">
                      <SegmentId>0575473d-6f23-40cf-9244-3ae04c6cd6e4</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="110"
                        trans_unit_id="110-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="110">
                  <SegmentId>0575473d-6f23-40cf-9244-3ae04c6cd6e4</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="110"
                    trans_unit_id="110-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="d0279c8b-fd5d-4b8c-b9df-71ced8e86529"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="d0279c8b-fd5d-4b8c-b9df-71ced8e86529">
              <Lines>
                <MarkdownLine>
                  <LineId>fc8889e3-1faf-44c1-bd61-704d4c576133</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="111">
                      <SegmentId>b7532022-41ef-45b0-88fb-1c32e1fe9c1c</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="111"
                        trans_unit_id="111-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="111">
                  <SegmentId>b7532022-41ef-45b0-88fb-1c32e1fe9c1c</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="111"
                    trans_unit_id="111-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="e45668a6-14a1-49b4-a83b-e498c1a29da9"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="e45668a6-14a1-49b4-a83b-e498c1a29da9">
              <Lines>
                <MarkdownLine>
                  <LineId>f58b6d6b-b081-421f-ae6d-e1c9a235821a</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="112">
                      <SegmentId>bcbcab9e-655b-4937-bfb6-49071365847e</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="112"
                        trans_unit_id="112-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="112">
                  <SegmentId>bcbcab9e-655b-4937-bfb6-49071365847e</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="112"
                    trans_unit_id="112-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="2a6587d9-4f1c-4aa8-bb98-2070d32c5bf2"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="2a6587d9-4f1c-4aa8-bb98-2070d32c5bf2">
              <Lines>
                <MarkdownLine>
                  <LineId>5913f8b0-a1d0-4ac6-8ef1-d72edbca8428</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="113">
                      <SegmentId>fe5e6f2e-52b7-482b-bf44-c0133fd1163c</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="113"
                        trans_unit_id="113-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="113">
                  <SegmentId>fe5e6f2e-52b7-482b-bf44-c0133fd1163c</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="113"
                    trans_unit_id="113-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="f2da3dfb-b7f4-4659-aa9a-c1a9fd3752fe"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="f2da3dfb-b7f4-4659-aa9a-c1a9fd3752fe">
        <segment
          trans_unit_id="114">
          <SegmentId>6cb75d7e-9ef8-4c61-9d1e-27d19ad1d340</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="114"
            trans_unit_id="114-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="43f6087e-8c36-4eac-978f-08eff7768974"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="43f6087e-8c36-4eac-978f-08eff7768974">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface IProcessor : IActor
{
    Task ProcessAsync(int tries, int seed, int taskCount);
}

public class Processor : Actor, IProcessor
{
    public Task ProcessAsync(int tries, int seed, int taskCount)
    {
        var tasks = new List&lt;Task&gt;();
        for (int i = 0; i &lt; taskCount; i++)
        {
            var task = ActorProxy.Create&lt;IPooledTask&gt;(0); // stateless
            tasks.Add(task.CalculateAsync(tries, seed));
        }
        return Task.WhenAll(tasks);
    }
}

public interface IPooledTask : IActor
{
    Task CalculateAsync(int tries, int seed);
}

public class PooledTask : Actor, IPooledTask
{
    public Task CalculateAsync(int tries, int seed)
    {
        var pi = new Pi()
        {
            InCircle = 0,
            Tries = tries
        };

        var random = new Random(seed);
        double x, y;
        for (int i = 0; i &lt; tries; i++)
        {
            x = random.NextDouble();
            y = random.NextDouble();
            if (Math.Sqrt(x * x + y * y) &lt;= 1)
                pi.InCircle++;
        }

        var agg = ActorProxy.Create&lt;IAggregator&gt;(ActorId.NewId());
        return agg.AggregateAsync(pi);
    }
}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="6885b900-47fc-41f2-97fc-4526048647df"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="6885b900-47fc-41f2-97fc-4526048647df">
        <Lines>
          <MarkdownLine>
            <LineId>a2116e0b-1406-4039-a90f-ed9c077e57a7</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="115">
                <SegmentId>0ee50417-a88b-4d11-99c6-ccf93e55d27a</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="115"
                  trans_unit_id="115-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="116">
                <SegmentId>8f4403bf-a6e4-415d-8c6b-b914685fb0c5</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="116"
                  trans_unit_id="116-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>6d162952-fcd7-4416-af32-ceaa672ecf50</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="117">
                <SegmentId>269f28dc-d71c-4dac-b974-c7ef1212f59b</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="117"
                  trans_unit_id="117-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="115">
            <SegmentId>0ee50417-a88b-4d11-99c6-ccf93e55d27a</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="115"
              trans_unit_id="115-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="116">
            <SegmentId>8f4403bf-a6e4-415d-8c6b-b914685fb0c5</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="116"
              trans_unit_id="116-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="117">
            <SegmentId>269f28dc-d71c-4dac-b974-c7ef1212f59b</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="117"
              trans_unit_id="117-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="ff777090-159a-4e48-ae97-3595c13721bb"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="ff777090-159a-4e48-ae97-3595c13721bb">
        <segment
          trans_unit_id="118">
          <SegmentId>8cc5303f-a76e-4920-ae04-d94c8dee54c2</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="118"
            trans_unit_id="118-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="349525d9-7e02-4848-888a-4562470dae64"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="349525d9-7e02-4848-888a-4562470dae64">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface IAggregator : IActor
{
    Task AggregateAsync(Pi pi);
}

[DataContract]
class AggregatorState
{
    [DataMember]
    public Pi _pi;
    [DataMember]
    public bool _pending;
}

public class Aggregator : Actor&lt;AggregatorState&gt;, IAggregator
{
    public override Task OnActivateAsync()
    {
        State._pi = new Pi() { InCircle = 0, Tries = 0 };
        State._pending = false;

        this.RegisterTimer(
            ProcessAsync,
            null,
            TimeSpan.FromSeconds(5),
            TimeSpan.FromSeconds(5));

        return base.OnActivateAsync();
    }

    private async Task ProcessAsync(object obj)
    {
        if (false == _pending)
            return;

        var finaliser = ActorProxy.Create&lt;IFinaliser&gt;(0);
        await finaliser.FinaliseAsync(_pi);
        State._pending = false;
        State._pi.InCircle = 0;
        State._pi.Tries = 0;
    }

    public Task AggregateAsync(Pi pi)
    {
        State._pi.InCircle += pi.InCircle;
        State._pi.Tries += pi.Tries;
        State._pending = true;
        return TaskDone.Done;
    }
}

public interface IFinaliser : IActor
{
    Task FinaliseAsync(Pi pi);
}

[DataContract]
class FinalizerState
{
    [DataMember]
    public Pi _pi;
}

public class Finaliser : Actor&lt;FinalizerState&gt;, IFinaliser
{
    public override Task OnActivateAsync()
    {
        State._pi = new Pi()
        {
            InCircle = 0,
            Tries = 0
        };

        return base.OnActivateAsync();
    }

    public Task FinaliseAsync(Pi pi)
    {
        State._pi.InCircle += pi.InCircle;
        State._pi.Tries += pi.Tries;
        Console.WriteLine(" Pi = {0:N9}  T = {1:N0}, {2}",(double)State._pi.InCircle / (double)State._pi.Tries * 4.0, State._pi.Tries, State._pi.InCircle);

        return TaskDone.Done;
    }
}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="12be38d1-1700-4f40-9b65-bbe8d62fd5c2"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="12be38d1-1700-4f40-9b65-bbe8d62fd5c2">
        <Lines>
          <MarkdownLine>
            <LineId>15e1e6d1-6ee8-4102-98d2-d5fe4cf5073f</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="119">
                <SegmentId>09fb00ea-2b64-40e6-9228-b2d1e360bbef</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="119"
                  trans_unit_id="119-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="119">
            <SegmentId>09fb00ea-2b64-40e6-9228-b2d1e360bbef</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="119"
              trans_unit_id="119-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="f79a2137-f6cf-4426-a101-6c3e77e004b7"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="f79a2137-f6cf-4426-a101-6c3e77e004b7">
        <Lines>
          <MarkdownLine>
            <LineId>ccafe54d-bf99-4530-95f8-1a0771464841</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="120">
                <SegmentId>02023944-a057-4f4d-a99b-47c134b8cbd4</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="120"
                  trans_unit_id="120-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="121">
                <SegmentId>a817ff8f-0fd7-4351-87c5-ff842ce72129</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="121"
                  trans_unit_id="121-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="122">
                <SegmentId>ef3f4aa6-279e-484e-b1cc-ba8262a1dd45</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="122"
                  trans_unit_id="122-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="120">
            <SegmentId>02023944-a057-4f4d-a99b-47c134b8cbd4</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="120"
              trans_unit_id="120-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="121">
            <SegmentId>a817ff8f-0fd7-4351-87c5-ff842ce72129</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="121"
              trans_unit_id="121-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="122">
            <SegmentId>ef3f4aa6-279e-484e-b1cc-ba8262a1dd45</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="122"
              trans_unit_id="122-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="e7813f16-3471-4bb1-a1c6-962e616e82e7"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="e7813f16-3471-4bb1-a1c6-962e616e82e7">
        <segment
          trans_unit_id="123">
          <SegmentId>3c2e3403-e2f7-49b5-8bc6-1257a4c6a184</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="123"
            trans_unit_id="123-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="b30f9c4d-ba4d-4cf0-a50e-f7c215c08185"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="b30f9c4d-ba4d-4cf0-a50e-f7c215c08185">
        <Lines>
          <MarkdownLine>
            <LineId>f4779bdf-8aff-421e-a1f3-418df9e03161</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="124">
                <SegmentId>6dca8595-02c4-4b6c-bd14-8209c5cc6499</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="124"
                  trans_unit_id="124-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Smart Cache</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="124">
            <SegmentId>6dca8595-02c4-4b6c-bd14-8209c5cc6499</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="124"
              trans_unit_id="124-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Smart Cache</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="723f3c4e-1cdc-4a06-bf3a-dd969e358b65"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="723f3c4e-1cdc-4a06-bf3a-dd969e358b65">
        <Lines>
          <MarkdownLine>
            <LineId>a334e227-17ce-472c-bf40-a1b8bde6c2ca</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="125">
                <SegmentId>63bef442-3c67-45ce-a51c-c8f0016c3ca5</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="125"
                  trans_unit_id="125-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Distributed Networks and Graphs</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-distributed-networks-and-graphs.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="125">
            <SegmentId>63bef442-3c67-45ce-a51c-c8f0016c3ca5</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="125"
              trans_unit_id="125-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Distributed Networks and Graphs</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-distributed-networks-and-graphs.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="2b489580-bbcd-4e1f-ad72-1c71d33051f9"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="2b489580-bbcd-4e1f-ad72-1c71d33051f9">
        <Lines>
          <MarkdownLine>
            <LineId>73305505-a6c9-4292-a98b-03bae372fc86</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="126">
                <SegmentId>6ba070f3-6284-43c0-a089-fbd5173f6e1d</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="126"
                  trans_unit_id="126-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Resource Governance</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="126">
            <SegmentId>6ba070f3-6284-43c0-a089-fbd5173f6e1d</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="126"
              trans_unit_id="126-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Resource Governance</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="d4fe30e9-aaa5-4d17-a1f2-a83572f57ca1"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="d4fe30e9-aaa5-4d17-a1f2-a83572f57ca1">
        <Lines>
          <MarkdownLine>
            <LineId>6fd2c9bc-f11a-4fb8-b1f5-272054a5a10e</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="127">
                <SegmentId>4877da3e-d861-4c41-b680-a9f0db422fe3</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="127"
                  trans_unit_id="127-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="127">
            <SegmentId>4877da3e-d861-4c41-b680-a9f0db422fe3</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="127"
              trans_unit_id="127-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="18cca92a-dfb7-4a51-ab4e-afa64d3bfe5d"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="18cca92a-dfb7-4a51-ab4e-afa64d3bfe5d">
        <Lines>
          <MarkdownLine>
            <LineId>63f2a1d1-71e3-49ea-a4ff-8e8ec9504727</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="128">
                <SegmentId>6f12234e-b9c0-4dce-bdc6-13c8876fcff4</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="128"
                  trans_unit_id="128-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Internet of Things</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="128">
            <SegmentId>6f12234e-b9c0-4dce-bdc6-13c8876fcff4</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="128"
              trans_unit_id="128-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Internet of Things</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="bb603153-35e7-4821-b670-c102626f5e69"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="bb603153-35e7-4821-b670-c102626f5e69">
        <Lines>
          <MarkdownLine>
            <LineId>20fa6d6e-806b-4c77-ac65-8b74fd991bef</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="129">
                <SegmentId>bb452c6c-1570-40af-b544-f58e14f3a8e8</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="129"
                  trans_unit_id="129-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Some Anti-patterns</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="129">
            <SegmentId>bb452c6c-1570-40af-b544-f58e14f3a8e8</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="129"
              trans_unit_id="129-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Some Anti-patterns</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="fb928852-4bd6-419f-8493-963cfe3e7a19"
        item_type="NormalParagraph"
        item_footer="&#xA;&#xA;"
        trans_unit_id="fb928852-4bd6-419f-8493-963cfe3e7a19">
        <Lines>
          <MarkdownLine>
            <LineId>0025f06f-8020-49a5-8031-60eac1f1d289</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="130">
                <SegmentId>80d24940-7077-42c5-8933-79c26ebea5be</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="130"
                  trans_unit_id="130-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="130">
            <SegmentId>80d24940-7077-42c5-8933-79c26ebea5be</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="130"
              trans_unit_id="130-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
    </ArrayOfMarkdownBlockBase>
  </block_element>
  <references>
    <ArrayOfMarkdownLinkedReference xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownLinkedReference
        item_id="319f141e-8cce-4d76-a92a-89aa914a9031"
        item_type="LinkedReference"
        item_footer="footer_not_set"
        trans_unit_id="319f141e-8cce-4d76-a92a-89aa914a9031">
        <link_id>1</link_id>
        <link_uri>./media/service-fabric-reliable-actors-pattern-distributed-computation/distributed-computation-1.png</link_uri>
        <link_title />
      </MarkdownLinkedReference>
    </ArrayOfMarkdownLinkedReference>
  </references>
</markdown_skeleton_root>