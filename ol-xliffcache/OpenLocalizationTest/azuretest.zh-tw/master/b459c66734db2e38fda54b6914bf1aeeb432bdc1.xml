<markdown_skeleton_root>
  <block_element>
    <ArrayOfMarkdownBlockBase xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownBlockBase
        xsi:type="MarkdownAzureMetadataBlock"
        item_id="461f9936-030c-4148-891d-598e79c4afd5"
        item_type="AzureMetadata"
        item_footer="footer_not_set"
        trans_unit_id="461f9936-030c-4148-891d-598e79c4afd5">
        <LocalizeItemList>
          <MarkdownInternalXmlItem
            internal_item_id="d6149005-45f3-4e37-87b3-b95947ceb45c"
            trans_unit_id="101"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
          <MarkdownInternalXmlItem
            internal_item_id="e5bb575c-6758-4d82-982b-e121e90e136e"
            trans_unit_id="102"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
        </LocalizeItemList>
        <ItemValue>&lt;properties 
   pageTitle="d6149005-45f3-4e37-87b3-b95947ceb45c"
   description="e5bb575c-6758-4d82-982b-e121e90e136e"
   services="event-hubs"
   documentationCenter="na"
   authors="sethmanheim"
   manager="timlt"
   editor="" /&gt;
&lt;tags 
   ms.service="event-hubs"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="tbd"
   ms.date="07/10/2015"
   ms.author="sethm" /&gt;

</ItemValue>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="8524a722-2d66-4d64-81de-985d8b647d2a"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="8524a722-2d66-4d64-81de-985d8b647d2a">
        <segment
          trans_unit_id="103">
          <SegmentId>519780ad-73b1-4750-a5d9-042f1124748d</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="103"
            trans_unit_id="103-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>1</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="c239bccf-cd4e-489d-b337-37cbfe888444"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="c239bccf-cd4e-489d-b337-37cbfe888444">
        <Lines>
          <MarkdownLine>
            <LineId>1100665e-2e4a-4552-9c95-1bbfb3ec09d8</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="104">
                <SegmentId>7b5c693c-f44d-4d77-b08e-8659a78e9a54</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="104"
                  trans_unit_id="104-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="105">
                <SegmentId>ff066ebe-fcff-484f-a30b-037e2fe63604</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="105"
                  trans_unit_id="105-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="106">
                <SegmentId>855cb4b3-2156-4ec9-82f5-2d4ebbd4c7e7</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="106"
                  trans_unit_id="106-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="107">
                <SegmentId>c25ff64b-f337-4404-8865-0bca6020a80b</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="107"
                  trans_unit_id="107-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="104">
            <SegmentId>7b5c693c-f44d-4d77-b08e-8659a78e9a54</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="104"
              trans_unit_id="104-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="105">
            <SegmentId>ff066ebe-fcff-484f-a30b-037e2fe63604</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="105"
              trans_unit_id="105-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="106">
            <SegmentId>855cb4b3-2156-4ec9-82f5-2d4ebbd4c7e7</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="106"
              trans_unit_id="106-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="107">
            <SegmentId>c25ff64b-f337-4404-8865-0bca6020a80b</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="107"
              trans_unit_id="107-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="8c9aec39-1010-498e-afb8-c8ae47f5bcb1"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="8c9aec39-1010-498e-afb8-c8ae47f5bcb1">
        <Lines>
          <MarkdownLine>
            <LineId>2f31845d-3aa0-4ff5-8fe1-f98305db2088</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="108">
                <SegmentId>70d30756-88aa-4359-8a79-8cc4cc3698c4</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="108"
                  trans_unit_id="108-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="109">
                <SegmentId>7b96e650-e4b7-4c55-8ca1-a9a96bface4b</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="109"
                  trans_unit_id="109-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="109"
                  trans_unit_id="109-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>.NET Class Library</internal_link_text>
                  <internal_link_url>https://msdn.microsoft.com/library/jj933431.aspx</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="109"
                  trans_unit_id="109-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="4"
                  internal_item_parent_id="109"
                  trans_unit_id="109-4"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>EventProcessorHost API</internal_link_text>
                  <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.aspx</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="5"
                  internal_item_parent_id="109"
                  trans_unit_id="109-5"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="108">
            <SegmentId>70d30756-88aa-4359-8a79-8cc4cc3698c4</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="108"
              trans_unit_id="108-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="109">
            <SegmentId>7b96e650-e4b7-4c55-8ca1-a9a96bface4b</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="109"
              trans_unit_id="109-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="109"
              trans_unit_id="109-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>.NET Class Library</internal_link_text>
              <internal_link_url>https://msdn.microsoft.com/library/jj933431.aspx</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="109"
              trans_unit_id="109-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="4"
              internal_item_parent_id="109"
              trans_unit_id="109-4"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>EventProcessorHost API</internal_link_text>
              <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.aspx</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="5"
              internal_item_parent_id="109"
              trans_unit_id="109-5"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="78ff9e7e-2e85-426b-8dd2-1fcc7338c453"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="78ff9e7e-2e85-426b-8dd2-1fcc7338c453">
        <segment
          trans_unit_id="110">
          <SegmentId>671bd750-6f45-454f-bfb6-dee39c4d088b</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="110"
            trans_unit_id="110-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="19f68ee3-97f3-455f-9f78-6b339b881ef7"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="19f68ee3-97f3-455f-9f78-6b339b881ef7">
        <Lines>
          <MarkdownLine>
            <LineId>02242600-312d-4dc3-b91d-b6e70bd53dff</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="111">
                <SegmentId>2e87187b-f3a8-40e5-a045-a2d82b03f2ff</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="111"
                  trans_unit_id="111-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <MarkdownInternalBoldItem
                  internal_item_id="2"
                  internal_item_parent_id="111"
                  trans_unit_id="111-2"
                  internal_item_type="Bold">
                  <internal_items />
                  <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
                </MarkdownInternalBoldItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="111"
                  trans_unit_id="111-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="111">
            <SegmentId>2e87187b-f3a8-40e5-a045-a2d82b03f2ff</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="111"
              trans_unit_id="111-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <MarkdownInternalBoldItem
              internal_item_id="2"
              internal_item_parent_id="111"
              trans_unit_id="111-2"
              internal_item_type="Bold">
              <internal_items />
              <internal_itatic_bold_item_type>Star</internal_itatic_bold_item_type>
            </MarkdownInternalBoldItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="111"
              trans_unit_id="111-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="4e731b6a-197c-439a-b7e2-f137b97250c9"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="4e731b6a-197c-439a-b7e2-f137b97250c9">
        <segment
          trans_unit_id="112">
          <SegmentId>172dbe5e-ab6e-44d0-8f9e-2e367e2c4a27</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="112"
            trans_unit_id="112-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="4b9e4157-60ad-4980-9e02-42e17d25a1d5"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="4b9e4157-60ad-4980-9e02-42e17d25a1d5">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Create the Event Hub
EventHubDescription ehd = new EventHubDescription(eventHubName);
ehd.PartitionCount = SampleManager.numPartitions;
namespaceManager.CreateEventHubAsync(ehd).Wait();</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="7f3635bf-86f7-4a86-a366-2e4c8d714797"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="7f3635bf-86f7-4a86-a366-2e4c8d714797">
        <segment
          trans_unit_id="113">
          <SegmentId>ed811db6-ab12-4b9f-9fdc-2b1f01324e7c</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="113"
            trans_unit_id="113-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="2dd92dbf-2e02-4f39-aaa7-605c3d5beab6"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="2dd92dbf-2e02-4f39-aaa7-605c3d5beab6">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>EventHubDescription ehd = await namespaceManager.GetEventHubAsync(eventHubName);

// Create a customer SAS rule with Manage permissions
ehd.UserMetadata = "Some updated info";
string ruleName = "myeventhubmanagerule";
string ruleKey = SharedAccessAuthorizationRule.GenerateRandomKey();
ehd.Authorization.Add(new SharedAccessAuthorizationRule(ruleName, ruleKey, new AccessRights[] {AccessRights.Manage, AccessRights.Listen, AccessRights.Send} )); 
namespaceManager.UpdateEventHubAsync(ehd).Wait();</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="8023f328-e9b3-455e-9eeb-1fc85f55ca42"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="8023f328-e9b3-455e-9eeb-1fc85f55ca42">
        <segment
          trans_unit_id="114">
          <SegmentId>efe2c7a8-21af-4d0b-afde-64aa9590d0d5</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="114"
            trans_unit_id="114-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="e932b860-9a99-4efd-966f-0bc0e2750790"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="e932b860-9a99-4efd-966f-0bc0e2750790">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>namespaceManager.DeleteEventHubAsync("event hub name").Wait();</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="b51bdd29-5be1-45f3-a890-46a84fb57d0e"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="b51bdd29-5be1-45f3-a890-46a84fb57d0e">
        <segment
          trans_unit_id="115">
          <SegmentId>55bdf9ac-1297-436f-94e0-a383d4a533d0</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="115"
            trans_unit_id="115-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="4ffa71fd-c7f8-4d54-a411-03cc298dc059"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="4ffa71fd-c7f8-4d54-a411-03cc298dc059">
        <segment
          trans_unit_id="116">
          <SegmentId>e86754ec-2d1e-4adb-88cd-3f58f1aead12</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="116"
            trans_unit_id="116-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="6774f4a9-8ee3-4232-8b1f-24c5b0cff0cb"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="6774f4a9-8ee3-4232-8b1f-24c5b0cff0cb">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// EventHubClient model (uses implicit factory instance, so all links on same connection)
EventHubClient eventHubClient = EventHubClient.Create("event hub name");</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="22fb1bee-7129-4ff5-8eb5-292663bfe592"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="22fb1bee-7129-4ff5-8eb5-292663bfe592">
        <segment
          trans_unit_id="117">
          <SegmentId>656f941b-32d3-47c9-8c5c-c64dd56149ba</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="117"
            trans_unit_id="117-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="1bd0c7cc-4d63-419d-a819-110d82e1b104"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="1bd0c7cc-4d63-419d-a819-110d82e1b104">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Create the device/temperature metric
MetricEvent info = new MetricEvent() { DeviceId = random.Next(SampleManager.NumDevices), Temperature = random.Next(100) };
EventData data = new EventData(new byte[10]); // Byte array
EventData data = new EventData(Stream); // Stream 
EventData data = new EventData(info, serializer) //Object and serializer 
    {
       PartitionKey = info.DeviceId.ToString()
    };

// Set user properties if needed
data.Properties.Add("Type", "Telemetry_" + DateTime.Now.ToLongTimeString());

// Send single message async
await client.SendAsync(data);</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="b5b3c435-4277-4bae-97f3-0db83ff020cc"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="b5b3c435-4277-4bae-97f3-0db83ff020cc">
        <segment
          trans_unit_id="118">
          <SegmentId>082fea37-9417-4e1d-890b-d047b4c95188</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="118"
            trans_unit_id="118-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="a33133d7-aebb-4114-a083-16589aa09ef1"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="a33133d7-aebb-4114-a083-16589aa09ef1">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Create the Event Hub client
EventHubClient eventHubClient = EventHubClient.Create(EventHubName);

// Get the default subscriber group
EventHubSubscriberGroup defaultSubscriberGroup = eventHubClient.GetDefaultSubscriberGroup();

// All messages
EventHubReceiver consumer = await defaultConsumerGroup.CreateReceiverAsync(shardId: index);

// From one day ago
EventHubReceiver consumer = await defaultConsumerGroup.CreateReceiverAsync(shardId: index, startingDateTimeUtc:DateTime.Now.AddDays(-1));

// From specific offset, -1 means oldest
EventHubReceiver consumer = await defaultConsumerGroup.CreateReceiverAsync(shardId: index,startingOffset:-1); </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="e1958d9c-b07c-40c2-9cb1-bf7659b8fd34"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="e1958d9c-b07c-40c2-9cb1-bf7659b8fd34">
        <segment
          trans_unit_id="119">
          <SegmentId>694ea4fb-84ef-468d-b98c-9ffc4147cc47</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="119"
            trans_unit_id="119-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>3</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="ca9601c1-251f-4b31-a569-23907e32352f"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="ca9601c1-251f-4b31-a569-23907e32352f">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>var message = await consumer.ReceiveAsync();

// Provide a serializer
var info = message.GetBody&lt;Type&gt;(Serializer)

// Get a byte[]
var info = message.GetBytes(); 
msg = UnicodeEncoding.UTF8.GetString(info);</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="dd1541f0-4ee9-4eb3-9bd1-309a31ba4645"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="dd1541f0-4ee9-4eb3-9bd1-309a31ba4645">
        <segment
          trans_unit_id="120">
          <SegmentId>033e4a5d-6d26-4421-be05-02b34e5f2dee</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="120"
            trans_unit_id="120-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="e5699071-1d50-458a-a485-bb8dd5f58271"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="e5699071-1d50-458a-a485-bb8dd5f58271">
        <Lines>
          <MarkdownLine>
            <LineId>72eb31ea-c8d9-4f87-b0da-3cc8eb09230f</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="121">
                <SegmentId>f04c07ed-da9a-4210-89d1-fc50af407264</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="121"
                  trans_unit_id="121-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="121">
            <SegmentId>f04c07ed-da9a-4210-89d1-fc50af407264</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="121"
              trans_unit_id="121-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="08d49006-6caf-478a-a023-f7be6db79045"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="08d49006-6caf-478a-a023-f7be6db79045">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>// Checkpointing is done within the SimpleEventProcessor and on a per-consumerGroup per-partition basis, workers resume from where they last left off.
// Use the EventData.Offset value for checkpointing yourself, this value is unique per partition.
string eventHubConnectionString = System.Configuration.ConfigurationManager.AppSettings["Microsoft.ServiceBus.ConnectionString"];
string blobConnectionString = System.Configuration.ConfigurationManager.AppSettings["AzureStorageConnectionString"]; // Required for checkpoint/state

EventHubDescription eventHubDescription = new EventHubDescription(EventHubName);
EventProcessorHost host = new EventProcessorHost(WorkerName, EventHubName, defaultConsumerGroup.GroupName, eventHubConnectionString, blobConnectionString);
            host.RegisterEventProcessorAsync&lt;SimpleEventProcessor&gt;();

// To close
host.UnregisterEventProcessorAsync().Wait();   </code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="fbc1cba7-4def-4bae-b93d-e1fa69bcdc4e"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="fbc1cba7-4def-4bae-b93d-e1fa69bcdc4e">
        <Lines>
          <MarkdownLine>
            <LineId>599f9a29-4d61-4178-9ba6-bb22b5af3f31</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="122">
                <SegmentId>e7ec0e84-363f-442d-81b8-c2b90f730679</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="122"
                  trans_unit_id="122-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
                <LinkItem
                  internal_item_id="2"
                  internal_item_parent_id="122"
                  trans_unit_id="122-2"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>IEventProcessor</internal_link_text>
                  <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.ieventprocessor.aspx</internal_link_url>
                  <internal_link_title />
                </LinkItem>
                <InternalNormalItem
                  internal_item_id="3"
                  internal_item_parent_id="122"
                  trans_unit_id="122-3"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="122">
            <SegmentId>e7ec0e84-363f-442d-81b8-c2b90f730679</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="122"
              trans_unit_id="122-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
            <LinkItem
              internal_item_id="2"
              internal_item_parent_id="122"
              trans_unit_id="122-2"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>IEventProcessor</internal_link_text>
              <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.ieventprocessor.aspx</internal_link_url>
              <internal_link_title />
            </LinkItem>
            <InternalNormalItem
              internal_item_id="3"
              internal_item_parent_id="122"
              trans_unit_id="122-3"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="8bcab961-a9fa-428d-9aef-411ba8ed9f59"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="8bcab961-a9fa-428d-9aef-411ba8ed9f59">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public class SimpleEventProcessor : IEventProcessor
{
    IDictionary&lt;string, string&gt; map;
    PartitionContext partitionContext;

    public SimpleEventProcessor()
    {
        this.map = new Dictionary&lt;string, string&gt;();
    }

    public Task OpenAsync(PartitionContext context)
    {
        this.partitionContext = context;

        return Task.FromResult&lt;object&gt;(null);
    }

    public async Task ProcessEventsAsync(PartitionContext context, IEnumerable&lt;EventData&gt; messages)
    {
        foreach (EventData message in messages)
        {
            Process messages here
        }

        // Checkpoint when appropriate
        await context.CheckpointAsync();

    }


    public async Task CloseAsync(PartitionContext context, CloseReason reason)
    {
        if (reason == CloseReason.Shutdown)
        {
            await context.CheckpointAsync();
        }
    }
}</code_block>
        <fenced_code_lang />
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="9e4e8e0a-f677-4e0a-aed9-fae91bc20785"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="9e4e8e0a-f677-4e0a-aed9-fae91bc20785">
        <segment
          trans_unit_id="123">
          <SegmentId>addef309-4496-4fad-a7a2-15a27d333e46</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="123"
            trans_unit_id="123-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="9a9af19e-93bf-4464-9dfc-a955b7106b22"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="9a9af19e-93bf-4464-9dfc-a955b7106b22">
        <Lines>
          <MarkdownLine>
            <LineId>97ec9928-727d-41d3-9695-9dbd65963377</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="124">
                <SegmentId>099dc786-dd47-4945-b685-03f60264f550</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="124"
                  trans_unit_id="124-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="124">
            <SegmentId>099dc786-dd47-4945-b685-03f60264f550</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="124"
              trans_unit_id="124-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="99252081-148d-4ef4-93bf-04181101e7f6"
        item_type="List"
        item_footer=""
        trans_unit_id="99252081-148d-4ef4-93bf-04181101e7f6">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="d027ab63-9aa9-48b0-ad1d-d4571f4b2f13"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="d027ab63-9aa9-48b0-ad1d-d4571f4b2f13">
              <Lines>
                <MarkdownLine>
                  <LineId>45d1b777-5a80-44f6-9cff-a629ecadc01a</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="125">
                      <SegmentId>d0be3142-b001-46d6-846a-acc7efb7345e</SegmentId>
                      <LinkItem
                        internal_item_id="1"
                        internal_item_parent_id="125"
                        trans_unit_id="125-1"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Event Hubs programming guide</internal_link_text>
                        <internal_link_url>event-hubs-programming-guide.md</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="125">
                  <SegmentId>d0be3142-b001-46d6-846a-acc7efb7345e</SegmentId>
                  <LinkItem
                    internal_item_id="1"
                    internal_item_parent_id="125"
                    trans_unit_id="125-1"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Event Hubs programming guide</internal_link_text>
                    <internal_link_url>event-hubs-programming-guide.md</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>-</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="3abba18f-92c9-40ba-960e-beeecdcaae9d"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="3abba18f-92c9-40ba-960e-beeecdcaae9d">
              <Lines>
                <MarkdownLine>
                  <LineId>357c1e18-773b-47de-aecc-02ac4ba1f22a</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="126">
                      <SegmentId>64189ae3-d94e-4b34-b9ee-fc3eff699628</SegmentId>
                      <LinkItem
                        internal_item_id="1"
                        internal_item_parent_id="126"
                        trans_unit_id="126-1"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Event Hubs overview</internal_link_text>
                        <internal_link_url>event-hubs-overview.md</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="126">
                  <SegmentId>64189ae3-d94e-4b34-b9ee-fc3eff699628</SegmentId>
                  <LinkItem
                    internal_item_id="1"
                    internal_item_parent_id="126"
                    trans_unit_id="126-1"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Event Hubs overview</internal_link_text>
                    <internal_link_url>event-hubs-overview.md</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>-</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="8c9ecfa8-bb0d-4d87-a3bf-8aad7af9450f"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="8c9ecfa8-bb0d-4d87-a3bf-8aad7af9450f">
              <Lines>
                <MarkdownLine>
                  <LineId>8d64a7b5-b00a-447e-a01a-7d909dee44cd</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="127">
                      <SegmentId>06ce0028-02f4-46f0-aa5b-f35331b50532</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="127"
                        trans_unit_id="127-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="127">
                  <SegmentId>06ce0028-02f4-46f0-aa5b-f35331b50532</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="127"
                    trans_unit_id="127-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>-</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="c8bb1fc7-416e-4250-965e-6cbeb3867e3c"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="c8bb1fc7-416e-4250-965e-6cbeb3867e3c">
        <Lines>
          <MarkdownLine>
            <LineId>3bac86b2-997a-4689-8f26-7d7bb70c64a1</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="128">
                <SegmentId>422674fa-127d-4645-a96b-e689f2ea28a2</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="128"
                  trans_unit_id="128-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="128">
            <SegmentId>422674fa-127d-4645-a96b-e689f2ea28a2</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="128"
              trans_unit_id="128-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="81a020c1-9e3e-466a-aa8d-047676b8f5f8"
        item_type="List"
        item_footer="&#xA;&#xA;"
        trans_unit_id="81a020c1-9e3e-466a-aa8d-047676b8f5f8">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="f5a7884a-dd85-4a55-8946-fa16af5e1c50"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="f5a7884a-dd85-4a55-8946-fa16af5e1c50">
              <Lines>
                <MarkdownLine>
                  <LineId>d8a84fe6-3e6a-4c12-9687-0499e4f9e7b8</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="129">
                      <SegmentId>d5073971-8a79-4359-8949-ba6bfc16ea9c</SegmentId>
                      <LinkItem
                        internal_item_id="1"
                        internal_item_parent_id="129"
                        trans_unit_id="129-1"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Service Bus and Event Hubs .NET API reference</internal_link_text>
                        <internal_link_url>https://msdn.microsoft.com/library/jj933424.aspx</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="129">
                  <SegmentId>d5073971-8a79-4359-8949-ba6bfc16ea9c</SegmentId>
                  <LinkItem
                    internal_item_id="1"
                    internal_item_parent_id="129"
                    trans_unit_id="129-1"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Service Bus and Event Hubs .NET API reference</internal_link_text>
                    <internal_link_url>https://msdn.microsoft.com/library/jj933424.aspx</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>-</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="098fcfdb-258e-4fda-9981-243bb5296707"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="098fcfdb-258e-4fda-9981-243bb5296707">
              <Lines>
                <MarkdownLine>
                  <LineId>d90a2af9-64ce-4ef7-8269-225d045aea58</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="130">
                      <SegmentId>2309a3ac-0042-4dc8-a404-07c58e4aa388</SegmentId>
                      <LinkItem
                        internal_item_id="1"
                        internal_item_parent_id="130"
                        trans_unit_id="130-1"
                        internal_item_type="Link">
                        <internal_items />
                        <internal_link_type>Inline</internal_link_type>
                        <internal_link_text>Event processor host API reference</internal_link_text>
                        <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.eventprocessorhost.aspx</internal_link_url>
                        <internal_link_title />
                      </LinkItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="130">
                  <SegmentId>2309a3ac-0042-4dc8-a404-07c58e4aa388</SegmentId>
                  <LinkItem
                    internal_item_id="1"
                    internal_item_parent_id="130"
                    trans_unit_id="130-1"
                    internal_item_type="Link">
                    <internal_items />
                    <internal_link_type>Inline</internal_link_type>
                    <internal_link_text>Event processor host API reference</internal_link_text>
                    <internal_link_url>https://msdn.microsoft.com/library/microsoft.servicebus.messaging.eventprocessorhost.aspx</internal_link_url>
                    <internal_link_title />
                  </LinkItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>-</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
    </ArrayOfMarkdownBlockBase>
  </block_element>
  <references>
    <ArrayOfMarkdownLinkedReference xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
  </references>
</markdown_skeleton_root>