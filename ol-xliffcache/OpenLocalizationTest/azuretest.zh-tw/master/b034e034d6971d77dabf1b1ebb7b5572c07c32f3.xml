<markdown_skeleton_root>
  <block_element>
    <ArrayOfMarkdownBlockBase xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownBlockBase
        xsi:type="MarkdownAzureMetadataBlock"
        item_id="9ce7b9c4-dce9-47c7-b606-691963c64fca"
        item_type="AzureMetadata"
        item_footer="footer_not_set"
        trans_unit_id="9ce7b9c4-dce9-47c7-b606-691963c64fca">
        <LocalizeItemList>
          <MarkdownInternalXmlItem
            internal_item_id="9555ea74-2501-4a7c-b5fc-5fa6b7225d2c"
            trans_unit_id="101"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
          <MarkdownInternalXmlItem
            internal_item_id="76bfb77b-7afd-46e7-8282-e47e8645cda1"
            trans_unit_id="102"
            internal_item_type="Xml">
            <internal_items />
          </MarkdownInternalXmlItem>
        </LocalizeItemList>
        <ItemValue>&lt;properties
   pageTitle="9555ea74-2501-4a7c-b5fc-5fa6b7225d2c"
   description="76bfb77b-7afd-46e7-8282-e47e8645cda1"
   services="service-fabric"
   documentationCenter=".net"
   authors="jessebenson"
   manager="timlt"
   editor=""/&gt;

&lt;tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="08/05/2015"
   ms.author="claudioc"/&gt;

</ItemValue>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="b6851f52-51ce-44f4-9260-cb6b2c356b17"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="b6851f52-51ce-44f4-9260-cb6b2c356b17">
        <segment
          trans_unit_id="103">
          <SegmentId>05a7ca1f-6d0a-40b7-8f9c-73956532c8d6</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="103"
            trans_unit_id="103-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>1</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="1d1a8497-933e-4d9c-b682-c4cdb5605330"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="1d1a8497-933e-4d9c-b682-c4cdb5605330">
        <Lines>
          <MarkdownLine>
            <LineId>b6cad884-2c1e-45b2-b65b-aea5411a0f02</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="104">
                <SegmentId>cc2be94c-a179-44f0-b700-d517b29bd854</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="104"
                  trans_unit_id="104-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="104">
            <SegmentId>cc2be94c-a179-44f0-b700-d517b29bd854</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="104"
              trans_unit_id="104-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="152d96a9-30a1-457b-9149-ffa681bac7b9"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="152d96a9-30a1-457b-9149-ffa681bac7b9">
        <Lines>
          <MarkdownLine>
            <LineId>e4d1cbc0-2328-4785-b914-66aadd55361b</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="105">
                <SegmentId>a5f30b49-4941-4e16-b91f-bf3aa81509ca</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="105"
                  trans_unit_id="105-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="105">
            <SegmentId>a5f30b49-4941-4e16-b91f-bf3aa81509ca</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="105"
              trans_unit_id="105-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="e1abff98-9a4c-4ef3-b85d-3ae99107d0c8"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="e1abff98-9a4c-4ef3-b85d-3ae99107d0c8">
        <Lines>
          <MarkdownLine>
            <LineId>f7a96ef8-081b-438e-9933-37cf569b5514</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="106">
                <SegmentId>30e333d3-6ac7-4e4a-9de4-049ae55046e3</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="106"
                  trans_unit_id="106-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="106">
            <SegmentId>30e333d3-6ac7-4e4a-9de4-049ae55046e3</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="106"
              trans_unit_id="106-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="005ca8a4-c4c5-4f6c-9da3-87a61cbfc9ba"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="005ca8a4-c4c5-4f6c-9da3-87a61cbfc9ba">
        <Lines>
          <MarkdownLine>
            <LineId>6d50e502-8d8e-44c9-915b-7283783ea7f6</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="107">
                <SegmentId>4f0057ff-e968-4d63-b572-c08629a40c5e</SegmentId>
                <ImageItem
                  internal_item_id="1"
                  internal_item_parent_id="107"
                  trans_unit_id="107-1"
                  internal_item_type="Image">
                  <internal_items />
                  <internal_Image_type>Reference</internal_Image_type>
                  <internal_link_text />
                  <internal_link_id>1</internal_link_id>
                </ImageItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="107">
            <SegmentId>4f0057ff-e968-4d63-b572-c08629a40c5e</SegmentId>
            <ImageItem
              internal_item_id="1"
              internal_item_parent_id="107"
              trans_unit_id="107-1"
              internal_item_type="Image">
              <internal_items />
              <internal_Image_type>Reference</internal_Image_type>
              <internal_link_text />
              <internal_link_id>1</internal_link_id>
            </ImageItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="7f6ba637-3e41-4236-8e5f-d901b1b12401"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="7f6ba637-3e41-4236-8e5f-d901b1b12401">
        <Lines>
          <MarkdownLine>
            <LineId>86a28eb5-4770-4c96-a9fe-263f5222c2f9</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="108">
                <SegmentId>828cc9c2-d1b4-43c6-bd30-7aaa4d9ce926</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="108"
                  trans_unit_id="108-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="109">
                <SegmentId>81b8e0c0-098d-4130-b7e7-fdf5fecc2a77</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="109"
                  trans_unit_id="109-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="108">
            <SegmentId>828cc9c2-d1b4-43c6-bd30-7aaa4d9ce926</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="108"
              trans_unit_id="108-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="109">
            <SegmentId>81b8e0c0-098d-4130-b7e7-fdf5fecc2a77</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="109"
              trans_unit_id="109-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownListBlock"
        item_id="9dee32a2-591f-4428-b755-1da4ada35a3e"
        item_type="List"
        item_footer=""
        trans_unit_id="9dee32a2-591f-4428-b755-1da4ada35a3e">
        <inner_list_items>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="d13ef253-80f6-4fc8-9412-7765c8cbf758"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="d13ef253-80f6-4fc8-9412-7765c8cbf758">
              <Lines>
                <MarkdownLine>
                  <LineId>5fe834a8-45c6-4df3-a9c2-f8814cb992c2</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="110">
                      <SegmentId>2d3acef4-b4c6-4a8c-a095-e3872e719c56</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="110"
                        trans_unit_id="110-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="110">
                  <SegmentId>2d3acef4-b4c6-4a8c-a095-e3872e719c56</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="110"
                    trans_unit_id="110-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="0f7dce99-2f71-4c2d-8556-997bb210d93a"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="0f7dce99-2f71-4c2d-8556-997bb210d93a">
              <Lines>
                <MarkdownLine>
                  <LineId>ec0a5a74-ce47-4817-8f55-d02507808c0f</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="111">
                      <SegmentId>238255a1-3551-41f4-a674-ac43803f1ad7</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="111"
                        trans_unit_id="111-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="111">
                  <SegmentId>238255a1-3551-41f4-a674-ac43803f1ad7</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="111"
                    trans_unit_id="111-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="c5aa64a3-6f71-46a2-b045-a793299c6329"
              item_type="NormalParagraph"
              item_footer=""
              trans_unit_id="c5aa64a3-6f71-46a2-b045-a793299c6329">
              <Lines>
                <MarkdownLine>
                  <LineId>f73894bf-d996-4277-8a3b-936acbd0d691</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="112">
                      <SegmentId>811b7500-2cb9-4729-9cdf-23e9951e3d35</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="112"
                        trans_unit_id="112-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="112">
                  <SegmentId>811b7500-2cb9-4729-9cdf-23e9951e3d35</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="112"
                    trans_unit_id="112-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
          <ListItem>
            <MarkdownParagraphBlock
              item_id="b8819010-fa55-4eb0-9b29-3bb40dd0f29c"
              item_type="NormalParagraph"
              item_footer="footer_not_set"
              trans_unit_id="b8819010-fa55-4eb0-9b29-3bb40dd0f29c">
              <Lines>
                <MarkdownLine>
                  <LineId>df3cf17b-5dcc-4da2-b9b4-443c8b5fa849</LineId>
                  <paragraph_segments>
                    <MarkdownSegment
                      trans_unit_id="113">
                      <SegmentId>03bf203b-2bad-4fb4-bc11-5f8b25da78fc</SegmentId>
                      <InternalNormalItem
                        internal_item_id="1"
                        internal_item_parent_id="113"
                        trans_unit_id="113-1"
                        internal_item_type="Normal">
                        <internal_items />
                      </InternalNormalItem>
                    </MarkdownSegment>
                  </paragraph_segments>
                  <PrefixWSLength>1</PrefixWSLength>
                  <SuffixWSLength>0</SuffixWSLength>
                </MarkdownLine>
              </Lines>
              <paragraph_segments>
                <MarkdownSegment
                  trans_unit_id="113">
                  <SegmentId>03bf203b-2bad-4fb4-bc11-5f8b25da78fc</SegmentId>
                  <InternalNormalItem
                    internal_item_id="1"
                    internal_item_parent_id="113"
                    trans_unit_id="113-1"
                    internal_item_type="Normal">
                    <internal_items />
                  </InternalNormalItem>
                </MarkdownSegment>
              </paragraph_segments>
            </MarkdownParagraphBlock>
            <Identifier>*</Identifier>
            <IndentsLength>
              <int>0</int>
            </IndentsLength>
          </ListItem>
        </inner_list_items>
        <ListType>Charactor</ListType>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="85544945-575e-43c7-a6a2-07dea51af4af"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="85544945-575e-43c7-a6a2-07dea51af4af">
        <segment
          trans_unit_id="114">
          <SegmentId>509d4b97-df74-4324-9e4e-1ca71ba1c815</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="114"
            trans_unit_id="114-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="e816c321-d1fd-4a29-8fee-350f799e2561"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="e816c321-d1fd-4a29-8fee-350f799e2561">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface IProcessor : IActor
{
    Task ProcessAsync(int tries, int seed, int taskCount);
}

public class Processor : Actor, IProcessor
{
    public Task ProcessAsync(int tries, int seed, int taskCount)
    {
        var tasks = new List&lt;Task&gt;();
        for (int i = 0; i &lt; taskCount; i++)
        {
            var task = ActorProxy.Create&lt;IPooledTask&gt;(0); // stateless
            tasks.Add(task.CalculateAsync(tries, seed));
        }
        return Task.WhenAll(tasks);
    }
}

public interface IPooledTask : IActor
{
    Task CalculateAsync(int tries, int seed);
}

public class PooledTask : Actor, IPooledTask
{
    public Task CalculateAsync(int tries, int seed)
    {
        var pi = new Pi()
        {
            InCircle = 0,
            Tries = tries
        };

        var random = new Random(seed);
        double x, y;
        for (int i = 0; i &lt; tries; i++)
        {
            x = random.NextDouble();
            y = random.NextDouble();
            if (Math.Sqrt(x * x + y * y) &lt;= 1)
                pi.InCircle++;
        }

        var agg = ActorProxy.Create&lt;IAggregator&gt;(ActorId.NewId());
        return agg.AggregateAsync(pi);
    }
}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="84b5013e-7c44-4423-b0c2-f52651faf769"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="84b5013e-7c44-4423-b0c2-f52651faf769">
        <Lines>
          <MarkdownLine>
            <LineId>3da14e04-5e65-4d23-957e-ad0f429c3928</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="115">
                <SegmentId>23520ae4-d6d7-4f37-b588-691f17b8ebbf</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="115"
                  trans_unit_id="115-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="116">
                <SegmentId>856f032a-3422-40eb-a7dd-819bc97fe890</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="116"
                  trans_unit_id="116-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
          <MarkdownLine>
            <LineId>eda7c24f-26b2-458e-81f0-046e63f46cd4</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="117">
                <SegmentId>e0f09d8d-0cd5-49f9-97d3-fb9e9c912f79</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="117"
                  trans_unit_id="117-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="115">
            <SegmentId>23520ae4-d6d7-4f37-b588-691f17b8ebbf</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="115"
              trans_unit_id="115-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="116">
            <SegmentId>856f032a-3422-40eb-a7dd-819bc97fe890</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="116"
              trans_unit_id="116-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="117">
            <SegmentId>e0f09d8d-0cd5-49f9-97d3-fb9e9c912f79</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="117"
              trans_unit_id="117-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="39b99fb3-c14b-4542-80d4-7a115e621ccb"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="39b99fb3-c14b-4542-80d4-7a115e621ccb">
        <segment
          trans_unit_id="118">
          <SegmentId>57f2fcc7-23ec-4720-b6ea-2625bc94cba3</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="118"
            trans_unit_id="118-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownFencedCodeBlock"
        item_id="cff55a0e-6011-4a09-9dc8-5013802276a6"
        item_type="FencedCodeBlock"
        item_footer=""
        trans_unit_id="cff55a0e-6011-4a09-9dc8-5013802276a6">
        <codeblock_wraper>```</codeblock_wraper>
        <code_block>public interface IAggregator : IActor
{
    Task AggregateAsync(Pi pi);
}

[DataContract]
class AggregatorState
{
    [DataMember]
    public Pi _pi;
    [DataMember]
    public bool _pending;
}

public class Aggregator : Actor&lt;AggregatorState&gt;, IAggregator
{
    public override Task OnActivateAsync()
    {
        State._pi = new Pi() { InCircle = 0, Tries = 0 };
        State._pending = false;

        this.RegisterTimer(
            ProcessAsync,
            null,
            TimeSpan.FromSeconds(5),
            TimeSpan.FromSeconds(5));

        return base.OnActivateAsync();
    }

    private async Task ProcessAsync(object obj)
    {
        if (false == _pending)
            return;

        var finaliser = ActorProxy.Create&lt;IFinaliser&gt;(0);
        await finaliser.FinaliseAsync(_pi);
        State._pending = false;
        State._pi.InCircle = 0;
        State._pi.Tries = 0;
    }

    public Task AggregateAsync(Pi pi)
    {
        State._pi.InCircle += pi.InCircle;
        State._pi.Tries += pi.Tries;
        State._pending = true;
        return TaskDone.Done;
    }
}

public interface IFinaliser : IActor
{
    Task FinaliseAsync(Pi pi);
}

[DataContract]
class FinalizerState
{
    [DataMember]
    public Pi _pi;
}

public class Finaliser : Actor&lt;FinalizerState&gt;, IFinaliser
{
    public override Task OnActivateAsync()
    {
        State._pi = new Pi()
        {
            InCircle = 0,
            Tries = 0
        };

        return base.OnActivateAsync();
    }

    public Task FinaliseAsync(Pi pi)
    {
        State._pi.InCircle += pi.InCircle;
        State._pi.Tries += pi.Tries;
        Console.WriteLine(" Pi = {0:N9}  T = {1:N0}, {2}",(double)State._pi.InCircle / (double)State._pi.Tries * 4.0, State._pi.Tries, State._pi.InCircle);

        return TaskDone.Done;
    }
}</code_block>
        <fenced_code_lang>csharp</fenced_code_lang>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="b3af3004-7460-45fa-ac70-0ca1287a936e"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="b3af3004-7460-45fa-ac70-0ca1287a936e">
        <Lines>
          <MarkdownLine>
            <LineId>6d2f98b0-3fdb-4737-b4cf-b89b85f007ca</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="119">
                <SegmentId>95747ba1-618f-49fa-941c-1f5e34d67703</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="119"
                  trans_unit_id="119-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="119">
            <SegmentId>95747ba1-618f-49fa-941c-1f5e34d67703</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="119"
              trans_unit_id="119-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="52074655-c6e5-4572-98b6-0b6e787d27f2"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="52074655-c6e5-4572-98b6-0b6e787d27f2">
        <Lines>
          <MarkdownLine>
            <LineId>8b66cebf-e3f7-44ad-ad05-5a4523ac8ca5</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="120">
                <SegmentId>f994d70e-0571-4546-8270-ffec2d150087</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="120"
                  trans_unit_id="120-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="121">
                <SegmentId>e43ee313-2810-43d1-afb8-3c2eaa3242a1</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="121"
                  trans_unit_id="121-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
              <MarkdownSegment
                trans_unit_id="122">
                <SegmentId>ea3c8bb6-0e13-4ea3-a640-4c704eca8b4c</SegmentId>
                <InternalNormalItem
                  internal_item_id="1"
                  internal_item_parent_id="122"
                  trans_unit_id="122-1"
                  internal_item_type="Normal">
                  <internal_items />
                </InternalNormalItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="120">
            <SegmentId>f994d70e-0571-4546-8270-ffec2d150087</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="120"
              trans_unit_id="120-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="121">
            <SegmentId>e43ee313-2810-43d1-afb8-3c2eaa3242a1</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="121"
              trans_unit_id="121-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
          <MarkdownSegment
            trans_unit_id="122">
            <SegmentId>ea3c8bb6-0e13-4ea3-a640-4c704eca8b4c</SegmentId>
            <InternalNormalItem
              internal_item_id="1"
              internal_item_parent_id="122"
              trans_unit_id="122-1"
              internal_item_type="Normal">
              <internal_items />
            </InternalNormalItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownHeaderBlock"
        item_id="91bce539-b6fb-4db1-9f49-68b8751e3925"
        item_type="Header"
        item_footer="footer_not_set"
        trans_unit_id="91bce539-b6fb-4db1-9f49-68b8751e3925">
        <segment
          trans_unit_id="123">
          <SegmentId>de9439ee-ea9e-4a54-aef5-1304bd2ad814</SegmentId>
          <InternalNormalItem
            internal_item_id="1"
            internal_item_parent_id="123"
            trans_unit_id="123-1"
            internal_item_type="Normal">
            <internal_items />
          </InternalNormalItem>
        </segment>
        <header_type>Star</header_type>
        <header_level>2</header_level>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="ae8b12f5-c8f5-4678-b810-1af0fc445610"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="ae8b12f5-c8f5-4678-b810-1af0fc445610">
        <Lines>
          <MarkdownLine>
            <LineId>a5e22b9c-b97f-4af2-bad4-a25f7ffc7388</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="124">
                <SegmentId>033162a9-cbc7-48c6-aafa-88a480358ae8</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="124"
                  trans_unit_id="124-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Smart Cache</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="124">
            <SegmentId>033162a9-cbc7-48c6-aafa-88a480358ae8</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="124"
              trans_unit_id="124-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Smart Cache</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-smart-cache.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="f0e95253-f7d8-4ee4-89c6-adc98f0c86f5"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="f0e95253-f7d8-4ee4-89c6-adc98f0c86f5">
        <Lines>
          <MarkdownLine>
            <LineId>2d5982ee-87f4-4410-8bbe-54b4e5960f0e</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="125">
                <SegmentId>860eb291-4404-4159-afe0-efb531788c5f</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="125"
                  trans_unit_id="125-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Distributed Networks and Graphs</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-distributed-networks-and-graphs.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="125">
            <SegmentId>860eb291-4404-4159-afe0-efb531788c5f</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="125"
              trans_unit_id="125-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Distributed Networks and Graphs</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-distributed-networks-and-graphs.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="58842889-b50e-4288-9986-d5c79c77b840"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="58842889-b50e-4288-9986-d5c79c77b840">
        <Lines>
          <MarkdownLine>
            <LineId>f0bea313-895e-4d1e-8982-35d6e2d3a670</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="126">
                <SegmentId>2bace0c8-a436-4c84-adc9-db82572db85a</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="126"
                  trans_unit_id="126-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Resource Governance</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="126">
            <SegmentId>2bace0c8-a436-4c84-adc9-db82572db85a</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="126"
              trans_unit_id="126-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Resource Governance</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-resource-governance.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="b432ab3f-00f5-4408-a43b-35ca8a9b40a0"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="b432ab3f-00f5-4408-a43b-35ca8a9b40a0">
        <Lines>
          <MarkdownLine>
            <LineId>55bcd302-9158-4dff-a37e-d637c09ec8d5</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="127">
                <SegmentId>d353bcd0-b83c-47b9-b9c0-832a92fa8690</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="127"
                  trans_unit_id="127-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="127">
            <SegmentId>d353bcd0-b83c-47b9-b9c0-832a92fa8690</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="127"
              trans_unit_id="127-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Stateful Service Composition</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-stateful-service-composition.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="2c8157b3-45ea-45d0-a3b3-a3c02037eb64"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="2c8157b3-45ea-45d0-a3b3-a3c02037eb64">
        <Lines>
          <MarkdownLine>
            <LineId>b19113a9-dfc8-4d0a-a638-7173c23141c6</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="128">
                <SegmentId>0633caad-47d6-4530-a8c8-1489d842866a</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="128"
                  trans_unit_id="128-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Pattern: Internet of Things</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="128">
            <SegmentId>0633caad-47d6-4530-a8c8-1489d842866a</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="128"
              trans_unit_id="128-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Pattern: Internet of Things</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-pattern-internet-of-things.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="7736624f-be02-4297-bd65-67ffa033ffb7"
        item_type="NormalParagraph"
        item_footer=""
        trans_unit_id="7736624f-be02-4297-bd65-67ffa033ffb7">
        <Lines>
          <MarkdownLine>
            <LineId>345c9df5-92c0-43ff-9113-2d4e0b23d1bd</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="129">
                <SegmentId>d13b7813-48c8-4569-b0b5-d5b75b42b2e8</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="129"
                  trans_unit_id="129-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Some Anti-patterns</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="129">
            <SegmentId>d13b7813-48c8-4569-b0b5-d5b75b42b2e8</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="129"
              trans_unit_id="129-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Some Anti-patterns</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-anti-patterns.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
      <MarkdownBlockBase
        xsi:type="MarkdownParagraphBlock"
        item_id="ae2e83e9-e49e-4093-99b6-6652564dccd4"
        item_type="NormalParagraph"
        item_footer="&#xA;&#xA;"
        trans_unit_id="ae2e83e9-e49e-4093-99b6-6652564dccd4">
        <Lines>
          <MarkdownLine>
            <LineId>c42f9411-6364-49e2-8252-ff524e1c62ba</LineId>
            <paragraph_segments>
              <MarkdownSegment
                trans_unit_id="130">
                <SegmentId>fb24de27-77c2-40d7-92b2-cb70032b8637</SegmentId>
                <LinkItem
                  internal_item_id="1"
                  internal_item_parent_id="130"
                  trans_unit_id="130-1"
                  internal_item_type="Link">
                  <internal_items />
                  <internal_link_type>Inline</internal_link_type>
                  <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
                  <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
                  <internal_link_title />
                </LinkItem>
              </MarkdownSegment>
            </paragraph_segments>
            <PrefixWSLength>0</PrefixWSLength>
            <SuffixWSLength>0</SuffixWSLength>
          </MarkdownLine>
        </Lines>
        <paragraph_segments>
          <MarkdownSegment
            trans_unit_id="130">
            <SegmentId>fb24de27-77c2-40d7-92b2-cb70032b8637</SegmentId>
            <LinkItem
              internal_item_id="1"
              internal_item_parent_id="130"
              trans_unit_id="130-1"
              internal_item_type="Link">
              <internal_items />
              <internal_link_type>Inline</internal_link_type>
              <internal_link_text>Introduction to Service Fabric Actors</internal_link_text>
              <internal_link_url>service-fabric-reliable-actors-introduction.md</internal_link_url>
              <internal_link_title />
            </LinkItem>
          </MarkdownSegment>
        </paragraph_segments>
      </MarkdownBlockBase>
    </ArrayOfMarkdownBlockBase>
  </block_element>
  <references>
    <ArrayOfMarkdownLinkedReference xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <MarkdownLinkedReference
        item_id="27c20b00-134d-4fdc-957e-f6a521640a2d"
        item_type="LinkedReference"
        item_footer="footer_not_set"
        trans_unit_id="27c20b00-134d-4fdc-957e-f6a521640a2d">
        <link_id>1</link_id>
        <link_uri>./media/service-fabric-reliable-actors-pattern-distributed-computation/distributed-computation-1.png</link_uri>
        <link_title />
      </MarkdownLinkedReference>
    </ArrayOfMarkdownLinkedReference>
  </references>
</markdown_skeleton_root>